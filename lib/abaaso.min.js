/**
 * abaaso
 *
 * @author Jason Mulligan <jason.mulligan@avoidwork.com>
 * @copyright 2013 Jason Mulligan
 * @license BSD-3 <https://raw.github.com/avoidwork/abaaso/master/LICENSE>
 * @link http://abaaso.com
 * @module abaaso
 * @version 3.4.31
 */
(function(e){var t=e.document,n=e.location,r=e.navigator,i=typeof t=="undefined",s,o,u,a;i&&(a=require("url"),o=require("http"),u=require("https"),typeof Storage=="undefined"&&(localStorage=require("localStorage")),typeof XMLHttpRequest=="undefined"&&(XMLHttpRequest=null)),s=e.abaaso||function(){"use strict";function b(e){this.parentNode=e,this.clear()}function E(e,t,n){this.callback=null,this.element=e,this.filter=null,this.id=H.genId(),this.pageIndex=1,this.pageSize=null,this.pageRange=5,this.pagination="bottom",this.placeholder="",this.order="",this.ready=!1,this.refreshing=!1,this.template=n,this.total=0,this.sensitivity="ci",this.store=t,this.where=null}function T(e,t,n,r){this.element=e,this.datalist=t,this.debounce=r,this.set(n),this.init()}function _(){this.error=[],this.fulfill=[],this.parentNode=null,this.outcome=null,this.state=M.state.pending}var f,l,c,h,p={android:/android/i,allow:/^allow$/i,allow_cors:/^access-control-allow-methods$/i,alphanum:/^[a-zA-Z0-9]+$/,blackberry:/blackberry/i,"boolean":/^(0|1|true|false)?$/,boolean_number_string:/boolean|number|string/,checked_disabled:/checked|disabled/i,chrome:/chrome/i,complete_loaded:/^(complete|loaded)$/i,del:/^del/,desc:/\s*desc$/i,domain:/^[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#]*[\w\-\@?^=%&amp;\/~\+#])?/,down_up:/down|up/,email:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,element_update:/innerHTML|innerText|textContent|type|src/,firefox:/firefox/i,get_headers:/^(head|get|options)$/,get_remove_set:/get|remove|set/,hash:/\#/,header_replace:/:.*/,header_value_replace:/.*:\s+/,http_ports:/80|443/,ie:/msie|ie/i,input_button:/button|submit|reset/,integer:/(^-?\d\d*$)/,ip:/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,is_xml:/<[^>]+>[^<]*]+>/,ios:/ipad|iphone/i,json_maybe:/json|plain|javascript/,json_wrap:/^[\[\{]/,jsonp_wrap:/([a-zA-Z0-9\.]+\()(.*)(\))$/,linux:/linux|bsd|unix/i,nil:/^null/i,no:/no/i,not_endpoint:/.*\//,notEmpty:/\w{1,}/,number:/(^-?\d\d*\.\d*$)|(^-?\d\d*$)|(^-?\.\d\d*$)|number/,number_format_1:/.*\./,number_format_2:/\..*/,number_present:/\d{1,}/,number_string:/number|string/i,number_string_object:/number|object|string/i,null_undefined:/null|undefined/,observer_allowed:/click|error|key|mousedown|mouseup|submit/i,observer_globals:/body|document|window/i,object_undefined:/object|undefined/,opera:/opera/i,osx:/macintosh/i,phone:/^([0-9\(\)\/\+ \-\.]+)$/,playbook:/playbook/i,plural:/s$/,put_post:/^(post|put)$/i,radio_checkbox:/^(radio|checkbox)$/i,reflect:/function\s+\w*\s*\((.*?)\)/,root:/^\/[^\/]/,route_nget:/^(head|options)$/i,route_methods:/^(all|delete|get|put|post|head|options)$/i,safari:/safari/i,scheme:/.*\/\//,select:/select/i,selector_many:/\:|\./,selector_complex:/\s|\>/,sensitivity_types:/ci|cs|ms/,set_del:/^(set|del|delete)$/,sort_needle:/:::(.*)$/,space_hyphen:/\s|-/,string_boolean:/^(true|false)$/i,string_object:/string|object/i,string_true:/^true$/i,svg:/svg/i,top_bottom:/top|bottom/i,true_undefined:/true|undefined/i,url:/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i,webos:/webos/i,windows:/windows/i,xml:/xml/i},d={add:function(e,t){return d.contains(e,t)||e.push(t),e},cast:function(e,t){t=t===!0;var n=[];if(!isNaN(e.length))if(!m.ie||m.version>8)n=Array.prototype.slice.call(e);else try{n=Array.prototype.slice.call(e)}catch(r){H.iterate(e,function(e,t){t!=="length"&&n.push(e)})}else t?n=d.keys(e):H.iterate(e,function(e){n.push(e)});return n},chunk:function(e,t){var n=[],r=A.round(e.length/t,"up"),i=0,s=-1;while(++s<r)i=s*t,n.push(d.limit(e,i,t));return n},clear:function(e){return e.length>0?d.remove(e,0,e.length):e},clone:function(e){return H.clone(e)},contains:function(e,t){return d.index(e,t)>-1},collect:function(e,t){var n=[];return d.each(e,function(e){n.push(t(e))}),n},compact:function(e,t){var n=[];return n=e.filter(function(e){return!p.null_undefined.test(e)}),t?n.length<e.length?n:null:n},diff:function(e,t){var n=[];return d.each(e,function(e){d.contains(t,e)||n.add(e)}),d.each(t,function(t){d.contains(e,t)||n.add(t)}),n},each:function(e,t){var n=e.length,r=-1;while(++r<n)if(t.call(e,e[r],r)===!1)break;return e},empty:function(e){return e.length===0},equal:function(e,t){return N.encode(e)===N.encode(t)},fill:function(e,t,n,r){var i=typeof t=="function",s=e.length,o=isNaN(n)?0:n,u=isNaN(r)?s-1:o+r;u>s-1&&(u=s-1);for(;o<=u;o++)e[o]=i?t(e[o]):t;return e},first:function(e){return e[0]},flat:function(e){var t=[];return t=e.reduce(function(e,t){return e.concat(t)},t),t},index:function(e,t){return e.indexOf(t)},indexed:function(e){var t=[];return H.iterate(e,function(e,n){typeof e=="object"?t=t.concat(d.indexed(e)):t.push(e)}),t},intersect:function(e,t){var n=e.length>t.length?e:t,r=n===e?t:e;return n.filter(function(e){return d.contains(r,e)})},keep_if:function(e,t){if(typeof t!="function")throw Error(C.error.invalidArguments);var n=[],r=[];return n=e.filter(t),r=d.diff(e,n),d.each(r,function(t,n){d.remove(e,d.index(e,t))}),e},keys:function(e){var t=[];return typeof Object.keys=="function"?t=Object.keys(e):H.iterate(e,function(e,n){t.push(n)}),t},last:function(e,t){var n=e.length-1;return isNaN(t)||t===1?e[n]:d.limit(e,n- --t,n)},limit:function(e,t,n){var r=[],i=t-1,s=t+n,o=e.length;if(o>0)while(++i<s&&i<o)r.push(e[i]);return r},max:function(e){return d.last(e.sort(d.sort))},mean:function(e){return d.sum(e)/e.length},median:function(e){var t=e.length,n=A.round(t/2,"down"),r=e.sort(d.sort);return A.odd(t)?r[n]:(r[n-1]+r[n])/2},merge:function(e,t){return d.each(t,function(t){e.push(t)}),e},min:function(e){return e.sort(d.sort)[0]},mode:function(e){var t={},n=0,r=0,i=[],s;return d.each(e,function(e){isNaN(t[e])?t[e]=1:++t[e]}),n=d.max(d.cast(t)),H.iterate(t,function(e,t){e===n&&i.push(A.parse(t))}),r=i.length,r>0&&(s=r===1?i[0]:i),s},range:function(e){return d.max(e)-d.min(e)},rassoc:function(e,t){var n;return d.each(e,function(r,i){if(r[1]===t)return n=e[i],!1}),n},reject:function(e,t){return d.diff(e,e.filter(t))},replace:function(e,t){return d.remove(e,0,e.length),d.each(t,function(t){e.push(t)}),e},remove:function(e,t,n){if(isNaN(t)){t=e.index(t);if(t===-1)return e}else t=t||0;var r=e.length,i=e.slice((n||t)+1||r);return e.length=t<0?r+t:t,e.push.apply(e,i),e},remove_if:function(e,t){if(typeof t!="function")throw Error(C.error.invalidArguments);var n=[];return n=e.filter(t),d.each(n,function(t,n){d.remove(e,d.index(e,t))}),e},remove_while:function(e,t){if(typeof t!="function")throw Error(C.error.invalidArguments);var n=[];return d.each(e,function(e){var r=t(e);if(r===!1)return!1;n.push(e)}),d.each(n,function(t,n){d.remove(e,d.index(e,t))}),e},rest:function(e,t){return t=t||1,t<1&&(t=1),d.limit(e,t,e.length)},rindex:function(e,t){var n=-1;return d.each(e,function(e,r){e===t&&(n=r)}),n},rotate:function(e,t){var n=[],r=e.length;return t===0?n=e:(t<0?t+=r:t--,n=d.limit(e,t,r),n=n.concat(d.limit(e,0,t))),n},series:function(e,t,n){e=e||0,t=t||e,n=n||1;var r=[],i=-1,s=Math.max(0,Math.ceil((t-e)/n));while(++i<s)r[i]=e,e+=n;return r},split:function(e,t){var n=[],r=e.length,i=Math.ceil(r/t),s=Math.floor(r/t),o=Math.ceil(r/i),u=!1,a=0,f=-1;A.diff(r,t*i)>i&&(o=r-s*t+s-1);while(++f<t)!u&&o<t&&f===o&&(--i,u=!0),f>0&&(a+=i),n.push(d.limit(e,a,i));return n},sort:function(e,t){var n=!1,r=0;return!isNaN(e)&&!isNaN(t)&&(n=!0),e=n?A.parse(e):String(e),t=n?A.parse(t):String(t),e<t?r=-1:e>t&&(r=1),r},sum:function(e){var t=0;return e.length>0&&(t=e.reduce(function(e,t){return e+t})),t},take:function(e,t){return d.limit(e,0,t)},total:function(e){return d.indexed(e).length},toObject:function(e){var t={},n=e.length;while(n--)t[n.toString()]=e[n];return t},unique:function(e,t){var n=[];return d.each(e,function(e){d.add(n,e)}),n},zip:function(e,t){var n=[];return t instanceof Array||(t=typeof t=="object"?d.cast(t):[t]),d.each(t,function(e,t){e instanceof Array||(this[t]=[e])}),d.each(e,function(e,r){n[r]=[e],d.each(t,function(e){n[r].push(e[r]||null)})}),n}},v={items:{},clean:function(){return H.iterate(v.items,function(e,t){v.expired(t)&&v.expire(t)})},expire:function(e,t){return t=t===!0,v.items[e]!==undefined?(delete v.items[e],t||e.fire("beforeExpire, expire, afterExpire"),!0):!1},expired:function(e){var t=v.items[e];return t!==undefined&&t.expires!==undefined&&t.expires<new Date},get:function(e,t){return t=t!==!1,v.items[e]===undefined?!1:t&&v.expired(e)?(v.expire(e),!1):H.clone(v.items[e])},set:function(e,t,n){return v.items[e]===undefined&&(v.items[e]={},v.items[e].permission=0),t==="permission"?v.items[e].permission|=n:t==="!permission"?v.items[e].permission&=~n:v.items[e][t]=n,v.items[e]}},m={android:function(){return!i&&p.android.test(r.userAgent)}(),blackberry:function(){return!i&&p.blackberry.test(r.userAgent)}(),chrome:function(){return!i&&p.chrome.test(r.userAgent)}(),firefox:function(){return!i&&p.firefox.test(r.userAgent)}(),ie:function(){return!i&&p.ie.test(r.userAgent)}(),ios:function(){return!i&&p.ios.test(r.userAgent)}(),linux:function(){return!i&&p.linux.test(r.userAgent)}(),mobile:function(){s.client.mobile=this.mobile=!i&&(/blackberry|iphone|webos/i.test(r.userAgent)||p.android.test(r.userAgent)&&(s.client.size.height<720||s.client.size.width<720))},playbook:function(){return!i&&p.playbook.test(r.userAgent)}(),opera:function(){return!i&&p.opera.test(r.userAgent)}(),osx:function(){return!i&&p.osx.test(r.userAgent)}(),safari:function(){return!i&&p.safari.test(r.userAgent.replace(/chrome.*/i,""))}(),tablet:function(){s.client.tablet=this.tablet=!i&&(/ipad|playbook|webos/i.test(r.userAgent)||p.android.test(r.userAgent)&&(s.client.size.width>=720||s.client.size.width>=720))},webos:function(){return!i&&p.webos.test(r.userAgent)}(),windows:function(){return!i&&p.windows.test(r.userAgent)}(),version:function(){var e=0;switch(!0){case this.chrome:e=r.userAgent.replace(/(.*chrome\/|safari.*)/gi,"");break;case this.firefox:e=r.userAgent.replace(/(.*firefox\/)/gi,"");break;case this.ie:e=parseInt(r.userAgent.replace(/(.*msie|;.*)/gi,"")),t.documentMode<e&&(e=t.documentMode);break;case this.opera:e=r.userAgent.replace(/(.*opera\/|\(.*)/gi,"");break;case this.safari:e=r.userAgent.replace(/(.*version\/|safari.*)/gi,"");break;default:e=r!==undefined?r.appVersion:0}return e=isNaN(parseInt(e))?0:parseInt(e),s.client.version=this.version=e,e},allows:function(e,t){if(e.isEmpty()||t.isEmpty())throw Error(C.error.invalidArguments);if(!v.get(e,!1))return undefined;t=t.toLowerCase();var n=!1,r=0;return p.del.test(t)?r=1:p.get_headers.test(t)?r=4:p.put_post.test(t)&&(r=2),n=(m.permissions(e,t).bit&r)!==0,n},bit:function(e){var t=0;return d.each(e,function(e){switch(e.toLowerCase()){case"head":case"get":case"options":t|=4;break;case"post":case"put":t|=2;break;case"delete":t|=1}}),t},cors:function(e){return!i&&e.indexOf("//")>-1&&e.indexOf("//"+n.host)===-1},headers:function(e,t,n){var r=P.trim(e.getAllResponseHeaders()).split("\n"),i={},s={},o=null,u=new Date,a=m.cors(t);d.each(r,function(e,t){var n,r;r=e.replace(p.header_value_replace,""),n=e.replace(p.header_replace,""),n=P.unhyphenate(n,!0).replace(/\s+/g,"-"),i[n]=r,o===null&&(!a&&p.allow.test(n)?o=r:a&&p.allow_cors.test(n)&&(o=r))});switch(!0){case p.no.test(i["Cache-Control"]):case p.no.test(i.Pragma):break;case i["Cache-Control"]!==undefined&&p.number_present.test(i["Cache-Control"]):u=u.setSeconds(u.getSeconds()+parseInt(p.number_present.exec(i["Cache-Control"])[0]));break;case i.Expires!==undefined:u=new Date(i.Expires);break;default:u=u.setSeconds(u.getSeconds()+f.expires)}return s.expires=u,s.headers=i,s.permission=m.bit(o!==null?P.explode(o):[n]),n!=="head"&&(v.set(t,"expires",s.expires),v.set(t,"headers",s.headers),v.set(t,"permission",s.permission)),s},parse:function(e,t){t=t||"";var n,r;switch(!0){case(p.json_maybe.test(t)||t.isEmpty())&&p.json_wrap.test(e.responseText)&&Boolean(r=N.decode(e.responseText,!0)):case(p.json_maybe.test(t)||t.isEmpty())&&(r=p.jsonp_wrap.exec(e.responseText))&&r!==null&&Boolean(r=N.decode(r[2],!0)):n=r;break;case p.xml.test(t)&&String(e.responseText).isEmpty()&&e.responseXML!==undefined&&e.responseXML!==null:n=F.decode(e.responseXML.xml!==undefined?e.responseXML.xml:e.responseXML);break;case p.is_xml.test(e.responseText):n=F.decode(e.responseText);break;default:n=e.responseText}return n},permissions:function(e){var t=v.get(e,!1),n=t?t.permission:0,r={allows:[],bit:n,map:{read:4,write:2,"delete":1}};return n&1&&r.allows.push("DELETE"),n&2&&function(){r.allows.push("POST"),r.allows.push("PUT")}(),n&4&&r.allows.push("GET"),r},jsonp:function(t,n,r,i){var s=M.factory(),o,u,a;h===undefined&&(e.abaaso===undefined&&H.define("abaaso.callback",{},e),h="abaaso");switch(!0){case i===undefined:case i===null:case i instanceof Object&&(i.callback===null||i.callback===undefined):case typeof i=="string"&&i.isEmpty():o="callback";break;case i instanceof Object&&i.callback!==undefined:o=i.callback;break;default:o="callback"}s.then(function(e){typeof n=="function"&&n(e)},function(e){throw typeof r=="function"&&r(e),e});do u=H.genId().slice(0,10);while(e.abaaso.callback[u]!==undefined);return t=t.replace(o+"=?",o+"="+h+".callback."+u),e.abaaso.callback[u]=function(t){clearTimeout(H.timer[u]),delete H.timer[u],delete e.abaaso.callback[u],s.resolve(t),a.destroy()},a=f("head")[0].create("script",{src:t,type:"text/javascript"}),H.defer(function(){s.reject(undefined)},3e4,u),s},request:function(e,t,n,r,s,o,u){u=u||3e4;var a,f,l,h,d,g,y,b,w,E,S;if(p.put_post.test(t)&&s===undefined)throw Error(C.error.invalidArguments);t=t.toLowerCase(),o=o instanceof Object?o:null,a=m.cors(e),f=m.ie&&m.version<10&&a?new XDomainRequest:new XMLHttpRequest,l=p.put_post.test(t)&&s!==undefined?s:null,h=t==="get"?v.get(e):!1,d=t.capitalize(),g=null,y=typeof Document!="undefined",b=typeof ArrayBuffer!="undefined",w=typeof Blob!="undefined",E=M.factory(),S=E.then(function(r){t==="delete"&&v.expire(e),typeof n=="function"&&n.call(e,r,f),f=null},function(t){throw typeof r=="function"&&r.call(e,t,f),f=null,t}),e.fire("before"+d);if(!p.get_headers.test(t)&&e.allows(t)===!1)return f.status=405,E.reject(null),e.fire("failed"+d,null,f);if(t==="get"&&Boolean(h))i&&(f.readyState=4,f.status=200,f._resheaders=h.headers),E.resolve(h.response),e.fire("afterGet",h.response,f);else{f[f instanceof XMLHttpRequest?"onreadystatechange":"onload"]=function(n){m.response(f,e,t,E)};try{f.timeout!==undefined&&(f.timeout=u)}catch(x){void 0}f.ontimeout!==undefined&&(f.ontimeout=function(t){e.fire("timeout"+d,t,f)}),f.onprogress!==undefined&&(f.onprogress=function(t){e.fire("progress"+d,t,f)}),f.upload!==undefined&&f.upload.onprogress!==undefined&&(f.upload.onprogress=function(t){e.fire("progressUpload"+d,t,f)});try{f.open(t.toUpperCase(),e,!0),o!==null&&o.hasOwnProperty("Content-Type")&&(g=o["Content-Type"]),a&&g===null&&(g="text/plain"),l!==null&&(l.hasOwnProperty("xml")&&(l=l.xml),y&&l instanceof Document&&(l=F.decode(l)),typeof l=="string"&&p.is_xml.test(l)&&(g="application/xml"),!(b&&l instanceof ArrayBuffer)&&!(w&&l instanceof Blob)&&l instanceof Object&&(g="application/json",l=N.encode(l)),g===null&&(b&&l instanceof ArrayBuffer||w&&l instanceof Blob)&&(g="application/octet-stream"),g===null&&(g="application/x-www-form-urlencoded; charset=UTF-8")),f.setRequestHeader!==undefined&&(typeof h=="object"&&h.headers.hasOwnProperty("ETag")&&f.setRequestHeader("ETag",h.headers.ETag),o===null&&(o={}),g!==null&&(o["Content-Type"]=g),o.hasOwnProperty("callback")&&delete o.callback,H.iterate(o,function(e,t){e!==null&&t!=="withCredentials"&&f.setRequestHeader(t,e)})),typeof f.withCredentials=="boolean"&&o!==null&&typeof o.withCredentials=="boolean"&&(f.withCredentials=o.withCredentials),l!==null?f.send(l):f.send()}catch(x){c(x,arguments,this,!0),E.reject(x),e.fire("failed"+d,m.parse(f),f)}}return S},response:function(e,t,r,o){var u=r.toLowerCase().capitalize(),a=n,f=null,l=m.ie&&e.readyState===undefined,h,p,d,g,y,b;h=function(e,n){o.reject(e),c(e,arguments,this,!0),t.fire("failed"+u,m.parse(n),n)};if(!l&&e.readyState===2)t.fire("received"+u,null,e);else if(!l&&e.readyState===4){switch(e.status){case 200:case 201:case 202:case 203:case 204:case 205:case 206:case 301:p=s.state,d=m.headers(e,t,r);if(r==="head")return o.resolve(d.headers),t.fire("afterHead",d.headers);if(r==="options")return o.resolve(d.headers),t.fire("afterOptions",d.headers);if(r!=="delete"&&/200|201/.test(e.status)){y=d.headers["Content-Type"]||"",g=m.parse(e,y);if(g===undefined)throw Error(C.error.serverError);v.set(t,"response",d.response=H.clone(g))}p.header!==null&&Boolean(f=d.headers[p.header])&&p.current!==f&&(typeof p.change=="function"?p.change(f):p.current=f),t.fire("headers",d.headers,e);switch(e.status){case 200:case 201:o.resolve(g),t.fire("after"+u,g,e);break;case 202:case 203:case 204:case 206:o.resolve(null),t.fire("after"+u,null,e);break;case 205:o.resolve(null),t.fire("reset",null,e);break;case 301:o.resolve(g),t.fire("moved",g,e)}break;case 401:h(i?C.error.serverUnauthorized:Error(C.error.serverUnauthorized),e);break;case 403:v.set(t,"!permission",m.bit([r])),h(i?C.error.serverForbidden:Error(C.error.serverForbidden),e);break;case 405:v.set(t,"!permission",m.bit([r])),h(i?C.error.serverInvalidMethod:Error(C.error.serverInvalidMethod),e);break;default:h(i?C.error.serverError:Error(C.error.serverError),e)}e.onreadystatechange=null}else l&&(g=m.parse(e),v.set(t,"permission",m.bit(["get"])),v.set(t,"response",g),o.resolve(g),t.fire("afterGet",g,e))},size:function(){var e=i?{clientHeight:0,clientWidth:0}:t.documentElement!==undefined?t.documentElement:t.body;return{height:e.clientHeight,width:e.clientWidth}}},g={expire:function(e,t,n){return g.get(e)!==undefined&&g.set(e,"","-1s",t,n),e},get:function(e){return H.coerce(g.list()[e])},list:function(){var e={},n,r;return t.cookie!==undefined&&!t.cookie.isEmpty()&&(r=P.explode(t.cookie,";"),d.each(r,function(t){n=P.explode(t,"="),e[decodeURIComponent(n[0])]=decodeURIComponent(n[1])})),e},set:function(e,n,r,i,s){n=(n||"")+";",r=r||"",i=typeof i=="string"?" domain="+i+";":"",s=s===!0?"; secure":"";var o="",u=null,a=null,f=["d","h","m","s"],l=new RegExp,c=f.length;if(!r.isEmpty()){while(c--){H.compile(l,f[c]);if(l.test(r)){a=f[c],u=parseInt(r);break}}if(isNaN(u))throw Error(C.error.invalidArguments);o=new Date;switch(a){case"d":o.setDate(o.getDate()+u);break;case"h":o.setHours(o.getHours()+u);break;case"m":o.setMinutes(o.getMinutes()+u);break;case"s":o.setSeconds(o.getSeconds()+u)}}return o instanceof Date&&(o=" expires="+o.toUTCString()+";"),t.cookie=P.trim(e.toString())+"="+n+o+i+" path=/"+s,g.get(e)}},y={decorator:function(e,t,n){return e=H.object(e),H.genId(e),typeof e.fire!="function"&&O.decorate(e),e.data=new b(e),n instanceof Object&&H.merge(e.data,n),t!==null&&typeof t=="object"&&e.data.batch("set",t),e},methods:{batch:function(e,t,n,r){e=e.toString().toLowerCase(),n=n===!0,r=r||1e3;if(!p.set_del.test(e)||n&&p.del.test(e)||typeof t!="object")throw Error(C.error.invalidArguments);var i=this.parentNode,s=this,o=this.events===!0,u=0,a=t.length,f=!1,l=M.factory(),c,h,v,m,g,y,b,w;return h=l.then(function(t){s.loaded=!0,p.del.test(e)&&s.reindex(),d.each(s.datalists,function(e){e.display()}),o&&i.fire("afterDataBatch",t)},function(e){throw o&&i.fire("failedDataBatch",e),e}),c=function(e){l.resolve(e)},v=function(e){l.reject(e)},g=function(e,t){var n=H.clone(e),r=M.factory(),i={};typeof n.batch!="function"?i=n:H.iterate(n,function(e,t){d.contains(s.collections,t)||(i[t]=e)}),s.key!==null&&i[s.key]!==undefined&&(t=i[s.key],delete i[s.key]),r.then(function(e){++u===a&&c(s.get())},function(e){f||(f=!0,v(e))}),i instanceof Array&&s.uri!==null?s.generate(t,undefined).then(function(e){r.resolve(e)},function(e){r.reject(e)}):s.set(t,i,!0).then(function(e){r.resolve(e)},function(e){r.reject(e)})},y=function(e){var t=M.factory();t.then(function(e){return++u===a&&c(e),e},function(e){return f||(f=!0,v(e)),e}),s.del(e,!1,!0).then(function(e){t.resolve(e)},function(e){t.reject(e)})},o&&i.fire("beforeDataBatch",t),n&&this.clear(n),d.each(this.datalists,function(e){e.ready=!1}),t.length===0?c([]):e==="set"?d.each(d.chunk(t,r),function(e,t){var n=t*r;d.each(e,function(e,t){s.leafs.contains(e)?(t=e,e={}):t=(n+t).toString();if(typeof e=="object")g(e,t);else if(e.indexOf("//")===-1){e.charAt(0)!=="/"?e=s.uri+"/"+e:s.uri!==null&&p.root.test(e)&&(w=H.parse(s.uri),e=w.protocol+"//"+w.host+e),t=e.replace(p.not_endpoint,"");if(t.isEmpty())return;e.get(function(e){g(s.source===null?e:H.walk(e,s.source),t)},v,H.merge({withCredentials:s.credentials},s.headers))}else{t=e.replace(p.not_endpoint,"");if(t.isEmpty())return;e.get(function(e){g(s.source===null?e:H.walk(e,s.source),t)},v,H.merge({withCredentials:s.credentials},s.headers))}})}):d.each(t.sort(d.sort).reverse(),function(e){y(e)}),h},clear:function(e){e=e===!0;var t=this.parentNode,n=this.events===!0;return e?(this.collections=[],this.crawled=!1,this.keys={},this.loaded=!1,this.records=[],this.total=0,this.views={}):(n&&t.fire("beforeDataClear"),this.callback=null,this.collections=[],this.crawled=!1,this.credentials=null,this.datalists=[],this.depth=0,this.events=!0,this.expires=null,this.headers={Accept:"application/json"},this.ignore=[],this.key=null,this.keys={},this.leafs=[],this.loaded=!1,this.maxDepth=0,this.pointer=null,this.records=[],this.recursive=!1,this.retrieve=!1,this.source=null,this.total=0,this.views={},this.uri=null,n&&t.fire("afterDataClear")),this},crawl:function(e){var t=this,n=this.events===!0,r=e instanceof Object?e:this.get(e),i=this.uri===null?"":this.uri,s=M.factory(),o=0,u=0,a,f,l,c;if(r===undefined)throw Error(C.error.invalidArguments);return this.crawled=!0,l=s.then(function(e){return e}),a=function(e,t){var n="",r;return/\/\//.test(e)?n=e:e.charAt(0)==="/"&&t.charAt(0)!=="/"?(r=H.parse(t),n=r.protocol+"//"+r.host+e):n=e,n},f=function(){++o===u&&s.resolve(u)},c=function(e,t){var n={};return d.contains(t.collections,e)||t.collections.push(e),n=y.decorator({id:r.key+"-"+e},null,{key:t.key,pointer:t.pointer,source:t.source,ignore:H.clone(t.ignore),leafs:H.clone(t.leafs),depth:t.depth+1,maxDepth:t.maxDepth}),n.data.headers=H.merge(n.data.headers,t.headers),!d.contains(t.leafs,e)&&t.recursive&&t.retrieve&&(n.data.maxDepth===0||n.data.depth<n.data.maxDepth)&&(n.data.recursive=!0,n.data.retrieve=!0),n},H.iterate(r.data,function(e,s){var o,l,h;if(d.contains(t.ignore,s)||d.contains(t.leafs,s)||t.depth>=t.maxDepth||!(e instanceof Array)&&typeof e!="string")return;u=d.cast(r.data).length,o=M.factory(),o.then(function(e){n&&r.data[s].fire("afterDataRetrieve",e),f()},function(e){n&&r.data[s].fire("failedDataRetrieve",e),f()});if(e instanceof Array&&e.length>0)r.data[s]=c(s,t),typeof e[0]=="string"&&d.each(e,function(t,n){e[n]=a(t,i)}),r.data[s].data.batch("set",e,!0,undefined).then(function(e){o.resolve(e)},function(e){o.reject(e)});else if(e.charAt(0)==="/"||e.indexOf("//")>-1)r.data[s]=c(s,t),e=a(e,i),r.data[s].data.setUri(e).then(function(e){o.resolve(e)},function(e){o.reject(e)})}),l},del:function(e,t,n){if(e===undefined||!p.number_string.test(typeof e))throw Error(C.error.invalidArguments);t=t!==!1,n=n===!0;var r=this.parentNode,i=this,s=this.events===!0,o=M.factory(),u,a,f,l,c;u=o.then(function(e){var t=i.get(e.record);i.records.remove(i.keys[e.key]),delete i.keys[e.key],i.total--,i.views={},H.iterate(t.data,function(e,t){if(e===null)return;e.data!==undefined&&typeof e.data.teardown=="function"&&e.data.teardown()}),e.reindex&&i.reindex(),n||d.each(i.datalists,function(e){e.ready&&e.del(t)}),s&&r.fire("afterDataDelete",t)},function(e){throw s&&r.fire("failedDataDelete",e),e});if(typeof e=="string"){a=e,e=this.keys[a];if(e===undefined)throw Error(C.error.invalidArguments)}else{a=this.records[e];if(a===undefined)throw Error(C.error.invalidArguments);a=a.key}return f={key:a,record:e,reindex:t},!n&&this.callback===null&&this.uri!==null&&(l=this.uri+"/"+a,c=l.allows("delete")),s&&r.fire("beforeDataDelete",f),n||this.callback!==null||this.uri===null?o.resolve(f):p.true_undefined.test(c)?l.del(function(e){o.resolve(f)},function(e){o.reject(f)},H.merge({withCredentials:this.credentials},this.headers)):o.reject(f),u},find:function(e,t,n){if(e===undefined)throw Error(C.error.invalidArguments);var r=[],i=[],s=new RegExp,o=typeof e=="function";return this.total===0?r:(o||(e=typeof e=="string"?P.explode(e):[e],n===undefined||String(n).isEmpty()?n="gi":n===null&&(n="")),t=typeof t=="string"?P.explode(t):null,t===null?d.each(this.records,function(t){o?e(t)===!0&&(i.push(t.key),r.add(t)):H.iterate(t.data,function(o,u){if(d.contains(i,t.key))return!1;if(o===null||typeof o.data=="object")return;d.each(e,function(e){H.compile(s,e,n);if(s.test(o))return i.push(t.key),r.add(t),!1})})}):d.each(this.records,function(u){d.each(t,function(t){if(d.contains(i,u.key))return!1;if(u.data[t]===undefined||typeof u.data[t].data=="object")return;if(!o)d.each(e,function(e){H.compile(s,e,n);if(s.test(u.data[t]))return i.push(u.key),r.add(u),!1});else if(e(u.data[t])===!0)return i.push(u.key),r.add(u),!1})}),r)},form:function(e,t,n){n=n!==!1;var r=e===null,i=this,s=this.events===!0,o,u,a,l,c,h;r?e=this.get(0):e instanceof Object||(e=this.get(e));if(e===undefined)throw Error(C.error.invalidArguments);if(this.uri!==null&&!this.uri.allows("post"))throw Error(C.error.serverInvalidMethod);return c=e.key,h=e.data,t!==undefined&&(t=H.object(t)),this.uri!==null?(o=this.uri.replace(/.*\//,"").replace(/\?.*/,""),o.isDomain()&&(o=o.replace(/\..*/g,""))):o="record",a=function(e){var t=H.target(e).parentNode,r=f("#"+t.id+" input"),o=r[0].name.match(/(.*)\[/)[1],u=!0,a={};H.stop(e),s&&i.parentNode.fire("beforeDataFormSubmit"),n&&(u=t.validate());switch(u){case!1:s&&i.parentNode.fire("failedDataFormSubmit");break;case!0:d.each(r,function(e){if(typeof e.type!="undefined"&&p.input_button.test(e.type))return;H.define(e.name.replace("[",".").replace("]",""),e.value,a)}),i.parentNode.once("afterDataSet",function(){t.destroy()}),i.set(c,a[o])}s&&i.parentNode.fire("afterDataFormSubmit",c)},l=function(e,t,n){var i,s;H.iterate(e,function(e,o){e instanceof Array?(i=0,d.each(e,function(e){l(e,t,n+"["+o+"]["+i++ +"]")})):e instanceof Object?l(e,t,n+"["+o+"]"):(s=(n+"["+o+"]").replace(/\[|\]/g,""),t.create("label",{"for":s}).html(o.capitalize()),t.create("input",{id:s,name:n+"["+o+"]",type:"text",value:r?"":e}))})},s&&this.parentNode.fire("beforeDataForm"),u=S.create("form",{style:"display:none;"},t),l(h,u,o),u.create("input",{type:"button",value:C.common.submit}).on("click",function(e){a(e)}),u.create("input",{type:"reset",value:C.common.reset}),u.css("display","inherit"),s&&this.parentNode.fire("afterDataForm",u),u},generate:function(e,t){var n=this,r=M.factory(),i={},s=null,o,u,a;return i={depth:this.depth+1,headers:this.headers,ignore:d.clone(this.ignore),leafs:d.clone(this.leafs),key:this.key,maxDepth:this.maxDepth,pointer:this.pointer,recursive:this.recursive,retrieve:this.retrieve,source:this.source},o=r.then(function(e){return e},function(e){throw e}),u=function(){typeof t=="object"&&(s=t);if(i.maxDepth===0||i.depth<=i.maxDepth)n.records[a]=y.decorator({id:e},s,i),s===null&&(n.uri!==null&&t===undefined&&!d.contains(n.leafs,e)&&(t=n.uri+"/"+e),t!==undefined?n.records[a].data.setUri(t).then(function(e){r.resolve(e)},function(e){r.reject(e)}):r.resolve(n.records[a].data.get()))},this.keys[e]!==undefined?(a=this.keys[e],typeof this.records[a].data.teardown=="function"&&this.records[a].data.teardown(),u()):this.set(e,{},!0).then(function(e){a=n.keys[e.key],n.collections.add(e.key),u()}),o},get:function(e,t){var n=this.records,r=this.parentNode,i=typeof e,s=this,o;return i==="undefined"||String(e).length===0?o=n:i==="string"&&e.indexOf(",")>-1?(o=[],d.each(P.explode(e),function(e){isNaN(e)||(e=parseInt(e)),o.push(s.get(e))})):i==="string"&&this.keys[e]!==undefined?o=n[this.keys[e]]:i==="number"&&t===undefined?o=n[parseInt(e)]:i==="number"&&typeof t=="number"?o=n.limit(parseInt(e),parseInt(t)):o=undefined,o},purge:function(e){return this.storage(e||this,"remove")},reindex:function(){var e=this.total,t=this.parentNode,n=this.key!==null,r=-1;this.views={};if(e>0)while(++r<e)!n&&this.records[r].key.isNumber()&&(delete this.keys[this.records[r].key],this.records[r].key=r.toString()),this.keys[this.records[r].key]=r;return this},restore:function(e){return this.storage(e||this,"get")},save:function(e){return this.storage(e||this,"set")},select:function(e){var t;if(e instanceof Object)return t=this.get().filter(function(t){var n=!0;return H.iterate(e,function(e,r){if(t.data[r]!==e)return n=!1}),n}),t;throw Error(C.error.invalidArguments)},set:function(e,t,n){var r=this,i=M.factory(),s,o,u,a,f,l,c,h,v,m,g;o=i.then(function(e){var t={data:null,key:e.key,record:e.record},i=M.factory(),s,o;t.data=H.clone(e.data),i.then(function(e){r.retrieve&&r.crawl(e),n||d.each(r.datalists,function(e){e.ready&&e.set()}),l&&r.parentNode.fire("afterDataSet",e)},function(e){l&&r.parentNode.fire("failedDataSet",e)}),r.views={},t.key!==undefined&&(t.record=r.get(t.key));if(t.record===undefined){var u=r.total++;t.key===undefined&&(t.result===undefined&&(r.total--,i.reject(C.error.expectedObject)),r.source!==null&&(t.result=H.walk(t.result,r.source)),r.key===null?t.key=d.cast(t.result).first():(t.key=t.result[r.key],delete t.result[r.key]),typeof t.key!="string"&&(t.key=t.key.toString()),t.data=t.result),r.keys[t.key]=u,r.records[u]={key:t.key,data:{}},s=r.records[u];if(r.pointer===null||t.data[r.pointer]===undefined)s.data=t.data,r.key!==null&&s.data.hasOwnProperty(r.key)&&delete s.data[r.key],i.resolve(s);else{o=t.data[r.pointer];if(o===undefined||o===null)delete r.records[u],delete r.keys[t.key],i.reject(C.error.expectedObject);s.data={},o.get(function(e){r.source!==null&&(e=H.walk(e,r.source)),e[r.key]!==undefined&&delete e[r.key],s.data=e,i.resolve(s)},function(e){i.reject(e)},r.headers)}}else s=r.records[r.keys[t.record.key]],s.data=t.data,i.resolve(s)},function(e){throw l&&a.fire("failedDataSet",e),e}),e instanceof Object&&(n=t,t=e,e=null),n=n===!0,s=H.clone(t),e===null&&this.uri===null?this.key===null||s[this.key]===undefined?e=H.uuid():(e=s[this.key],delete s[this.key]):e===null&&(e=undefined);if(s instanceof Object)return s instanceof Array?this.generate(e).then(function(){r.get(e).data.batch("set",s).then(function(e){i.resolve(e)},function(e){i.reject(e)})}):(u=e===undefined?undefined:this.get(e),a=this.parentNode,f=e===undefined?"post":"put",l=this.events===!0,c={data:{},key:e,record:undefined},h=this.uri,u!==undefined?(c.record=this.records[this.keys[u.key]],H.iterate(c.record.data,function(e,t){!d.contains(r.collections,t)&&!d.contains(r.ignore,t)&&(c.data[t]=e)}),c.data=s):c.data=s,!n&&this.callback===null&&h!==null&&(u!==undefined&&(h+="/"+u.key),v=h.allows(f)),l&&a.fire("beforeDataSet",{key:e,data:s}),n||this.callback!==null||this.uri===null?i.resolve(c):p.true_undefined.test(v)?h[f](function(e){return c.result=e,i.resolve(c),c},function(e){return i.reject(e),e},s,H.merge({withCredentials:this.credentials},this.headers)):i.reject(c),o);throw Error(C.error.invalidArguments)},setExpires:function(e){if(e!==null&&this.uri===null||e!==null&&(isNaN(e)||e<1e3))throw Error(C.error.invalidArguments);if(this.expires===e)return;this.expires=e;var t=this.parentNode.id+"DataExpire",n=e,r=this;H.clearTimers(t);if(e===null)return;H.repeat(function(){if(r.uri===null)return r.setExpires(null),!1;v.expire(r.uri)||r.uri.fire("beforeExpire, expire, afterExpire")},n,t,!1)},setUri:function(e){var t=M.factory(),n;if(e!==null&&e.isEmpty())throw Error(C.error.invalidArguments);return this.uri===e?n=this.uri:(this.uri!==null&&this.uri.un(),n=this.uri=e,n!==null&&(n.on("expire",function(){this.sync(!0)},"dataSync",this),v.expire(n,!0),this.sync(!0).then(function(e){t.resolve(e)},function(e){t.reject(e)}))),t},sort:function(e,t,n,r){if(e===undefined||String(e).isEmpty())throw Error(C.error.invalidArguments);p.sensitivity_types.test(n)||(n="ci"),t=t===!0;var i=e.replace(/\s*asc/ig,"").replace(","," ").toCamelCase()+n.toUpperCase(),s=P.explode(e),o=this.key,u=[],a,f,l;return d.each(s,function(e){if(String(e).isEmpty())throw Error(C.error.invalidArguments)}),!t&&this.views[i]instanceof Array?this.views[i]:this.total===0?[]:(l=function(e,t){var n=e.clone(),r=e.first(),i={},s=[];return n.remove(0),i=a(r,t,p.desc.test(r)),d.each(i.order,function(e){if(i.registry[e].length<2)return;n.length>0&&(i.registry[e]=l(n,i.registry[e]))}),d.each(i.order,function(e){s=s.concat(i.registry[e])}),s},a=function(e,t,r){e=e.replace(/\s*asc/ig,"");var i=e.replace(p.desc,""),s=o===i,u=[],a={};return d.each(t,function(e){var t=s?e.key:e.data[i],r=t===null?"null":String(t);switch(n){case"ci":r=r.toCamelCase();break;case"cs":r=P.trim(r);break;case"ms":r=P.trim(r).slice(0,1).toLowerCase()}a[r]instanceof Array||(a[r]=[],u.push(r)),a[r].push(e)}),u.sort(d.sort),r&&u.reverse(),d.each(u,function(t){if(a[t].length===1)return;a[t]=f(a[t],e,i,r,s)}),{order:u,registry:a}},f=function(e,t,n,r,i){var s=[],o=[];return d.each(e,function(e,t){var r=i?e.key:e.data[n];r=P.trim(r.toString())+":::"+t,s.push(r.replace(p.nil,'""'))}),s.length>1&&(s.sort(d.sort),r&&s.reverse()),d.each(s,function(t){o.push(e[p.sort_needle.exec(t)[1]])}),o},u=l(s,r===undefined?this.records:this.select(r)),this.views[i]=u,u)},storage:function(e,t,n){var r=!1,i=this,s=n==="session"&&typeof sessionStorage!="undefined",o,u,a;if(!p.number_string_object.test(typeof e)||!p.get_remove_set.test(t))throw Error(C.error.invalidArguments);r=p.number_string.test(e)||e.hasOwnProperty("key")&&!e.hasOwnProperty("parentNode"),r&&!(e instanceof Object)&&(e=this.get(e)),u=r?e.key:e.parentNode.id;switch(t){case"get":o=s?sessionStorage.getItem(u):localStorage.getItem(u);if(o===null)throw Error(C.error.invalidArguments);o=N.decode(o),r?this.set(u,o,!0):H.merge(this,o),o=r?e:this;break;case"remove":s?sessionStorage.removeItem(u):localStorage.removeItem(u),o=this;break;case"set":a=N.encode(r?e.data:{total:this.total,keys:this.keys,records:this.records}),s?sessionStorage.setItem(u,a):localStorage.setItem(u,a),o=this}return o},sync:function(e){if(this.uri===null||this.uri.isEmpty())throw Error(C.error.invalidArguments);e=e===!0;var t=this,n=this.events===!0,r=t.parentNode,i=M.factory(),s=M.factory(),o,u,a;return i.then(function(e){if(typeof e!="object")throw Error(C.error.expectedObject);var n=!1,r;return t.source!==null&&(e=H.walk(e,t.source)),e instanceof Array?r=e:H.iterate(e,function(e){!n&&e instanceof Array&&(n=!0,r=e)}),r===undefined&&(r=[e]),t.batch("set",r,!0,undefined).then(function(e){s.resolve(e)},function(e){s.reject(e)}),r},function(e){s.reject(e)}),o=s.then(function(i){e&&t.reindex(),n&&r.fire("afterDataSync",i)},function(e){throw n&&r.fire("failedDataSync",e),e}),u=function(e){i.resolve(e)},a=function(e){i.reject(e)},n&&r.fire("beforeDataSync"),this.callback!==null?m.jsonp(this.uri,u,a,{callback:this.callback}):m.request(this.uri,"GET",u,a,null,H.merge({withCredentials:this.credentials},this.headers)),o},teardown:function(){var e=this.uri,t,n;return e!==null&&(v.expire(e,!0),O.remove(e),n=this.parentNode.id+"DataExpire",H.clearTimers(n),d.each(this.datalists,function(e){e.teardown()}),t=this.get(),d.each(t,function(t){v.expire(e+"/"+t.key,!0),O.remove(e+"/"+t.key),H.iterate(t.data,function(e,t){if(e===null)return;e.hasOwnProperty("data")&&typeof e.data.teardown=="function"&&(O.remove(e.id),e.data.teardown())})})),this.clear(!0),this.parentNode.fire("afterDataTeardown"),this},update:function(e,t){var n=this.get(e),r=this,i,s;if(n===undefined)throw Error(C.error.invalidArguments);return i=H.merge(n.data,t),s=M.factory(),this.set(e,i).then(function(e){s.resolve(e)},function(e){c(e,arguments,r)}),s}}};b.prototype=y.methods,b.prototype.constructor=b;var w={factory:function(e,t,n,r){var i=[t],s,o;if(e instanceof Element&&typeof t=="object"&&!!p.string_object.test(typeof n))return s=e.fire("beforeDataList").create("ul",{"class":"list",id:t.parentNode.id+"-datalist"}),o=new E(s,i[0],n),r instanceof Object&&H.merge(o,r),o.store.datalists.push(o),(o.store.uri===null||o.store.loaded)&&o.display(),e.fire("afterDataList",s),o;throw Error(C.error.invalidArguments)},methods:{del:function(e){typeof this.pageIndex=="number"&&typeof this.pageSize=="number"?this.refresh():(this.element.fire("beforeDataListRefresh"),this.element.find("> li[data-key='"+e.key+"']").destroy(),this.element.fire("afterDataListRefresh"))},display:function(){this.ready=!0,this.refresh(!0)},page:function(e){if(isNaN(e))throw Error(C.error.invalidArguments);return this.pageIndex=e,this.refresh(),this},pages:function(){var e=this.element,t=f("#"+e.id+"-pages-top, #"+e.id+"-pages-bottom"),n=this.pageIndex,r=this.pagination,i=this.pageRange,s=A.round(A.half(i),"down"),o=n-s,u=n+s,a=this,l=w.pages.call(this),c=0,h,v,m;if(!p.top_bottom.test(r))throw Error(C.error.invalidArguments);return d.each(t,function(e){e!==undefined&&e.destroy()}),this.total===0||l===1?this:(o<1&&(h=o.diff(1),o+=h,u+=h),u>l&&(u=l,o=u-i+1,o<1&&(o=1)),d.each(P.explode(r),function(r){var i=!1,s=n>1,f=n+1<=l,c=!(n<l);t=e[r==="bottom"?"after":"before"]("ul",{"class":"list pages "+r,id:e.id+"-pages-"+r}),t.create("li").create(s?"a":"span",{"class":"first page","data-page":1}).html("&lt;&lt;"),t.create("li").create(s?"a":"span",{"class":"prev page","data-page":n-1}).html("&lt;");for(r=o;r<=u;r++)i=r===n,t.create("li").create(i?"span":"a",{"class":i?"current page":"page","data-page":r}).html(r);t.create("li").create(f?"a":"span",{"class":"next page","data-page":f?n+1:null}).html("&gt;"),t.create("li").create(c?"span":"a",{"class":"last page","data-page":c?null:l}).html("&gt;&gt;"),t.find("a.page").on("click",function(e){H.stop(e),a.page(this.data("page")),window.scrollTo(0,0)},"pagination")}),this)},refresh:function(e){e=e!==!1;var t=this.element,n=typeof this.template=="object",r=!n&&String(this.template).replace(/\{\{|\}\}/g,"")===this.store.key,i=[],s=[],o=this,u=typeof this.callback=="function",a=new RegExp,l=[],c=[],h,v,m;this.element.fire("beforeDataListRefresh"),this.refreshing=!0,n?h=function(e){var t=N.encode(o.template),n=d.unique(t.match(/\{\{[\w\.]+\}\}/g));return t=t.replace("{{"+o.store.key+"}}",e.key),d.each(n,function(n){var r=n.replace(/\{\{|\}\}/g,""),i=H.walk(e.data,r);a.compile(n,"g"),t=t.replace(a,N.encode(i).replace(/(^")|("$)/g,""))}),t=N.decode(t.replace(/\{\{.*\}\}/g,o.placeholder)),{li:t}}:h=function(e){var t=o.template,n=d.unique(t.match(/\{\{[\w\.]+\}\}/g));return t=t.replace("{{"+o.store.key+"}}",e.key),d.each(n,function(n){var r=n.replace(/\{\{|\}\}/g,""),i=H.walk(e.data,r);a.compile(n,"g"),t=t.replace(a,i)}),t=t.replace(/\{\{.*\}\}/g,o.placeholder),{li:t}},this.where===null?i=this.order.isEmpty()?this.store.get():this.store.sort(this.order,!1,this.sensitivity):i=this.order.isEmpty()?this.store.select(this.where):this.store.sort(this.order,!1,this.sensitivity,this.where),d.each(i,function(e){o.filter!==null&&o.filter instanceof Object?H.iterate(o.filter,function(t,n){if(l.index(e.key)>-1)return;var r=0,i=new RegExp,u;t=P.explode(t),u=t.length;for(r=0;r<u;r++){i.compile(t[r],"i");if(n===o.store.key&&i.test(e.key)||e.data[n]!==undefined&&i.test(e.data[n])){l.push(e.key),s.push({key:e.key,template:h(e)});return}}}):s.push({key:e.key,template:h(e)})}),this.total=s.length;if(this.total>0){if(typeof this.pageIndex=="number"&&typeof this.pageSize=="number"){m=w.pages.call(this);if(m>0&&this.pageIndex>m)return this.page(m);c=w.range.call(this),s=s.limit(c[0],c[1])}e?(t.clear(),d.each(s,function(e){var n=t.tpl(e.template);n.data("key",e.key),u&&o.callback(n)})):(t.find("> li").addClass("hidden"),d.each(s,function(e){t.find("> li[data-key='"+e.key+"']").removeClass("hidden")})),p.top_bottom.test(this.pagination)&&typeof this.pageIndex=="number"&&typeof this.pageSize=="number"?this.pages():(f("#"+this.element.id+"-pages-top, #"+this.element.id+"-pages-bottom"),v!==undefined&&v.destroy())}return this.refreshing=!1,this.element.fire("afterDataListRefresh",t),this},set:function(){this.refreshing||this.refresh()},sort:function(e,t){if(typeof e!="string")throw Error(C.error.invalidArguments);return this.element.fire("beforeDataListSort"),this.order=e,this.sensitivity=t||"ci",this.refresh(),this.element.fire("afterDataListSort"),this},teardown:function(e){e=e===!0;var t=this,n=this.element.id;return O.remove(n),d.each(f("#"+n+"-pages-top, #"+n+"-pages-bottom"),function(e){O.remove(e)}),d.each(this.store.datalists,function(e,n){if(e.id===t.id)return this.remove(n),!1}),e&&(S.destroy(this.element),this.element=null),this}},pages:function(){if(isNaN(this.pageSize))throw Error(C.error.invalidArguments);return A.round(this.total/this.pageSize,"up")},range:function(){var e=this.pageIndex*this.pageSize-this.pageSize,t=this.pageSize;return[e,t]}};E.prototype=w.methods,E.prototype.constructor=E;var S={attr:function(e,t,n){typeof n=="string"&&(n=P.trim(n));var r,i;e=H.object(e);if(e instanceof Element&&t!=undefined&&!String(t).isEmpty()){H.genId(e,!0);if(p.checked_disabled.test(t)&&n===undefined)return e[t];if(p.checked_disabled.test(t)&&n!==undefined)e[t]=n;else{if(e.nodeName==="SELECT"&&t==="selected"&&n===undefined)return f("#"+e.id+' option[selected="selected"]')[0]||f("#"+e.id+" option")[0];if(e.nodeName==="SELECT"&&t==="selected"&&n!==undefined)r=f("#"+e.id+' option[selected="selected"]')[0],r!==undefined&&(r.selected=!1,r.removeAttribute("selected")),r=f("#"+e.id+' option[value="'+n+'"]')[0],r.selected=!0,r.setAttribute("selected","selected");else{if(n===undefined)return i=e.getAttribute(t),i===null&&(i=undefined),i;n===null?e.removeAttribute(t):e.setAttribute(t,n)}}return e}throw Error(C.error.invalidArguments)},clear:function(e){e=H.object(e);if(e instanceof Element)return typeof e.reset=="function"?e.reset():e.value!==undefined?e.update({innerHTML:"",value:""}):e.update({innerHTML:""}),e;throw Error(C.error.invalidArguments)},create:function(e,n,r,i){if(e===undefined||String(e).isEmpty())throw Error(C.error.invalidArguments);var s,o,u;r!==undefined?r=H.object(r):n===undefined||typeof n!="string"&&n.childNodes===undefined?r=t.body:r=H.object(n);if(r===undefined)throw Error(C.error.invalidArguments);return u=!(r instanceof Element),o=n!==undefined&&typeof n!="string"&&n.childNodes===undefined&&n.id!==undefined&&f("#"+n.id)===undefined?n.id:H.genId(undefined,!0),n!==undefined&&n.id!==undefined&&delete n.id,s=p.svg.test(e)?t.createElementNS("http://www.w3.org/2000/svg","svg"):t.createElement(e),s.id=o,typeof n=="object"&&n.childNodes===undefined&&S.update(s,n),i===undefined||i==="last"?r.appendChild(s):i==="first"?r.prependChild(s):i==="after"?(i={},i.after=r,r=r.parentNode,r.insertBefore(s,i.after.nextSibling)):i.after!==undefined?r.insertBefore(s,i.after.nextSibling):i==="before"?(i={},i.before=r,r=r.parentNode,r.insertBefore(s,i.before)):i.before!==undefined?r.insertBefore(s,i.before):r.appendChild(s),s},css:function(e,t,n){e=H.object(e),t=P.toCamelCase(t);var r,i;return n!==undefined?(e.style[t]=n,i=e):i=e.style[t],i},data:function(e,t,n){var r;return e=H.object(e),n!==undefined?(typeof e.dataset=="object"?e.dataset[t]=n:S.attr(e,"data-"+t,n),r=e):r=H.coerce(typeof e.dataset=="object"?e.dataset[t]:S.attr(e,"data-"+t)),r},destroy:function(e){e=H.object(e);if(e instanceof Element)return O.fire(s,"beforeDestroy",e),O.remove(e.id),e.parentNode!==null&&e.parentNode.removeChild(e),O.fire(s,"afterDestroy",e.id),undefined;throw Error(C.error.invalidArguments)},disable:function(e){e=H.object(e);if(e instanceof Element)return typeof e.disabled=="boolean"&&!e.disabled&&(e.disabled=!0),e;throw Error(C.error.invalidArguments)},enable:function(e){e=H.object(e);if(e instanceof Element)return typeof e.disabled=="boolean"&&e.disabled&&(e.disabled=!1),e;throw Error(C.error.invalidArguments)},find:function(e,t){var n=[];e=H.object(e);if(e instanceof Element&&typeof t=="string")return H.genId(e,!0),d.each(P.explode(t),function(t){n=n.concat(f("#"+e.id+" "+t))}),n;throw Error(C.error.invalidArguments)},has:function(e,t){var n=S.find(e,t);return!isNaN(n.length)&&n.length>0},hasClass:function(e,t){e=H.object(e);if(e instanceof Element)return e.classList.contains(t);throw Error(C.error.invalidArguments)},hide:function(e){e=H.object(e);if(e instanceof Element)return typeof e.hidden=="boolean"?e.hidden=!0:(e["data-display"]=e.style.display,e.style.display="none"),e;throw Error(C.error.invalidArguments)},hidden:function(e){e=H.object(e);if(e instanceof Element)return e.style.display==="none"||typeof e.hidden=="boolean"&&e.hidden;throw Error(C.error.invalidArguments)},is:function(e,t){e=H.object(e);if(e instanceof Element&&typeof t=="string")return/^:/.test(t)?d.contains(S.find(e.parentNode,e.nodeName.toLowerCase()+t),e):(new RegExp(t,"i")).test(e.nodeName);throw Error(C.error.invalidArguments)},klass:function(e,t,n){var r;e=H.object(e);if(e instanceof Element&&!String(t).isEmpty())return n=n!==!1,t=P.explode(t," "),n?d.each(t,function(t){e.classList.add(t)}):d.each(t,function(t){if(t==="*")return d.each(e.classList,function(e){this.remove(e)}),!1;e.classList.remove(t)}),e;throw Error(C.error.invalidArguments)},position:function(n){n=H.object(n);if(n instanceof Element){var r,i,s,o;r=i=0,o=n.offsetWidth,s=n.offsetHeight;if(n.offsetParent){i=n.offsetTop,r=n.offsetLeft;while(n=n.offsetParent)r+=n.offsetLeft,i+=n.offsetTop}return{top:i,right:t.documentElement.clientWidth-(r+o),bottom:t.documentElement.clientHeight+e.scrollY-(i+s),left:r}}throw Error(C.error.invalidArguments)},prependChild:function(e,t){e=H.object(e);if(e instanceof Element&&t instanceof Element)return e.childNodes.length===0?e.appendChild(t):e.insertBefore(t,e.childNodes[0]);throw Error(C.error.invalidArguments)},serialize:function(e,t,n){e=H.object(e),t=t===!0,n=n!==!1;var r=[],i={},s;return e instanceof Array?d.each(e,function(e){r.push(H.object(e))}):r=e.nodeName==="FORM"?typeof e.elements!="undefined"?d.cast(e.elements):e.find("button, input, select, textarea"):[e],d.each(r,function(e){e.nodeName==="FORM"?H.merge(i,N.decode(S.serialize(e))):typeof i[e.name]=="undefined"&&(i[e.name]=S.val(e))}),t?(s="",H.iterate(i,function(e,t){n?s+="&"+encodeURIComponent(t)+"="+encodeURIComponent(e):s+="&"+t+"="+e,s=s.replace(/^&/,"?")})):s=N.encode(i),s},show:function(e){e=H.object(e);if(e instanceof Element)return typeof e.hidden=="boolean"?e.hidden=!1:e.style.display=e.getAttribute("data-display")!==null?e.getAttribute("data-display"):"inherit",e;throw Error(C.error.invalidArguments)},size:function(e){e=H.object(e);var t,n,r;if(e instanceof Element)return t=function(e){return isNaN(e)?0:parseInt(e)},n=e.offsetHeight+t(e.style.paddingTop)+t(e.style.paddingBottom)+t(e.style.borderTop)+t(e.style.borderBottom),r=e.offsetWidth+t(e.style.paddingLeft)+t(e.style.paddingRight)+t(e.style.borderLeft)+t(e.style.borderRight),{height:n,width:r};throw Error(C.error.invalidArguments)},text:function(e,t){e=H.object(e);if(e instanceof Element){var n=e.textContent!==undefined?"textContent":"innerText",r={},i=!1;return typeof t!="undefined"&&(i=!0,r[n]=t),i?S.update(e,r):e[n]}throw Error(C.error.invalidArguments)},toggleClass:function(e,t){e=H.object(e);if(e instanceof Element)return e.classList.toggle(t),e;throw Error(C.error.invalidArguments)},update:function(e,t){e=H.object(e),t=t||{};if(e instanceof Element)return H.iterate(t,function(t,n){if(p.element_update.test(n))e[n]=t;else if(n==="class")t.isEmpty()?e.removeClass("*"):e.addClass(t);else if(n.indexOf("data-")===0)S.data(e,n.replace("data-",""),t);else if(n==="id"){var r=O.listeners;r[e.id]!==undefined&&(r[n]=H.clone(r[e.id]),delete r[e.id])}else e.attr(n,t)}),e;throw Error(C.error.invalidArguments)},val:function(e,t){var n=null,r;e=H.object(e);if(e instanceof Element){if(t===undefined){if(p.radio_checkbox.test(e.type)){if(e.name.isEmpty())throw Error(C.error.expectedProperty);r=f("input[name='"+e.name+"']"),d.each(r,function(e){if(n!==null)return;e.checked&&(n=e.value)})}else p.select.test(e.type)?n=e.options[e.selectedIndex].value:n=typeof e.value!="undefined"?e.value:S.text(e);typeof n=="string"&&(n=P.trim(n))}else t=String(t),e.fire("beforeValue"),p.radio_checkbox.test(e.type)?(r=f("input[name='"+e.name+"']"),d.each(r,function(e){if(e.value===t)return e.checked=!0,n=e,!1})):p.select.test(e.type)?d.each(S.find(e,"> *"),function(e){if(e.value===t)return e.selected=!0,n=e,!1}):e.value!==undefined?e.value=t:S.text(e,t),e.fire("afterValue"),n=e;return n}throw Error(C.error.invalidArguments)}},x={factory:function(e,t,n,r){r=r||250;var i=[t],s;if(!(e instanceof Element)||t!==undefined&&t.store===undefined||typeof n!="string"||String(n).isEmpty())throw Error(C.error.invalidArguments);return s=new T(e,i[0],n,r),s},methods:{init:function(){return O.add(this.element,"keyup",this.update,"filter",this),O.add(this.element,"afterValue",this.update,"value",this),this},set:function(e){var t={};if(typeof e!="string"||String(e).isEmpty())throw Error(C.error.invalidArguments);return d.each(P.explode(e),function(e){t[e]=""}),this.filters=t,this},teardown:function(){return O.remove(this.element,"keyup","filter"),O.remove(this.element,"afterValue","value"),this},update:function(e){var t=this;return H.clearTimers(this.element.id+"Debounce"),H.defer(function(){var e=t.element.val();e.isEmpty()?t.datalist.filter=null:(H.iterate(t.filters,function(t,n){this[n]="^"+e.escape().replace("\\*",".*")}),t.datalist.filter=t.filters),t.datalist.pageIndex=1,t.datalist.refresh()},this.debounce,this.element.id+"Debounce"),this}}};T.prototype=x.methods,T.prototype.constructor=T;var N={decode:function(e,t){try{return JSON.parse(e)}catch(n){return t!==!0&&c(n,arguments,this),undefined}},encode:function(e,t){try{return JSON.stringify(e)}catch(n){return t!==!0&&c(n,arguments,this),undefined}}},C={common:{back:"Back",cancel:"Cancel",clear:"Clear",close:"Close",cont:"Continue",create:"Create",del:"Delete",edit:"Edit",find:"Find",gen:"Generate",go:"Go",loading:"Loading",next:"Next",login:"Login",ran:"Random",reset:"Reset",save:"Save",search:"Search",submit:"Submit"},day:{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},error:{databaseNotOpen:"Failed to open the Database, possibly exceeded Domain quota",databaseNotSupported:"Client does not support local database storage",databaseWarnInjection:"Possible SQL injection in database transaction, use the &#63; placeholder",elementNotCreated:"Could not create the Element",elementNotFound:"Could not find the Element",expectedArray:"Expected an Array",expectedArrayObject:"Expected an Array or Object",expectedBoolean:"Expected a Boolean value",expectedNumber:"Expected a Number",expectedProperty:"Expected a property, and it was not set",expectedObject:"Expected an Object",invalidArguments:"One or more arguments is invalid",invalidDate:"Invalid Date",invalidFields:"The following required fields are invalid: ",invalidRoute:"The route could not be found",invalidStateNoHeaders:"INVALID_STATE_ERR: Headers have not been received",invalidStateNoSync:"Synchronous XMLHttpRequest requests are not supported",invalidStateNotOpen:"INVALID_STATE_ERR: Object is not open",invalidStateNotSending:"INVALID_STATE_ERR: Object is sending",invalidStateNotUsable:"INVALID_STATE_ERR: Object is not usable",notAvailable:"Requested method is not available",notSupported:"This feature is not supported by this platform",propertyNotFound:"Could not find the requested property",promisePending:"The promise cannot be resolved while pending result",promiseResolved:"The promise has been resolved: {{outcome}}",serverError:"Server error has occurred",serverForbidden:"Forbidden to access URI",serverInvalidMethod:"Method not allowed",serverUnauthorized:"Authorization required to access URI",upgrade:"Your browser is too old to use abaaso, please upgrade"},month:{0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"}},k={clear:function(t){return t=t||"all",O.remove(e,"message","message",t)},send:function(e,t){try{e.postMessage(t,"*")}catch(n){c(n,arguments,this)}return e},recv:function(t,n){return n=n||"all",O.add(e,"message",t,"message",e,n)}},L={enabled:!1,log:!1,diff:{x:null,y:null},pos:{x:null,y:null},prev:{x:null,y:null},track:function(e){var n=s.mouse,e="mousemove",r="tracking";if(!i)if(typeof e=="object"){var o=t[m.ie&&m.version<9?"documentElement":"body"],u=e.pageX?e.pageX:o.scrollLeft+e.clientX,a=e.pageY?e.pageY:o.scrollTop+e.clientY,l=!1;n.pos.x!==u&&(l=!0),f.mouse.prev.x=n.prev.x=Number(n.pos.x),f.mouse.pos.x=n.pos.x=u,f.mouse.diff.x=n.diff.x=n.pos.x-n.prev.x,n.pos.y!==a&&(l=!0),f.mouse.prev.y=n.prev.y=Number(n.pos.y),f.mouse.pos.y=n.pos.y=a,f.mouse.diff.y=n.diff.y=n.pos.y-n.prev.y,l&&n.log&&H.log(n.pos.x+" ["+n.diff.x+"], "+n.pos.y+" ["+n.diff.y+"]")}else typeof e=="boolean"&&(e?O.add(t,e,s.mouse.track,r):O.remove(t,e,r),f.mouse.enabled=n.enabled=e);return n}},A={diff:function(e,t){if(isNaN(e)||isNaN(t))throw Error(C.error.expectedNumber);return Math.abs(e-t)},even:function(e){return e%2===0},format:function(e,t,n){if(isNaN(e))throw Error(C.error.expectedNumber);e=e.toString(),t=t||",",n=n||3;var r=e.indexOf(".")>-1?"."+e.replace(p.number_format_1,""):"",i=e.replace(p.number_format_2,"").split("").reverse(),s=Math.floor(i.length/n),o=1,u,a;for(a=0;a<s;a++)u=o===1?n:n*o+(o===2?1:o-1),i.splice(u,0,t),o++;return i=i.reverse().join(""),i.charAt(0)===t&&(i=i.substring(1)),i+r},half:function(e,t){return t!==undefined?e/t===.5:e/2},odd:function(e){return e%2!==0},parse:function(e,t){return t===null&&(t=undefined),isNaN(t)?Number(e):parseInt(e,t)},random:function(e){return e=e||100,Math.floor(Math.random()*(e+1))},round:function(e,t){return p.down_up.test(t)||(t="down"),Math[t==="down"?"floor":"ceil"](e)}},O={listeners:{},alisteners:{},elisteners:{},clisteners:{},log:!1,queue:[],silent:!1,ignore:!1,add:function(e,t,n,r,i,o){e=H.object(e),i=i||e,o=o||s.state.current;if(e instanceof Array)return d.each(e,function(e){O.add(e,t,n,r,i,o)});t!==undefined&&(t=P.explode(t)),r=r||H.genId();var u=null,a=O.listeners,f=O.alisteners,l=O.elisteners,c=O.clisteners,h=p.observer_globals,v=p.observer_allowed,m=O.id(e),g=!1,y=s.state.current,b,w;if(m===undefined||t===null||t===undefined||typeof n!="function")throw Error(C.error.invalidArguments);return a[m]===undefined&&(a[m]={},f[m]={},c[m]={}),d.each(t,function(t){var s=m+"_"+t;a[m][t]===undefined&&(a[m][t]={},f[m][t]={},c[m][t]=0),a[m][t][o]===undefined&&(a[m][t][o]={},f[m][t][o]=[]),u=h.test(m)||!/\//g.test(m)&&m!=="abaaso"?e:null,u!==null&&u!==undefined&&t.toLowerCase()!=="afterjsonp"&&l[s]===undefined&&(h.test(m)||typeof u.listeners=="function")&&(b=typeof u.addEventListener=="function",w=typeof u.attachEvent=="object"||b,w&&(l[s]=function(n){v.test(n.type)||H.stop(n),O.fire(e,t,n)},u[b?"addEventListener":"attachEvent"]((b?"":"on")+t,l[s],!1))),a[m][t][o][r]={fn:n,scope:i},O.sync(m,t,o),c[m][t]++}),e},decorate:function(e){var t=[["fire",function(){return O.fire.apply(O,[this].concat(d.cast(arguments)))}],["listeners",function(e){return O.list(this,e)}],["on",function(e,t,n,r,i){return O.add(this,e,t,n,r,i)}],["once",function(e,t,n,r,i){return O.once(this,e,t,n,r,i)}],["un",function(e,t){return O.remove(this,e,t)}]];return d.each(t,function(t){H.property(e,t[0],{value:t[1],configurable:!0,enumerable:!0,writable:!0})}),e},discard:function(e){return e===undefined?O.ignore:O.ignore=e===!0},fire:function(e,t){e=H.object(e);var n=!1,r=d.cast(arguments).remove(0,1),i,r,o,u,a,l,c;if(O.ignore)return e;if(e instanceof Array)return d.each(e,function(e){r=[e,t].concat(r),O.fire.apply(O,r)}),e;i=O.id(e);if(i===undefined||t===undefined)throw Error(C.error.invalidArguments);return O.silent?O.queue.push({obj:e,event:t}):(o=s.state.current,u=f.logging||s.logging,d.each(P.explode(t),function(t){u&&H.log(i+" firing "+t),c=O.list(e,t,O.alisteners),c.all!==undefined&&d.each(c.all,function(e){var t=e.fn.apply(e.scope,r);if(t===!1)return n=!0,t}),!n&&o!=="all"&&c[o]!==undefined&&d.each(c[o],function(e){return e.fn.apply(e.scope,r)})})),e},id:function(n){var r;return n===s?r="abaaso":n===e?r="window":n===!i&&t?r="document":n===!i&&t.body?r="body":(H.genId(n),r=n.id||(typeof n.toString=="function"?n.toString():n)),r},list:function(e,t,n){e=H.object(e);var r=n||O.listeners,i=O.id(e),s;return r[i]===undefined&&t===undefined?s={}:r[i]===undefined||t!==undefined&&!String(t).isEmpty()?r[i]!==undefined&&r[i][t]!==undefined?s=r[i][t]:s={}:s=r[i],s},once:function(e,t,n,r,i,o){var u=r||H.genId();e=H.object(e),i=i||e,o=o||s.state.current;if(e===undefined||t===null||t===undefined||typeof n!="function")throw Error(C.error.invalidArguments);return e instanceof Array?(d.each(e,function(e){O.once(e,t,n,r,i,o)}),e):(O.add(e,t,function(){n.apply(i,arguments),O.remove(e,t,u,o)},u,i,o),e)},pause:function(e){return e===!0?O.silent=e:e===!1&&(O.silent=e,d.each(O.queue,function(e){O.fire(e.obj,e.event)}),O.queue=[]),e},remove:function(e,t,n,r){e=H.object(e),r=r||s.state.current;if(e instanceof Array)return d.each(e,function(e){O.remove(e,t,n,r)});var i=null,o=O.listeners,u=O.alisteners,a=O.elisteners,f=O.clisteners,l=O.id(e),c=typeof e.addEventListener=="function",h=typeof e.attachEvent=="object"||c,v;return v=function(t,n){var r=typeof n=="number"&&(f[l][t]=f[l][t]-n)===0;r&&h&&(e[c?"removeEventListener":"detachEvent"]((c?"":"on")+t,a[l+"_"+t],!1),delete a[l+"_"+t])},l===undefined||o[l]===undefined?e:(t===undefined||t===null?((p.observer_globals.test(l)||typeof l.listeners=="function")&&H.iterate(a,function(e,t){t.indexOf(l+"_")===0&&v(t.replace(/.*_/,""),1)}),delete o[l],delete u[l],delete f[l]):d.each(P.explode(t),function(t){var i=!1;if(o[l][t]===undefined)return e;n===undefined?((p.observer_globals.test(l)||typeof l.listeners=="function")&&v(t,d.keys(o[l][t][r]).length),o[l][t][r]={},i=!0):o[l][t][r][n]!==undefined&&(v(t,1),delete o[l][t][r][n],i=!0),i&&O.sync(l,t,r)}),e)},sum:function(e){var t={},n;return e!==undefined?(e=H.object(e),n=O.id(e),t=H.clone(O.clisteners[n])):t=H.clone(O.clisteners),t},sync:function(e,t,n){O.alisteners[e][t][n]=d.cast(O.listeners[e][t][n])}},M={factory:function(){return new _},freeze:function(){return typeof Object.freeze=="function"}(),methods:{reject:function(e){var t=this;return H.defer(function(){M.resolve.call(t,M.state.broken,e)}),this},resolve:function(e){var t=this;return H.defer(function(){M.resolve.call(t,M.state.resolved,e)}),this},resolved:function(){return this.state===M.state.broken||this.state===M.state.resolved},then:function(e,t){var n=this,r=M.factory(),i;return i=function(i){var s=i?e:t,o=i?!1:!0,u;try{u=s(n.outcome),o=!1}catch(a){u=a,o=!0,u!==undefined&&!(u instanceof Error)&&(typeof u=="object"&&(u=N.encode(u)),u=Error(u))}finally{if(u instanceof _)n.state=M.state.pending,n.outcome=null,u.parentNode=n,u.then(function(e){n.resolve(e)},function(e){n.reject(e)});else{if(o&&u===undefined)throw Error(C.error.invalidArguments);r[o?"reject":"resolve"](u||n.outcome)}return u}},typeof e=="function"&&M.vouch.call(this,M.state.resolved,function(){return i(!0)}),typeof t=="function"&&M.vouch.call(this,M.state.broken,function(){return i(!1)}),r.parentNode=n,r}},resolve:function(e,t){var n=e===M.state.broken?"error":"fulfill",r=this,i=!1,s=!1,o=[],u,a,f;if(this.state!==M.state.pending)throw Error(C.error.promiseResolved.replace("{{outcome}}",this.outcome));this.state=e,this.outcome=t,d.each(this[n],function(n,u){f=n.call(r,t),o.push(u);if(f instanceof _)return i=!0,r.outcome=null,r.state=M.state.pending,!1;f instanceof Error&&(s=!0,a=f,e=M.state.broken)});if(!i)return this.error=[],this.fulfill=[],s||(f=a,e=M.state.resolved),this.parentNode!==null&&this.parentNode.state===M.state.pending&&this.parentNode[e===M.state.resolved?"resolve":"reject"](f||this.outcome),M.freeze&&Object.freeze(this),this;u=o.length;while(u--)d.remove(r[n],o[u]);return f},state:{broken:"rejected",pending:"pending",resolved:"fulfilled"},vouch:function(e,t){if(String(e).isEmpty())throw Error(C.error.invalidArguments);return this.state===M.state.pending?this[e===M.state.resolved?"fulfill":"error"].push(t):this.state===e&&t(this.outcome),this}};_.prototype=M.methods,_.prototype.constructor=_;var D={current:"",reg:new RegExp,routes:{},method:function(e){return p.route_methods.test(e)?e.toLowerCase():"all"},del:function(e,t,n){n=n||"all",t=D.method(t);var r=e==="error";if(r&&t!=="all"||!r&&D.routes[n][t].hasOwnProperty(e))return s.route.initial===e&&(s.route.initial=null),delete D.routes[n][t][e];throw Error(C.error.invalidArguments)},hash:function(e){var n="",r=/\#|\!\/|\?.*/g;return i||(e===undefined?n=t.location.hash.replace(r,""):(n=e.replace(r,""),t.location.hash="!/"+n)),n},hostname:function(e){return D.routes.hasOwnProperty(e)||(D.routes[e]={all:{},"delete":{},get:{},post:{},put:{}}),D.routes[e]},init:function(){var e=t.location.hash;e.isEmpty()?D.hash(s.route.initial!==null?s.route.initial:d.cast(D.routes.all.all,!0).remove("error")[0]):D.load(e)},list:function(e,t){t=t||"all";var n;return i?e!==undefined&&D.routes.hasOwnProperty(t)?n=d.cast(D.routes[t][D.method(e)],!0):(n=[],D.routes.hasOwnProperty(t)&&H.iterate(D.routes[t],function(e,t){n[t]=[],H.iterate(e,function(e,r){n[t].push(r)})})):n=d.cast(D.routes.all.all,!0),!i&&t!=="all"&&H.iterate(D.routes.all,function(e,t){n[t]===undefined&&(n[t]=[]),H.iterate(e,function(e,r){n[t].push(r)})}),n},load:function(e,t,n,r){n=n||"all",r=r||"all";var o="",u="",a=!0,f=!1,l=D.method(n.method||n),c,h;return p.route_nget.test(l)&&(l="get"),e=e.replace(/\#|\!\/|\?.*/g,""),i||(s.route.current=e),c=function(e,t,n){D.routes[e][t][n]!==undefined?(o=n,u=t):t!=="all"&&D.routes[e].all[n]!==undefined?(o=n,u="all"):(H.iterate(D.routes[e][t],function(e,r){return h(r,t,n)}),o.isEmpty()&&t!=="all"&&H.iterate(D.routes[e].all,function(e,t){return h(t,"all",n)}))},h=function(e,t,n){if(H.compile(D.reg,"^"+e+"$")&&D.reg.test(n))return o=e,u=t,!1},r!=="all"&&!D.routes.hasOwnProperty(r)&&(d.each(d.cast(D.routes,!0),function(e){var t=new RegExp(e.replace(/^\*/,".*"));if(t.test(r))return r=e,f=!0,!1}),f||(r="all")),c(r,l,e),o.isEmpty()&&(r!=="all"&&(r="all",c(r,l,e)),o.isEmpty()&&(o="error",u="all",a=!1)),D.routes[r][u][o](t||o,n),a},reset:function(){D.routes={all:{all:{error:function(){if(!!i)throw Error(C.error.invalidRoute);if(D.hash()==="")return history.go(-1);H.error(C.error.invalidRoute),s.route.initial!==null&&D.hash(s.route.initial)}},"delete":{},get:{},put:{},post:{}}}},server:function(e,t,n){var r,l,h;if(!i)return null;e=e||{},n=n===!0||e.port===443,r=function(e,t){var n=a.parse(e.url),r=e.headers.host.replace(p.header_replace,"");D.load(n.pathname,t,e,r)},l=function(e){c(e,this,arguments),typeof t=="function"&&t(e)};if(!i)throw Error(C.error.notSupported);return f.route.enabled=s.route.enabled=!0,e.host=e.host||undefined,e.port=parseInt(e.port)||8e3,h=n?u.createServer(e,r).on("error",l).listen(e.port):o.createServer(r).on("error",l).listen(e.port,e.host),h},set:function(e,t,n,r){r=i?r||"all":"all",n=i?D.method(n):"all";if(typeof e!="string"||e.isEmpty()||typeof t!="function")throw Error(C.error.invalidArguments);return D.hostname(r)[n][e]=t,!0}},P={capitalize:function(e){return e=P.trim(e),e.charAt(0).toUpperCase()+e.slice(1)},escape:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},explode:function(e,t){if(t===undefined||t.toString()==="")t=",";return P.trim(e).split(new RegExp("\\s*"+t+"\\s*"))},hyphenate:function(e,t){var n;return t=t===!0,n=P.trim(e).replace(/\s+/g,"-"),t&&(n=n.replace(/([A-Z])/g,"-$1").toLowerCase()),n},singular:function(e){return p.plural.test(e)?e.slice(0,-1):e},toCamelCase:function(e){var t=P.trim(e).toLowerCase().split(p.space_hyphen),n=[];return d.each(t,function(e,t){e=P.trim(e);if(e.isEmpty())return;n.push(t===0?e:P.capitalize(e))}),n.join("")},trim:function(e){return e.replace(/^(\s+|\t+)|(\s+|\t+)$/g,"")},uncapitalize:function(e){return e=P.trim(e),e.charAt(0).toLowerCase()+e.slice(1)},unhyphenate:function(e,t){t=t===!0;var n="";return e.indexOf("-")>-1?d.each(P.trim(e).split("-"),function(e){n+=(t?e.capitalize():e)+" "}):n=t?P.capitalize(e):e,P.trim(n)}},H={timer:{},$:function(e,n){if(i||e===undefined)return undefined;var r=[],s=[],o=[];return r=P.explode(e),n=n===!0,d.each(r,function(e){var r,i;p.selector_complex.test(e)?(i=d.last(e.split(" ").filter(function(e){if(!e.isEmpty()&&e!==">")return!0})),p.hash.test(i)&&!p.selector_many.test(i)?r=t.querySelector(e):(r=t.querySelectorAll(e),n||(r=d.cast(r)))):p.hash.test(e)&&!p.selector_many.test(e)?r=t.querySelector(e):(r=t.querySelectorAll(e),n||(r=d.cast(r))),r!==null&&o.push(r)}),d.each(o,function(e){s=s.concat(e)}),p.hash.test(e)&&!p.selector_many.test(e)&&!p.selector_complex.test(e)&&(s=s[0]),s},alias:function(e,t){var n=e,r=t;return H.iterate(r,function(e,t){var i,s;e instanceof RegExp||typeof e!="function"?e instanceof RegExp||e instanceof Array||!(e instanceof Object)?(i=function(){return r[t]},s=function(e){r[t]=e},H.property(n,t,{enumerable:!0,get:i,set:s,value:r[t]})):(n[t]===undefined&&(n[t]={}),H.alias(n[t],r[t])):n[t]=e.bind(n[t])}),e},clearTimers:function(e){if(e===undefined||String(e).isEmpty())throw Error(C.error.invalidArguments);H.timer[e]!==undefined&&(clearTimeout(H.timer[e]),delete H.timer[e]),f.repeating[e]!==undefined&&(clearTimeout(f.repeating[e]),delete f.repeating[e])},clone:function(e){var t;return e instanceof Array?[].concat(e):typeof e=="boolean"?Boolean(e):typeof e=="function"?e:typeof e=="number"?Number(e):typeof e=="string"?String(e):!m.ie&&!i&&e instanceof Document?F.decode(F.encode(e)):e instanceof Object?(t=N.encode(e,!0),t!==undefined?(t=N.decode(t),H.iterate(e,function(e,n){typeof e=="function"&&(t[n]=e)})):t=e,t):e},coerce:function(e){var t=H.clone(e),n;return isNaN(A.parse(t))?p.string_boolean.test(t)?t=p.string_true.test(t):t==="undefined"?t=undefined:t==="null"?t=null:(n=N.decode(t,!0))&&n!==undefined&&(t=n):t=A.parse(t),t},compile:function(e,t,n){return e.compile(t,n),!0},css:function(e,n){var r,i;return r=f("head")[0].create("style",{type:"text/css",media:n||"print, screen"}),r.styleSheet?r.styleSheet.cssText=e:(i=t.createTextNode(e),r.appendChild(i)),r},debounce:function(t,n,r){if(typeof t!="function")throw Error(C.error.invalidArguments);return n=n||1e3,r=r||e,function(){H.defer(function(){t.apply(r,arguments)},n)}},define:function(e,t,n){e=e.split(".");var r=n,i=e.length;return n===undefined&&(n=this===f?s:this),t===undefined&&(t=null),d.each(e,function(n,s){var o=s+1<i&&!isNaN(parseInt(e[s+1])),u=t;isNaN(parseInt(n))||(n=parseInt(n)),r[n]===undefined?r[n]=o?[]:{}:r[n]instanceof Object&&o?r[n]=d.cast(r[n]):r[n]instanceof Object?void 0:r[n]instanceof Array&&!o?r[n]=r[n].toObject():r[n]={},s+1===i?r[n]=u:r=r[n]}),n},defer:function(e,t,n){var r;return t=t||0,n=n||H.uuid(!0),r=function(){H.clearTimers(n),e()},H.clearTimers(n),H.timer[n]=setTimeout(r,t),n},domId:function(e){return"a"+e.replace(/-/g,"").slice(1)},error:function(e,t,n,r){var i;return r=r===!0,i={arguments:t,message:e.message||e,number:e.number!==undefined?e.number&65535:undefined,scope:n,stack:e.stack||undefined,timestamp:(new Date).toUTCString(),type:e.type||"TypeError"},H.log(i.stack||i.message,r?"warn":"error"),f.error.log.push(i),O.fire(s,"error",i),undefined},extend:function(e,t){var n,r;if(e===undefined)throw Error(C.error.invalidArguments);return t===undefined&&(t={}),typeof Object.create=="function"?n=Object.create(e):(r=function(){},r.prototype=e,n=new r),H.merge(n,t),n},genId:function(e,t){t=t===!0;var n;if(e!==undefined&&(e.id!==undefined&&e.id!==""||e instanceof Array||e instanceof String||typeof e=="string"))return e;if(t){do n=H.domId(H.uuid(!0));while(f("#"+n)!==undefined)}else n=H.domId(H.uuid(!0));return typeof e=="object"?(e.id=n,e):n},iterate:function(e,t){var n=Object.prototype.hasOwnProperty,r,i;if(typeof t!="function")throw Error(C.error.invalidArguments);for(r in e){if(!n.call(e,r))break;i=t.call(e,e[r],r);if(i===!1)break}return e},loading:function(e){var t=s.loading;e=H.object(e);if(e instanceof Array)return d.each(e,function(e){H.loading(e)});if(t.url===null)throw Error(C.error.elementNotFound);if(e===undefined)throw Error(C.error.invalidArguments);return t.image===undefined&&(t.image=new Image,t.image.src=t.url),e.clear(),e.create("div",{"class":"loading"}).create("img",{alt:C.common.loading,src:t.image.src}),e},log:function(e,t){var n,r;typeof console!="undefined"&&(n=typeof e!="object",r=n?"["+(new Date).toLocaleTimeString()+"] "+e:e,console[t||"log"](r))},merge:function(e,t){return H.iterate(t,function(t,n){e[n]=H.clone(t)}),e},module:function(e,t){if(f[e]!==undefined||s[e]!==undefined||!t instanceof Object)throw Error(C.error.invalidArguments);return s[e]=t,typeof t=="function"?f[e]=!m.ie||m.version>8?s[e].bind(f[e]):s[e]:(f[e]={},H.alias(f[e],s[e])),f[e]},object:function(e){return typeof e=="object"?e:e.toString().charAt(0)==="#"?f(e):e},parse:function(e){var r={},s={};return i?r=a.parse(e):(r=t.createElement("a"),r.href=e),s={protocol:r.protocol,hostname:r.hostname,port:String(r.port).isEmpty()?"":parseInt(r.port),pathname:r.pathname,search:r.search,hash:r.hash,host:r.host},m.ie&&(s.protocol===":"&&(s.protocol=n.protocol),s.hostname.isEmpty()&&(s.hostname=n.hostname),s.host.isEmpty()&&(s.host=n.host),s.pathname.charAt(0)!=="/"&&(s.pathname="/"+s.pathname)),s},property:function(e,t,n){var r;if(n instanceof Object)return r=(!m.ie||m.version>8)&&typeof Object.defineProperty=="function",r&&n.value!==undefined&&n.get!==undefined&&delete n.value,r?Object.defineProperty(e,t,n):e[t]=n.value,e;throw Error(C.error.invalidArguments)},proto:function(e,t){var n,r={array:{add:function(e){return d.add(this,e)},addClass:function(e){return d.each(this,function(t){t.addClass(e)})},after:function(e,t){var n=[];return d.each(this,function(r){n.push(r.after(e,t))}),n},append:function(e,t){var n=[];return d.each(this,function(r){n.push(r.append(e,t))}),n},attr:function(e,t){var n=[];return d.each(this,function(r){n.push(r.attr(e,t))}),n},before:function(e,t){var n=[];return d.each(this,function(r){n.push(r.before(e,t))}),n},chunk:function(e){return d.chunk(this,e)},clear:function(){return!i&&this[0]instanceof Element?d.each(this,function(e){e.clear()}):d.clear(this)},clone:function(){return H.clone(this)},collect:function(e){return d.collect(this,e)},compact:function(){return d.compact(this)},contains:function(e){return d.contains(this,e)},create:function(e,t,n){var r=[];return d.each(this,function(i){r.push(i.create(e,t,n))}),r},css:function(e,t){return d.each(this,function(n){n.css(e,t)})},data:function(e,t){var n=[];return d.each(this,function(r){n.push(r.data(e,t))}),n},diff:function(e){return d.diff(this,e)},disable:function(){return d.each(this,function(e){e.disable()})},destroy:function(){return d.each(this,function(e){e.destroy()}),[]},each:function(e){return d.each(this,e)},empty:function(){return d.empty(this)},enable:function(){return d.each(this,function(e){e.enable()})},equal:function(e){return d.equal(this,e)},fill:function(e,t,n){return d.fill(this,e,t,n)},find:function(e){var t=[];return d.each(this,function(n){n.find(e).each(function(e){d.contains(t,e)||t.push(e)})}),t},fire:function(){var e=arguments;return d.each(this,function(t){O.fire.apply(O,e)})},first:function(){return d.first(this)},flat:function(){return d.flat(this)},genId:function(){return d.each(this,function(e){e.genId()})},get:function(e,t){return d.each(this,function(n){n.get(e,t)}),[]},has:function(e){var t=[];return d.each(this,function(n){t.push(n.has(e))}),t},hasClass:function(e){var t=[];return d.each(this,function(n){t.push(n.hasClass(e))}),t},hide:function(){return d.each(this,function(e){e.hide()})},html:function(e){if(e!==undefined)return d.each(this,function(t){t.html(e)});var t=[];return d.each(this,function(e){t.push(e.html())}),t},index:function(e){return d.index(this,e)},indexed:function(){return d.indexed(this)},intersect:function(e){return d.intersect(this,e)},is:function(e){var t=[];return d.each(this,function(n){t.push(n.is(e))}),t},isAlphaNum:function(){var e=[];return d.each(this,function(t){e.push(t.isAlphaNum())}),e},isBoolean:function(){var e=[];return d.each(this,function(t){e.push(t.isBoolean())}),e},isChecked:function(){var e=[];return d.each(this,function(t){e.push(t.isChecked())}),e},isDate:function(){var e=[];return d.each(this,function(t){e.push(t.isDate())}),e},isDisabled:function(){var e=[];return d.each(this,function(t){e.push(t.isDisabled())}),e},isDomain:function(){var e=[];return d.each(this,function(t){e.push(t.isDomain())}),e},isEmail:function(){var e=[];return d.each(this,function(t){e.push(t.isEmail())}),e},isEmpty:function(){var e=[];return d.each(this,function(t){e.push(t.isEmpty())}),e},isHidden:function(){var e=[];return d.each(this,function(t){e.push(t.isHidden())}),e},isIP:function(){var e=[];return d.each(this,function(t){e.push(t.isIP())}),e},isInt:function(){var e=[];return d.each(this,function(t){e.push(t.isInt())}),e},isNumber:function(){var e=[];return d.each(this,function(t){e.push(t.isNumber())}),e},isPhone:function(){var e=[];return d.each(this,function(t){e.push(t.isPhone())}),e},isUrl:function(){var e=[];return d.each(this,function(t){e.push(t.isUrl())}),e},keep_if:function(e){return d.keep_if(this,e)},keys:function(){return d.keys(this)},last:function(e){return d.last(this,e)},limit:function(e,t){return d.limit(this,e,t)},listeners:function(e){var t=[];return d.each(this,function(n){t=t.concat(n.listeners(e))}),t},loading:function(){return d.each(this,function(e){e.loading()})},max:function(){return d.max(this)},mean:function(){return d.mean(this)},median:function(){return d.median(this)},merge:function(e){return d.merge(this,e)},min:function(){return d.min(this)},mode:function(){return d.mode(this)},on:function(e,t,n,r,i){return d.each(this,function(s){s.on(e,t,n,r||s,i)})},once:function(e,t,n,r,i){return d.each(this,function(s){s.once(e,t,n,r||s,i)})},position:function(){var e=[];return d.each(this,function(t){e.push(t.position())}),e},prepend:function(e,t){var n=[];return d.each(this,function(r){n.push(r.prepend(e,t))}),n},range:function(){return d.range(this)},rassoc:function(e){return d.rassoc(this,e)},reject:function(e){return d.reject(this,e)},remove:function(e,t){return d.remove(this,e,t)},remove_if:function(e){return d.remove_if(this,e)},remove_while:function(e){return d.remove_while(this,e)},removeClass:function(e){return d.each(this,function(t){t.removeClass(e)})},replace:function(e){return d.replace(this,e)},rest:function(e){return d.rest(this,e)},rindex:function(e){return d.rindex(this,e)},rotate:function(e){return d.rotate(this,e)},serialize:function(e,t){return S.serialize(this,e,t)},series:function(e,t,n){return d.series(e,t,n)},show:function(){return d.each(this,function(e){e.show()})},size:function(){var e=[];return d.each(this,function(t){e.push(t.size())}),e},split:function(e){return d.split(this,e)},sum:function(){return d.sum(this)},take:function(e){return d.take(this,e)},text:function(e){return d.each(this,function(t){typeof t!="object"&&(t=H.object(t)),typeof t.text=="function"&&t.text(e)})},tpl:function(e){return d.each(this,function(t){t.tpl(e)})},toggleClass:function(e){return d.each(this,function(t){t.toggleClass(e)})},total:function(){return d.total(this)},toObject:function(){return d.toObject(this)},un:function(e,t,n){return d.each(this,function(r){r.un(e,t,n)})},unique:function(){return d.unique(this)},update:function(e){return d.each(this,function(t){S.update(t,e)})},val:function(e){var t=[],n=null,r=!0;return d.each(this,function(i){n!==null&&(r=n===i.type),n=i.type,typeof i.val=="function"&&t.push(i.val(e))}),r?t[0]:t},validate:function(){var e=[];return d.each(this,function(t){e.push(t.validate())}),e},zip:function(){return d.zip(this,arguments)}},element:{addClass:function(e){return S.klass(this,e,!0)},after:function(e,t){return S.create(e,t,this,"after")},append:function(e,t){return S.create(e,t,this,"last")},attr:function(e,t){return S.attr(this,e,t)},before:function(e,t){return S.create(e,t,this,"before")},clear:function(){return S.clear(this)},create:function(e,t,n){return S.create(e,t,this,n)},css:function(e,t){return S.css(this,e,t)},data:function(e,t){return S.data(this,e,t)},destroy:function(){return S.destroy(this)},disable:function(){return S.disable(this)},enable:function(){return S.enable(this)},find:function(e){return S.find(this,e)},fire:function(){return O.fire.apply(O,[this].concat(d.cast(arguments)))},genId:function(){return H.genId(this)},get:function(e,t,n,r,i){var s=M.factory(),o=this;return s.then(function(e){S.update(o,{innerHTML:e}),O.fire(o,"afterGet"),typeof t=="function"&&t.call(o,e)},function(e){throw S.update(o,{innerHTML:arg||C.error.serverError}),O.fire(o,"failedGet"),typeof n=="function"&&n.call(o,arg),e}),O.fire(this,"beforeGet"),e.get(function(e){s.resolve(e)},function(e){s.reject(e)},r,i),this},has:function(e){return S.has(this,e)},hasClass:function(e){return S.hasClass(this,e)},hide:function(){return S.hide(this)},html:function(e){return e===undefined?P.trim(this.innerHTML):this.update({innerHTML:e})},is:function(e){return S.is(this,e)},isAlphaNum:function(){return this.nodeName==="FORM"?!1:B.test({alphanum:this.value!==undefined?this.value:S.text(this)}).pass},isBoolean:function(){return this.nodeName==="FORM"?!1:B.test({"boolean":this.value!==undefined?this.value:S.text(this)}).pass},isChecked:function(){return this.nodeName!=="INPUT"?!1:this.attr("checked")},isDate:function(){return this.nodeName==="FORM"?!1:this.value!==undefined?this.value.isDate():S.text(this).isDate()},isDisabled:function(){return this.nodeName!=="INPUT"?!1:this.attr("disabled")},isDomain:function(){return this.nodeName==="FORM"?!1:this.value!==undefined?this.value.isDomain():S.text(this).isDomain()},isEmail:function(){return this.nodeName==="FORM"?!1:this.value!==undefined?this.value.isEmail():S.text(this).isEmail()},isEmpty:function(){return this.nodeName==="FORM"?!1:this.value!==undefined?this.value.isEmpty():S.text(this).isEmpty()},isHidden:function(e){return S.hidden(this)},isIP:function(){return this.nodeName==="FORM"?!1:this.value!==undefined?this.value.isIP():S.text(this).isIP()},isInt:function(){return this.nodeName==="FORM"?!1:this.value!==undefined?this.value.isInt():S.text(this).isInt()},isNumber:function(){return this.nodeName==="FORM"?!1:this.value!==undefined?this.value.isNumber():S.text(this).isNumber()},isPhone:function(){return this.nodeName==="FORM"?!1:this.value!==undefined?this.value.isPhone():S.text(this).isPhone()},isUrl:function(){return this.nodeName==="FORM"?!1:this.value!==undefined?this.value.isUrl():S.text(this).isUrl()},jsonp:function(e,t,n){var r=this,i=t,s;return s=function(e){var t=r,n=e,s=i,o,u,a;try{s!==undefined?(s=s.replace(/\]|'|"/g,"").replace(/\./g,"[").split("["),s.each(function(e){n=n[isNaN(e)?e:parseInt(e)];if(n===undefined)throw Error(C.error.propertyNotFound)}),a=n):a=e}catch(f){a=C.error.serverError,c(f,arguments,this)}t.text(a)},m.jsonp(e,s,function(){r.text(C.error.serverError)},n),this},listeners:function(e){return O.list(this,e)},loading:function(){return H.loading(this)},on:function(e,t,n,r,i){return O.add(this,e,t,n,r||this,i)},once:function(e,t,n,r,i){return O.once(this,e,t,n,r||this,i)},prepend:function(e,t){return S.create(e,t,this,"first")},prependChild:function(e){return S.prependChild(this,e)},position:function(){return S.position(this)},removeClass:function(e){return S.klass(this,e,!1)},serialize:function(e,t){return S.serialize(this,e,t)},show:function(){return S.show(this)},size:function(){return S.size(this)},text:function(e){return S.text(this,e)},toggleClass:function(e){return S.toggleClass(this,e)},tpl:function(e){return H.tpl(e,this)},un:function(e,t,n){return O.remove(this,e,t,n)},update:function(e){return S.update(this,e)},val:function(e){return S.val(this,e)},validate:function(){return this.nodeName==="FORM"?B.test(this):this.value!==undefined?!this.value.isEmpty():!S.text(this).isEmpty()}},"function":{reflect:function(){return H.reflect(this)},debounce:function(e){return H.debounce(this,e)}},number:{diff:function(e){return A.diff(this,e)},fire:function(){return O.fire.apply(O,[this.toString()].concat(d.cast(arguments)))},format:function(e,t){return A.format(this,e,t)},half:function(e){return A.half(this,e)},isEven:function(){return A.even(this)},isOdd:function(){return A.odd(this)},listeners:function(e){return O.list(this.toString(),e)},on:function(e,t,n,r,i){return O.add(this.toString(),e,t,n,r||this,i),this},once:function(e,t,n,r,i){return O.once(this.toString(),e,t,n,r||this,i),this},random:function(){return A.random(this)},roundDown:function(){return A.round(this,"down")},roundUp:function(){return A.round(this,"up")},un:function(e,t,n){return O.remove(this.toString(),e,t,n),this}},string:{allows:function(e){return m.allows(this,e)},capitalize:function(){return P.capitalize(this)},del:function(e,t,n){return m.request(this,"DELETE",e,t,null,n)},escape:function(){return P.escape(this)},expire:function(e){return v.expire(this,e)},explode:function(e){return P.explode(this,e)},fire:function(){return O.fire.apply(O,[this].concat(d.cast(arguments)))},get:function(e,t,n){return m.request(this,"GET",e,t,null,n)},headers:function(e,t){return m.request(this,"HEAD",e,t)},hyphenate:function(e){return P.hyphenate(this,e)},isAlphaNum:function(){return B.test({alphanum:this}).pass},isBoolean:function(){return B.test({"boolean":this}).pass},isDate:function(){return B.test({date:this}).pass},isDomain:function(){return B.test({domain:this}).pass},isEmail:function(){return B.test({email:this}).pass},isEmpty:function(){return P.trim(this)===""},isIP:function(){return B.test({ip:this}).pass},isInt:function(){return B.test({integer:this}).pass},isNumber:function(){return B.test({number:this}).pass},isPhone:function(){return B.test({phone:this}).pass},isUrl:function(){return B.test({url:this}).pass},jsonp:function(e,t,n){return m.jsonp(this,e,t,n)},listeners:function(e){return O.list(this,e)},post:function(e,t,n,r){return m.request(this,"POST",e,t,n,r)},put:function(e,t,n,r){return m.request(this,"PUT",e,t,n,r)},on:function(e,t,n,r,i){return O.add(this,e,t,n,r,i)},once:function(e,t,n,r,i){return O.add(this,e,t,n,r,i)},options:function(e,t){return m.request(this,"OPTIONS",e,t)},permissions:function(){return m.permissions(this)},singular:function(){return P.singular(this)},toCamelCase:function(){return P.toCamelCase(this)},toNumber:function(e){return A.parse(this,e)},trim:function(){return P.trim(this)},un:function(e,t,n){return O.remove(this,e,t,n)},uncapitalize:function(){return P.uncapitalize(this)},unhyphenate:function(e){return P.unhyphenate(this,e)}}};return H.iterate(r[t],function(t,n){H.property(e.prototype,n,{value:t,configurable:!0,writable:!0})}),e},queryString:function(e,t){var r={},s=t!==undefined?t.indexOf("?")>-1?t.replace(/.*\?/,""):null:i||n.search.isEmpty()?null:n.search.replace("?",""),o;return s!==null&&!s.isEmpty()&&(s=s.split("&"),d.each(s,function(e){o=e.split("=");if(o[0].isEmpty())return;o[1]===undefined||o[1].isEmpty()?o[1]="":o[1].isNumber()?o[1]=Number(o[1]):o[1].isBoolean()&&(o[1]=o[1]==="true"),r[o[0]]===undefined?r[o[0]]=o[1]:r[o[0]]instanceof Array?r[o[0]].push(o[1]):(r[o[0]]=[r[o[0]]],r[o[0]].push(o[1]))})),e!==null&&e!==undefined&&(r=r[e]),r},reflect:function(e){return e===undefined&&(e=this||f),e=e.toString().match(p.reflect)[1],e!==""?P.explode(e):[]},repeat:function(e,t,n,r){t=t||10,n=n||H.uuid(!0),r=r!==!1;if(r&&e()===!1)return;return H.defer(function(){var r=function(e,t,n){var r=this;e()!==!1?f.repeating[n]=setTimeout(function(){r.call(r,e,t,n)},t):delete f.repeating[n]};r.call(r,e,t,n)},t,n),n},script:function(e,t,n){return S.create("script",{type:"application/javascript",src:e},t||f("head")[0],n)},stylesheet:function(e,t){return S.create("link",{rel:"stylesheet",type:"text/css",href:e,media:t||"print, screen"},f("head")[0])},stop:function(e){return e.cancelBubble!==undefined&&(e.cancelBubble=!0),typeof e.preventDefault=="function"&&e.preventDefault(),typeof e.stopPropagation=="function"&&e.stopPropagation(),e.returnValue=!1,e},target:function(e){return e.target||e.srcElement},tpl:function(e,n){var r;if(typeof e!="object"||!p.object_undefined.test(typeof n)&&(n=n.charAt(0)==="#"?f(n):f(n)[0])===undefined)throw Error(C.error.invalidArguments);return n===undefined&&(n=f("body")[0]),r=t.createDocumentFragment(),e instanceof Array?d.each(e,function(e,t){S.create(d.cast(e,!0)[0],r).html(d.cast(e)[0])}):H.iterate(e,function(e,t){typeof e=="string"?S.create(t,r).html(e):(e instanceof Array||e instanceof Object)&&H.tpl(e,S.create(t,r))}),n.appendChild(r),d.last(n.childNodes)},uuid:function(e){var t=function(){return((1+Math.random())*65536|0).toString(16).substring(1)},n=[8,9,"a","b"],r;return e=e===!0,r=t()+t()+"-"+t()+"-4"+t().substr(0,3)+"-"+n[Math.floor(Math.random()*n.length)]+t().substr(0,3)+"-"+t()+t()+t(),e&&(r=r.replace(/-/g,"")),r},walk:function(e,t){return d.each(t.replace(/\]$/,"").replace(/\]/g,".").split(/\.|\[/),function(t){e=e[t]}),e}},B={test:function(e){var t=!1,n=[],r={},i=null,s=[],o=[],u=[],a=[],l,c,h,v,m;return e.nodeName!==undefined&&e.nodeName==="FORM"?(e.id.isEmpty()&&e.genId(),u=f("#"+e.id+" input"),a=f("#"+e.id+" select"),u.length>0&&(o=o.concat(u)),a.length>0&&(o=o.concat(a)),d.each(o,function(e){var r={},i,s,o;i=p[e.nodeName.toLowerCase()]?p[e.nodeName.toLowerCase()]:!e.id.isEmpty()&&p[e.id.toLowerCase()]?p[e.id.toLowerCase()]:"notEmpty",s=e.val(),s===null&&(s=""),r[i]=s,o=B.test(r),o.pass||(n.push({element:e,test:i,value:s}),t=!0)})):H.iterate(e,function(e,r){if(r===undefined||e===undefined){n.push({test:r,value:e}),t=!0;return}i=String(e).charAt(0)==="#"?f(e)!==undefined?f(e).val():"":e;switch(r){case"date":isNaN((new Date(i)).getYear())&&(n.push({test:r,value:i}),t=!0);break;case"domain":p.domain.test(i.replace(p.scheme,""))||(n.push({test:r,value:i}),t=!0);break;case"domainip":if(!p.domain.test(i.replace(p.scheme,""))||!p.ip.test(i))n.push({test:r,value:i}),t=!0;break;default:c=p[r]||r,c.test(i)||(n.push({test:r,value:i}),t=!0)}}),{pass:!t,invalid:n}}},j=function(){var e=0,t=1,n=2,r=3,i=4,s=RegExp(n+"|"+r),f,l,c,h,v;return l={"User-Agent":"abaaso/3.4.31 node.js/"+process.versions.node.replace(/^v/,"")+" ("+P.capitalize(process.platform)+" V8/"+process.versions.v8+")","Content-Type":"text/plain",Accept:"*/*"},v=function(e){return this.readyState!==e&&(this.readyState=e,this.dispatchEvent("readystatechange"),this.readyState===i&&!this._error&&(this.dispatchEvent("load"),this.dispatchEvent("loadend"))),this},c=function(e){var t=this;v.call(this,n),this.status=e.statusCode,this._resheaders=e.headers,this._resheaders["set-cookie"]!==undefined&&this._resheaders["set-cookie"]instanceof Array&&(this._resheaders["set-cookie"]=this._resheaders["set-cookie"].join(";")),e.on("data",function(n){e.setEncoding("utf8"),t._send&&(n&&(t.responseText+=n),v.call(t,r))}),e.on("end",function(){t._send&&(v.call(t,i),t._send=!1)}),e.on("close",function(e){h.call(t,e)})},h=function(e){this.status=503,this.statusText=e,this.responseText=e.stack||e,this._error=!0,this.dispatchEvent("error"),v.call(this,i)},f=function(){this.onabort=null,this.onerror=null,this.onload=null,this.onloadend=null,this.onloadstart=null,this.onreadystatechange=null,this.readyState=e,this.response=null,this.responseText="",this.responseType="",this.responseXML=null,this.status=e,this.statusText="",this._id=H.genId(),this._error=!1,this._headers={},this._listeners={},this._params={},this._request=null,this._resheaders={},this._send=!1},f.prototype.abort=function(){this._request!==null&&(this._request.abort(),this._request=null),this.responseText="",this.responseXML="",this._error=!0,this._headers={};if(this._send===!0||s.test(this.readyState))this._send=!1,v.call(this,i);return this.dispatchEvent("abort"),this.readyState=e,this},f.prototype.addEventListener=function(e,t){return this._listeners.hasOwnProperty(e)||(this._listeners[e]=[]),this._listeners[e].add(t),this},f.prototype.dispatchEvent=function(e){var t=this;return typeof this["on"+e]=="function"&&this["on"+e](),this._listeners.hasOwnProperty(e)&&d.each(this._listeners[e],function(e){typeof e=="function"&&e.call(t)}),this},f.prototype.getAllResponseHeaders=function(){var e="";if(this.readyState<n||this._error)throw Error(C.error.invalidStateNoHeaders);return H.iterate(this._resheaders,function(t,n){e+=n+": "+t+"\n"}),e},f.prototype.getResponseHeader=function(e){var t;if(this.readyState<n||this._error)throw Error(C.error.invalidStateNoHeaders);return t=this._resheaders[e]||this._resheaders[e.toLowerCase()],t},f.prototype.open=function(e,n,r,i,s){var o=this;if(r!==undefined&&r!==!0)throw Error(C.error.invalidStateNoSync);return this.abort(),this._error=!1,this._params={method:e,url:n,async:r||!0,user:i||null,password:s||null},H.iterate(l,function(e,t){o._headers[t]=e}),this.readyState=t,this},f.prototype.overrideMimeType=function(e){return this._headers["Content-Type"]=e,this},f.prototype.removeEventListener=function(e,t){if(!this._listeners.hasOwnProperty(e))return;return this._listeners[e].remove(t),this},f.prototype.send=function(e){e=e||null;var n=this,r,i,s,f;if(this.readyState<t)throw Error(C.error.invalidStateNotOpen);if(this._send)throw Error(C.error.invalidStateNotSending);return i=a.parse(this._params.url),i.port=i.port||(i.protocol==="https:"?443:80),this._params.user!==null&&this._params.password!==null&&(i.auth=this._params.user+":"+this._params.password),p.put_post.test(this._params.method)&&(this._headers["Content-Length"]=e!==null?Buffer.byteLength(e):0),this._headers.Host=i.hostname+(p.http_ports.test(i.port)?"":":"+i.port),r={hostname:i.hostname,path:i.path,port:i.port,method:this._params.method,headers:this._headers},i.auth!==undefined&&(r.auth=i.auth),n._send=!0,n.dispatchEvent("readystatechange"),f=i.protocol==="http:"?o:u,s=f.request(r,function(e){c.call(n,e)}).on("error",function(e){h.call(n,e)}),e===null?s.setSocketKeepAlive(!0,1e4):s.write(e,"utf8"),this._request=s,s.end(),n.dispatchEvent("loadstart"),this},f.prototype.setRequestHeader=function(e,n){if(this.readyState!==t)throw Error(C.error.invalidStateNotUsable);if(this._send)throw Error(C.error.invalidStateNotSending);return this._headers[e]=n,this},f},F={decode:function(e){try{var t;if(typeof e!="string"||e.isEmpty())throw Error(C.error.invalidArguments);return m.ie?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t}catch(n){return c(n,arguments,this),undefined}},encode:function(e,t){try{if(e===undefined)throw Error(C.error.invalidArguments);t=t!==!1;var n=t?"<xml>":"",r=arguments[2]!==!1,i,s;return e!==null&&e.xml!==undefined&&(e=e.xml),e instanceof Document&&(e=(new XMLSerializer).serializeToString(e)),i=function(e,t){var n="<n>v</n>";return/\&|\<|\>|\"|\'|\t|\r|\n|\@|\$/g.test(t)&&(n=n.replace("v","<![CDATA[v]]>")),n.replace("n",e).replace("v",t)},p.boolean_number_string.test(typeof e)?n+=i("item",e):typeof e=="object"&&H.iterate(e,function(e,t){n+=F.encode(e,typeof e=="object",!1).replace(/item|xml/g,isNaN(t)?t:"item")}),n+=t?"</xml>":"",r&&(n='<?xml version="1.0" encoding="UTF8"?>'+n),n}catch(o){return c(o,arguments,this),undefined}}};return c=H.error,l=function(){var r,o;typeof s.bootstrap=="function"&&delete s.bootstrap,s.client.size=m.size(),m.version(),m.mobile(),m.tablet();if(m.ie&&m.version<8)throw Error(C.error.upgrade);r=function(e){O.remove(e),d.each(d.cast(e.childNodes),function(e){r(e)})},o=function(e){if(p.complete_loaded.test(t.readyState))return typeof s.init=="function"&&s.init(),!1},Array.prototype.filter===undefined&&(Array.prototype.filter=function(e){if(this===void 0||this===null||typeof e!="function")throw Error(C.error.invalidArguments);var t=null,n=Object(this),r=n.length>>>0,i=[],s=arguments[1],o=null;for(t=0;t<r;t++)t in n&&(o=n[t],e.call(s,o,t,n)&&i.push(o));return i}),Array.prototype.forEach===undefined&&(Array.prototype.forEach=function(e,t){if(this===null||typeof e!="function")throw Error(C.error.invalidArguments);var n,r=0,i=Object(this),s=i.length>>>0;t&&(n=t);while(r<s){var o;r in i&&(o=i[r],e.call(n,o,r,i)),r++}}),Array.prototype.indexOf===undefined&&(Array.prototype.indexOf=function(e,t){for(var n=t||0,r=this.length;n<r;n++)if(this[n]===e)return n;return-1}),Array.prototype.map===undefined&&(Array.prototype.map=function(e,t){var n,r,i;if(this==null)throw new TypeError(" this is null or not defined");var s=Object(this),o=s.length>>>0;if({}.toString.call(e)!="[object Function]")throw new TypeError(e+" is not a function");t&&(n=t),r=new Array(o),i=0;while(i<o){var u,a;i in s&&(u=s[i],a=e.call(n,u,i,s),r[i]=a),i++}return r}),Array.prototype.reduce===undefined&&(Array.prototype.reduce=function(e){if(this===null||this===undefined)throw new TypeError("Object is null or undefined");var t=0,n=this.length>>0,r;if(typeof e!="function")throw new TypeError("First argument is not callable");if(arguments.length<2){if(n===0)throw new TypeError("Array length is 0 and no second argument");r=this[0],t=1}else r=arguments[1];while(t<n)t in this&&(r=e.call(undefined,r,this[t],t,this)),++t;return r}),!i&&t.documentElement.classList===undefined&&function(e){var t,n,r,i,s;if(!("HTMLElement"in e||"Element"in e))return;t=function(e){var t=e.className.isEmpty()?[]:e.className.explode(" "),n=this;t.each(function(e){n.push(e)}),this.updateClassName=function(){e.className=this.join(" ")}},n=function(){return new t(this)},r=t.prototype=[],i=(e.HTMLElement||e.Element).prototype,r.add=function(e){d.contains(this,e)||(this.push(e),this.updateClassName())},r.contains=function(e){return d.contains(this,e)},r.remove=function(e){d.contains(this,e)&&(d.remove(this,e),this.updateClassName())},r.toggle=function(e){d[d.contains(this,e)?"remove":"add"](this,e),this.updateClassName()};if(Object.defineProperty)s={get:n,enumerable:!m.ie||m.version>8?!0:!1,configurable:!0},Object.defineProperty(i,"classList",s);else{if(!Object.prototype.__defineGetter__)throw Error("Could not create classList shim");i.__defineGetter__("classList",n)}}(e),Function.prototype.bind===undefined&&(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice,r=n.call(arguments,1);return function(){return t.apply(e,r.concat(n.call(arguments)))}}),i&&(delete s.cookie,XMLHttpRequest=j()),f=s.$.bind(f),H.alias(f,s),delete f.$,delete f.bootstrap,delete f.callback,delete f.init,delete f.loading,D.reset(),s.route.initial=null,f.loading=s.loading.create.bind(f.loading),f.fire=s.fire,f.on=s.on,f.once=s.once,f.un=s.un,f.listeners=s.listeners,s.state._current=s.state.current="active",f.state._current=f.state.current=s.state.current,i||(typeof e.$=="undefined"||e.$===null?e.$=f:(e.a$=f,s.aliased="a$")),H.proto(Array,"array"),typeof Element!="undefined"&&H.proto(Element,"element"),m.ie&&m.version===8&&H.proto(HTMLDocument,"element"),H.proto(Function,"function"),H.proto(Number,"number"),H.proto(String,"string"),f.error.log=s.error.log=[],f.on(e,"error",function(e){f.fire("error",e)},"error",e,"all"),i||(f.on(e,"hashchange",function(e){var t=n.hash.replace(/\#|\!\/|\?.*/g,"");if(f.route.current!==t||s.route.current!==t)s.route.current=t,f.route.current!==s.route.current&&(f.route.current=s.route.current),f.fire("beforeHash, hash, afterHash",n.hash)},"hash",e,"all"),f.on(e,"resize",function(e){f.client.size=s.client.size=m.size(),f.fire("resize",s.client.size)},"resize",e,"all"),f.on(e,"load",function(e){f.fire("render").un("render").un(this,"load")}),typeof Object.observe=="function"&&f.on(e,"DOMNodeInserted",function(e){var t=H.target(e);Object.observe(t,function(e){t.fire("change",e)})},"mutation",e,"all"),f.on(e,"DOMNodeRemoved",function(e){var t=H.target(e);t.id!==undefined&&!t.id.isEmpty()&&r(t)},"mutation",e,"all"),f.on("hash",function(e){(f.route.enabled||s.route.enabled)&&D.load(e)},"route",s.route,"all"));var u,a;u=function(){return this._current},a=function(e){if(e===null||typeof e!="string"||this.current===e||e.isEmpty())throw Error(C.error.invalidArguments);return s.state.previous=s.state._current,s.state._current=e,s.fire(e)},!m.ie||m.version>8?(H.property(s.state,"current",{enumerable:!0,get:u,set:a}),H.property(f.state,"current",{enumerable:!0,get:u,set:a})):(s.state.change=function(e){return a.call(s.state,e),s.state.current=e},f.state.change=function(e){return a.call(s.state,e),s.state.current=e}),f.ready=!0;switch(!0){case i:s.init();break;case typeof e.define=="function":e.define(function(){return s.init()});break;case p.complete_loaded.test(t.readyState):s.init();break;case typeof t.addEventListener=="function":t.addEventListener("DOMContentLoaded",s.init,!1);break;case typeof t.attachEvent=="function":t.attachEvent("onreadystatechange",o);break;default:H.repeat(o)}},{array:d,callback:{},client:{android:m.android,blackberry:m.blackberry,chrome:m.chrome,firefox:m.firefox,ie:m.ie,ios:m.ios,linux:m.linux,mobile:m.mobile,opera:m.opera,osx:m.osx,playbook:m.playbook,safari:m.safari,tablet:m.tablet,size:{height:0,width:0},version:0,webos:m.webos,windows:m.windows,del:function(e,t,n,r,i){return m.request(e,"DELETE",t,n,null,r,i)},get:function(e,t,n,r,i){return m.request(e,"GET",t,n,null,r,i)},headers:function(e,t,n,r){return m.request(e,"HEAD",t,n,null,null,r)},post:function(e,t,n,r,i,s){return m.request(e,"POST",t,n,r,i,s)},put:function(e,t,n,r,i,s){return m.request(e,"PUT",t,n,r,i,s)},jsonp:function(e,t,n,r){return m.jsonp(e,t,n,r)},options:function(e,t,n,r){return m.request(e,"OPTIONS",t,n,null,null,r)},permissions:m.permissions},cookie:g,element:S,json:N,label:C,loading:{create:H.loading,url:null},message:k,mouse:L,number:A,regex:p,repeating:{},route:{enabled:!1,current:D.current,del:D.del,hash:D.hash,init:D.init,list:D.list,load:D.load,reset:D.reset,server:D.server,set:D.set},state:{_current:null,header:null,previous:null},string:P,xml:F,$:H.$,alias:H.alias,aliased:"$",allows:m.allows,append:function(e,t,n){return n instanceof Element&&n.genId(),S.create(e,t,n,"last")},bootstrap:l,clear:S.clear,clearTimer:H.clearTimers,clone:H.clone,coerce:H.coerce,compile:H.compile,create:S.create,css:H.css,data:y.decorator,datalist:w.factory,discard:function(e){return O.discard(e)},debounce:H.debounce,decode:N.decode,defer:H.defer,define:H.define,del:function(e,t,n,r,i){return m.request(e,"DELETE",t,n,null,r,i)},destroy:S.destroy,encode:N.encode,error:H.error,expire:v.clean,expires:12e4,extend:H.extend,filter:x.factory,fire:function(e,t){var n=typeof e=="object",r=n?e:this!==f?this:s,i=n?t:e,o=[r,i].concat(d.cast(arguments).remove(0,n?1:0));return O.fire.apply(O,o)},genId:H.genId,get:function(e,t,n,r,i){return m.request(e,"GET",t,n,null,r,i)},guid:function(){return H.uuid().toUpperCase()},hash:D.hash,headers:function(e,t,n,r){return m.request(e,"HEAD",t,n,null,{},r)},hidden:S.hidden,hook:O.decorate,id:"abaaso",init:function(){return delete s.init,f.fire("init, ready").un("init, ready")},iterate:H.iterate,jsonp:function(e,t,n,r){return m.jsonp(e,t,n,r)},listeners:function(e,t){return e=typeof e=="object"?e:this!==f?this:s,O.list(e,t)},listenersTotal:O.sum,log:H.log,logging:O.log,merge:H.merge,module:H.module,object:H.object,observerable:O.decorate,on:function(e,t,n,r,i,o){var u=typeof e=="object",a,l,c,h,p,d;return a=u?e:this!==f?this:s,l=u?t:e,c=u?n:t,h=u?r:n,p=u?i:r,d=u?o:i,typeof p=="undefined"&&(p=a),O.add(a,l,c,h,p,d)},once:function(e,t,n,r,i,o){var u=typeof e=="object",a,l,c,h,p,d;return a=u?e:this!==f?this:s,l=u?t:e,c=u?n:t,h=u?r:n,p=u?i:r,d=u?o:i,typeof p=="undefined"&&(p=a),O.once(a,l,c,h,p,d)},options:function(e,t,n,r){return m.request(e,"OPTIONS",t,n,null,null,r)},parse:H.parse,pause:function(e){return O.pause(e!==!1)},permissions:m.permissions,position:S.position,post:function(e,t,n,r,i,s){return m.request(e,"POST",t,n,r,i,s)},prepend:function(e,t,n){return n instanceof Element&&n.genId(),S.create(e,t,n,"first")},promise:M.factory,property:H.property,put:function(e,t,n,r,i,s){return m.request(e,"PUT",t,n,r,i,s)},queryString:function(e,t){return H.queryString(e,t)},random:A.random,ready:!1,reflect:H.reflect,repeat:H.repeat,stylesheet:H.stylesheet,script:H.script,stop:H.stop,store:y.decorator,target:H.target,tpl:H.tpl,un:function(e,t,n,r){var i=typeof e=="object",o,u,a,l;return o=i?e:this!==f?this:s,u=i?t:e,a=i?n:t,l=i?r:n,O.remove(o,u,a,l)},update:S.update,uuid:H.uuid,validate:B.test,version:"3.4.31",walk:H.walk}}(),typeof s.bootstrap=="function"&&s.bootstrap(),typeof exports!="undefined"?module.exports=s:typeof define=="function"?define("abaaso",function(){return s}):e.abaaso=s})(this);