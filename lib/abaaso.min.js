/**
 * abaaso
 *
 * @author Jason Mulligan <jason.mulligan@avoidwork.com>
 * @copyright 2013 Jason Mulligan
 * @license BSD-3 <https://github.com/avoidwork/abaaso/blob/master/LICENSE>
 * @link http://abaaso.com
 * @module abaaso
 * @version 3.3.23
 */
(function(e){var t=e.document,n=e.location,r=e.navigator,s=typeof t=="undefined",o,u,a,f;s&&(f=require("url"),u=require("http"),a=require("https"),typeof Storage=="undefined"&&(localStorage=require("localStorage")),typeof XMLHttpRequest=="undefined"&&(XMLHttpRequest=null)),o=e.abaaso||function(){"use strict";function O(){this.error=[],this.fulfill=[],this.parentNode=null,this.outcome=null,this.state=A.state.initial}var l,c,h,p,d={android:/android/i,allow:/^allow$/i,allow_cors:/^access-control-allow-methods$/i,alphanum:/^[a-zA-Z0-9]+$/,asc:/\s*asc/ig,blackberry:/blackberry/i,"boolean":/^(0|1|true|false)?$/,boolean_number_string:/boolean|number|string/,caps:/([A-Z])/g,cdata_value:/\&|\<|\>|\"|\'|\t|\r|\n|\@|\$/g,checked_disabled:/checked|disabled/i,chrome:/chrome/i,complete_loaded:/^(complete|loaded)$/i,del:/^del/,desc:/\s*desc$/ig,domain:/^[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#]*[\w\-\@?^=%&amp;\/~\+#])?/,down_up:/down|up/,email:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,element_update:/innerHTML|innerText|textContent|type|src/,escape:/[-[\]{}()*+?.,\\^$|#\s]/g,firefox:/firefox/i,get_headers:/^(head|get|options)$/,hash:/\#/,header_replace:/:.*/,header_value_replace:/.*:\s+/,http_ports:/80|443/,hyphen:/-/g,ie:/msie|ie/i,input_button:/button|submit|reset/,integer:/(^-?\d\d*$)/,ip:/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,is_xml:/<[^>]+>[^<]*]+>/,item_xml:/item|xml/g,ios:/ipad|iphone/i,json_maybe:/json|plain|javascript/,json_wrap:/[\{\[].*[\}\]]/,jsonp_wrap:/([a-zA-Z0-9\.]+\()(.*)(\))$/,jsonp_1:/]|'|"/g,jsonp_2:/\./g,linux:/linux|bsd|unix/i,nil:/^null/i,no:/no/i,not_endpoint:/.*\//,notEmpty:/\w{1,}/,number:/(^-?\d\d*\.\d*$)|(^-?\d\d*$)|(^-?\.\d\d*$)|number/,number_format_1:/.*\./,number_format_2:/\..*/,number_present:/\d{1,}/,number_string:/number|string/i,null_undefined:/null|undefined/,observer_allowed:/click|error|key|mousedown|mouseup|submit/i,observer_globals:/body|document|window/i,object_undefined:/object|undefined/,opera:/opera/i,osx:/macintosh/i,phone:/^([0-9\(\)\/\+ \-\.]+)$/,placeholders:/\{\{.*\}\}/g,placeholder_bars:/\{\{|\}\}/g,playbook:/playbook/i,plural:/s$/,put_post:/^(post|put)$/i,quotes:/(^")|("$)/g,radio_checkbox:/^(radio|checkbox)$/i,reflect:/function\s+\w*\s*\((.*?)\)/,root:/^\/[^\/]/,route_bang:/\#|\!\/|\?.*/g,route_nget:/^(head|options)$/i,route_methods:/^(all|delete|get|put|post|head|options)$/i,safari:/safari/i,scheme:/.*\/\//,select:/select/i,selector_many:/\:|\./,selector_complex:/\s|\>/,sensitivity_types:/ci|cs|ms/,set_del:/^(set|del|delete)$/,slash_forward:/\//g,sort_needle:/:::(.*)$/,space_hyphen:/\s|-/,spaces:/\s+/g,string_boolean:/^(true|false)$/i,string_object:/string|object/i,string_true:/^true$/i,svg:/svg/i,top_bottom:/top|bottom/i,true_undefined:/true|undefined/i,url:/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i,walk_1:/\]$/,walk_2:/\]/g,walk_3:/\.|\[/,webos:/webos/i,whitespace:/^\s+|\s+$/g,windows:/windows/i,xml:/xml/i},v={add:function(e,t){return v.contains(e,t)||e.push(t),e},cast:function(e,t){t=t===!0;var n=[];if(!isNaN(e.length))if(!g.ie||g.version>8)n=Array.prototype.slice.call(e);else try{n=Array.prototype.slice.call(e)}catch(r){D.iterate(e,function(e,t){t!=="length"&&n.push(e)})}else t?n=v.keys(e):D.iterate(e,function(e){n.push(e)});return n},chunk:function(e,t){var n=[],r=k.round(e.length/t,"up"),i=0,s=-1;while(++s<r)i=s*t,n.push(v.limit(e,i,t));return n},clear:function(e){return e.length>0?v.remove(e,0,e.length):e},clone:function(e){return D.clone(e)},contains:function(e,t){return v.index(e,t)>-1},collect:function(e,t){var n=[];return v.each(e,function(e){n.push(t(e))}),n},compact:function(e,t){var n=[];return n=e.filter(function(e){if(!d.null_undefined.test(e))return!0}),t?n.length<e.length?n:null:n},diff:function(e,t){var n=[];return v.each(e,function(e){v.contains(t,e)||n.add(e)}),v.each(t,function(t){v.contains(e,t)||n.add(t)}),n},each:function(e,t){var n=e.length,r=-1,i;while(++r<n){i=t.call(e,e[r],r);if(i===!1)break}return e},empty:function(e){return e.length===0},equal:function(e,t){return x.encode(e)===x.encode(t)},fill:function(e,t,n,r){var i=typeof t=="function",s=e.length,o=isNaN(n)?0:n,u=isNaN(r)?s-1:o+r;u>s-1&&(u=s-1);for(;o<=u;o++)e[o]=i?t(e[o]):t;return e},first:function(e){return e[0]},flat:function(e){var t=[];return t=e.reduce(function(e,t){return e.concat(t)},t),t},index:function(e,t){return e.indexOf(t)},indexed:function(e){var t=[];return D.iterate(e,function(e,n){typeof e=="object"?t=t.concat(v.indexed(e)):t.push(e)}),t},intersect:function(e,t){var n=e.length>t.length?e:t,r=n===e?t:e;return n.filter(function(e){return v.contains(r,e)})},keep_if:function(e,t){if(typeof t!="function")throw Error(T.error.invalidArguments);var n=[],r=[];return n=e.filter(t),r=v.diff(e,n),v.each(r,function(t,n){v.remove(e,v.index(e,t))}),e},keys:function(e){var t=[];return typeof Object.keys=="function"?t=Object.keys(e):D.iterate(e,function(e,n){t.push(n)}),t},last:function(e,t){var n=e.length-1;return isNaN(t)||t===1?e[n]:v.limit(e,n- --t,n)},limit:function(e,t,n){var r=[],i=t-1,s=t+n;while(++i<s)e[i]!==undefined&&r.push(e[i]);return r},max:function(e){return v.last(e.sort(v.sort))},mean:function(e){return v.sum(e)/e.length},median:function(e){var t=e.length,n=k.round(t/2,"down"),r=e.sort(v.sort);return k.odd(t)?r[n]:(r[n-1]+r[n])/2},min:function(e){return e.sort(v.sort)[0]},mode:function(e){var t={},n=0,r=0,i=[],s;return v.each(e,function(e){isNaN(t[e])?t[e]=1:++t[e]}),n=v.max(v.cast(t)),D.iterate(t,function(e,t){e===n&&i.push(k.parse(t))}),r=i.length,r>0&&(s=r===1?i[0]:i),s},range:function(e){return v.max(e)-v.min(e)},rassoc:function(e,t){var n;return v.each(e,function(r,i){if(r[1]===t)return n=e[i],!1}),n},reject:function(e,t){return v.diff(e,e.filter(t))},replace:function(e,t){return v.remove(e,0,e.length),v.each(t,function(t){e.push(t)}),e},remove:function(e,t,n){if(isNaN(t)){t=e.index(t);if(t===-1)return e}else t=t||0;var r=e.length,i=e.slice((n||t)+1||r);return e.length=t<0?r+t:t,e.push.apply(e,i),e},remove_if:function(e,t){if(typeof t!="function")throw Error(T.error.invalidArguments);var n=[];return n=e.filter(t),v.each(n,function(t,n){v.remove(e,v.index(e,t))}),e},remove_while:function(e,t){if(typeof t!="function")throw Error(T.error.invalidArguments);var n=[];return v.each(e,function(e){var r=t(e);if(r===!1)return!1;n.push(e)}),v.each(n,function(t,n){v.remove(e,v.index(e,t))}),e},rest:function(e,t){return t=t||1,t<1&&(t=1),v.limit(e,t,e.length)},rindex:function(e,t){var n=-1;return v.each(e,function(e,r){e===t&&(n=r)}),n},rotate:function(e,t){var n=[],r=e.length;return t===0?n=e:(t<0?t+=r:t--,n=v.limit(e,t,r),n=n.concat(v.limit(e,0,t))),n},series:function(e,t,n){e=e||0,t=t||e,n=n||1;var r=[],i=-1,s=Math.max(0,Math.ceil((t-e)/n));while(++i<s)r[i]=e,e+=n;return r},split:function(e,t){var n=[],r=e.length,i=Math.ceil(r/t),s=Math.floor(r/t),o=Math.ceil(r/i),u=!1,a=0,f=-1;k.diff(r,t*i)>i&&(o=r-s*t+s-1);while(++f<t)!u&&o<t&&f===o&&(--i,u=!0),f>0&&(a+=i),n.push(v.limit(e,a,i));return n},sort:function(e,t){var n=!1,r=0;return!isNaN(e)&&!isNaN(t)&&(n=!0),e=n?k.parse(e):String(e),t=n?k.parse(t):String(t),e<t?r=-1:e>t&&(r=1),r},sum:function(e){var t=0;return e.length>0&&(t=e.reduce(function(e,t){return e+t})),t},take:function(e,t){return v.limit(e,0,t)},total:function(e){return v.indexed(e).length},toObject:function(e){var t={},n=e.length;while(n--)t[n.toString()]=e[n];return t},unique:function(e,t){var n=[];return v.each(e,function(e){v.add(n,e)}),n},zip:function(e,t){var n=[];return t instanceof Array||(t=typeof t=="object"?v.cast(t):[t]),v.each(t,function(e,t){e instanceof Array||(this[t]=[e])}),v.each(e,function(e,r){n[r]=[e],v.each(t,function(e){n[r].push(e[r]||null)})}),n}},m={items:{},clean:function(){return D.iterate(m.items,function(e,t){m.expired(t)&&m.expire(t)})},expire:function(e,t){return t=t===!0,m.items[e]!==undefined?(delete m.items[e],t||e.fire("beforeExpire, expire, afterExpire"),!0):!1},expired:function(e){var t=m.items[e];return t!==undefined&&t.expires!==undefined&&t.expires<new Date},get:function(e,t){return t=t!==!1,m.items[e]===undefined?!1:t&&m.expired(e)?(m.expire(e),!1):D.clone(m.items[e])},set:function(e,t,n){return m.items[e]===undefined&&(m.items[e]={},m.items[e].permission=0),t==="permission"?m.items[e].permission|=n:t==="!permission"?m.items[e].permission&=~n:m.items[e][t]=n,m.items[e]}},g={android:function(){return!s&&d.android.test(r.userAgent)}(),blackberry:function(){return!s&&d.blackberry.test(r.userAgent)}(),chrome:function(){return!s&&d.chrome.test(r.userAgent)}(),firefox:function(){return!s&&d.firefox.test(r.userAgent)}(),ie:function(){return!s&&d.ie.test(r.userAgent)}(),ios:function(){return!s&&d.ios.test(r.userAgent)}(),linux:function(){return!s&&d.linux.test(r.userAgent)}(),mobile:function(){o.client.mobile=this.mobile=!s&&(/blackberry|iphone|webos/i.test(r.userAgent)||d.android.test(r.userAgent)&&(o.client.size.height<720||o.client.size.width<720))},playbook:function(){return!s&&d.playbook.test(r.userAgent)}(),opera:function(){return!s&&d.opera.test(r.userAgent)}(),osx:function(){return!s&&d.osx.test(r.userAgent)}(),safari:function(){return!s&&d.safari.test(r.userAgent.replace(/chrome.*/i,""))}(),tablet:function(){o.client.tablet=this.tablet=!s&&(/ipad|playbook|webos/i.test(r.userAgent)||d.android.test(r.userAgent)&&(o.client.size.width>=720||o.client.size.width>=720))},webos:function(){return!s&&d.webos.test(r.userAgent)}(),windows:function(){return!s&&d.windows.test(r.userAgent)}(),version:function(){var e=0;switch(!0){case this.chrome:e=r.userAgent.replace(/(.*chrome\/|safari.*)/gi,"");break;case this.firefox:e=r.userAgent.replace(/(.*firefox\/)/gi,"");break;case this.ie:e=parseInt(r.userAgent.replace(/(.*msie|;.*)/gi,"")),t.documentMode<e&&(e=t.documentMode);break;case this.opera:e=r.userAgent.replace(/(.*opera\/|\(.*)/gi,"");break;case this.safari:e=r.userAgent.replace(/(.*version\/|safari.*)/gi,"");break;default:e=r!==undefined?r.appVersion:0}return e=isNaN(parseInt(e))?0:parseInt(e),o.client.version=this.version=e,e},allows:function(e,t){if(e.isEmpty()||t.isEmpty())throw Error(T.error.invalidArguments);if(!m.get(e,!1))return undefined;t=t.toLowerCase();var n=!1,r=0;return d.del.test(t)?r=1:d.get_headers.test(t)?r=4:d.put_post.test(t)&&(r=2),n=(g.permissions(e,t).bit&r)!==0,n},bit:function(e){var t=0;return v.each(e,function(e){switch(e.toLowerCase()){case"head":case"get":case"options":t|=4;break;case"post":case"put":t|=2;break;case"delete":t|=1}}),t},cors:function(e){return!s&&e.indexOf("//")>-1&&e.indexOf("//"+n.host)===-1},headers:function(e,t,n){var r=_.trim(e.getAllResponseHeaders()).split("\n"),i={},s={},o=null,u=new Date,a=g.cors(t),f;f=function(e){var t=[];return v.each(e.split("-"),function(e){t.push(_.capitalize(e))}),t.join("-")},v.each(r,function(e,t){var n,r;r=e.replace(d.header_value_replace,""),n=e.replace(d.header_replace,""),n=n.indexOf("-")===-1?_.capitalize(n):f(n),i[n]=r,o===null&&(!a&&d.allow.test(n)?o=r:a&&d.allow_cors.test(n)&&(o=r))});switch(!0){case d.no.test(i["Cache-Control"]):case d.no.test(i.Pragma):break;case i["Cache-Control"]!==undefined&&d.number_present.test(i["Cache-Control"]):u=u.setSeconds(u.getSeconds()+parseInt(d.number_present.exec(i["Cache-Control"])[0]));break;case i.Expires!==undefined:u=new Date(i.Expires);break;default:u=u.setSeconds(u.getSeconds()+l.expires)}return s.expires=u,s.headers=i,s.permission=g.bit(o!==null?o.explode():[n]),n!=="head"&&(m.set(t,"expires",s.expires),m.set(t,"headers",s.headers),m.set(t,"permission",s.permission)),s},parse:function(e,t){t=t||"";var n,r;switch(!0){case(d.json_maybe.test(t)||t.isEmpty())&&d.json_wrap.test(e.responseText)&&Boolean(r=x.decode(e.responseText,!0)):case(d.json_maybe.test(t)||t.isEmpty())&&(r=d.jsonp_wrap.exec(e.responseText))&&r!==null&&Boolean(r=x.decode(r[2],!0)):n=r;break;case d.xml.test(t)&&String(e.responseText).isEmpty()&&e.responseXML!==undefined&&e.responseXML!==null:n=B.decode(e.responseXML.xml!==undefined?e.responseXML.xml:e.responseXML);break;case d.is_xml.test(e.responseText):n=B.decode(e.responseText);break;default:n=e.responseText}return n},permissions:function(e){var t=m.get(e,!1),n=t?t.permission:0,r={allows:[],bit:n,map:{read:4,write:2,"delete":1}};return n&1&&r.allows.push("DELETE"),n&2&&function(){r.allows.push("POST"),r.allows.push("PUT")}(),n&4&&r.allows.push("GET"),r},jsonp:function(t,n,r,i){var s=A.factory(),o,u,a;p===undefined&&(e.abaaso===undefined&&D.define("abaaso.callback",{},e),p="abaaso");switch(!0){case i===undefined:case i===null:case i instanceof Object&&(i.callback===null||i.callback===undefined):case typeof i=="string"&&i.isEmpty():o="callback";break;case i instanceof Object&&i.callback!==undefined:o=i.callback;break;default:o="callback"}s.then(function(e){return typeof n=="function"&&n(e),e},function(e){return typeof r=="function"&&r(e),e});do u=D.genId().slice(0,10);while(e.abaaso.callback[u]!==undefined);return t=t.replace(o+"=?",o+"="+p+".callback."+u),e.abaaso.callback[u]=function(t){clearTimeout(D.timer[u]),delete D.timer[u],delete e.abaaso.callback[u],s.resolved()||s.resolve(t),a.destroy()},a=l("head")[0].create("script",{src:t,type:"text/javascript"}),D.defer(function(){s.resolved()||s.reject(undefined)},3e4,u),t},request:function(e,t,n,r,i,o,u){u=u||3e4;var a,f,l,c,p,v,y,b,w,E,S;if(d.put_post.test(t)&&i===undefined)throw Error(T.error.invalidArguments);t=t.toLowerCase(),o=o instanceof Object?o:null,a=g.cors(e),f=g.ie&&g.version<10&&a?new XDomainRequest:new XMLHttpRequest,l=d.put_post.test(t)&&i!==undefined?i:null,c=t==="get"?m.get(e):!1,p=t.capitalize(),y=null,b=typeof Document!="undefined",w=typeof ArrayBuffer!="undefined",E=typeof Blob!="undefined",S=A.factory(),S.then(function(r){return t==="delete"&&m.expire(e),typeof n=="function"&&n.call(e,r,f),r},function(t){return typeof r=="function"&&r.call(e,t,f),t}),e.fire("before"+p);if(!d.get_headers.test(t)&&e.allows(t)===!1)return f.status=405,S.resolved()||S.reject(null),e.fire("failed"+p,null,f);if(t==="get"&&Boolean(c))s&&(f.readyState=4,f.status=200,f._resheaders=c.headers),S.resolved()||S.resolve(c.response),e.fire("afterGet",c.response,f),f=null;else{f[f instanceof XMLHttpRequest?"onreadystatechange":"onload"]=function(n){g.response(f,e,t,S)};try{f.timeout!==undefined&&(f.timeout=u)}catch(N){void 0}f.onerror!==undefined&&(f.onerror=function(t){S.resolved()||(S.reject(t),e.fire("failed"+p,t,f))}),f.ontimeout!==undefined&&(f.ontimeout=function(t){S.resolved()||(S.reject(t),e.fire("timeout"+p,t,f))}),f.onprogress!==undefined&&(f.onprogress=function(t){e.fire("progress"+p,t,f)}),f.upload!==undefined&&f.upload.onprogress!==undefined&&(f.upload.onprogress=function(t){e.fire("progressUpload"+p,t,f)});try{f.open(t.toUpperCase(),e,!0),o!==null&&o.hasOwnProperty("Content-Type")&&(y=o["Content-Type"]),a&&y===null&&(y="text/plain"),l!==null&&(l.hasOwnProperty("xml")&&(l=l.xml),b&&l instanceof Document&&(l=B.decode(l)),typeof l=="string"&&d.is_xml.test(l)&&(y="application/xml"),!(w&&l instanceof ArrayBuffer)&&!(E&&l instanceof Blob)&&l instanceof Object&&(y="application/json",l=x.encode(l)),y===null&&(w&&l instanceof ArrayBuffer||E&&l instanceof Blob)&&(y="application/octet-stream"),y===null&&(y="application/x-www-form-urlencoded; charset=UTF-8")),f.setRequestHeader!==undefined&&(typeof c=="object"&&c.headers.hasOwnProperty("ETag")&&f.setRequestHeader("ETag",c.headers.ETag),o===null&&(o={}),y!==null&&(o["Content-Type"]=y),o.hasOwnProperty("callback")&&delete o.callback,D.iterate(o,function(e,t){e!==null&&t!=="withCredentials"&&f.setRequestHeader(t,e)})),typeof f.withCredentials=="boolean"&&o!==null&&typeof o.withCredentials=="boolean"&&(f.withCredentials=o.withCredentials),l!==null?f.send(l):f.send()}catch(N){h(N,arguments,this,!0),S.resolved()||S.reject(N),e.fire("failed"+p,g.parse(f),f)}}return e},response:function(e,t,r,i){var u=r.toLowerCase().capitalize(),a=n,f=null,l=g.ie&&e.readyState===undefined,c,p,d,v,y,b;c=function(e,n){i.resolved()||i.reject(e),h(e,arguments,this,!0),t.fire("failed"+u,g.parse(n),n)};if(!l&&e.readyState===2)t.fire("received"+u,null,e);else if(!l&&e.readyState===4){switch(e.status){case 200:case 201:case 202:case 203:case 204:case 205:case 206:case 301:p=o.state,d=g.headers(e,t,r);if(r==="head")return i.resolved()||i.resolve(d.headers),e.onreadystatechange=null,e=null,t.fire("afterHead",d.headers);if(r==="options")return i.resolved()||i.resolve(d.headers),e.onreadystatechange=null,e=null,t.fire("afterOptions",d.headers);if(r!=="delete"&&/200|201/.test(e.status)){y=d.headers["Content-Type"]||"",v=g.parse(e,y);if(v===undefined)throw Error(T.error.serverError);m.set(t,"response",d.response=D.clone(v))}p.header!==null&&Boolean(f=d.headers[p.header])&&p.current!==f&&(typeof p.change=="function"?p.change(f):p.current=f),t.fire("headers",d.headers,e);switch(e.status){case 200:case 201:i.resolved()||i.resolve(v),t.fire("after"+u,v,e);break;case 202:case 203:case 204:case 206:i.resolved()||i.resolve(null),t.fire("after"+u,null,e);break;case 205:i.resolved()||i.resolve(null),t.fire("reset",null,e);break;case 301:i.resolved()||i.resolve(v),t.fire("moved",v,e)}break;case 401:c(s?T.error.serverUnauthorized:Error(T.error.serverUnauthorized),e);break;case 403:m.set(t,"!permission",g.bit([r])),c(s?T.error.serverForbidden:Error(T.error.serverForbidden),e);break;case 405:m.set(t,"!permission",g.bit([r])),c(s?T.error.serverInvalidMethod:Error(T.error.serverInvalidMethod),e);break;default:c(s?T.error.serverError:Error(T.error.serverError),e)}e.onreadystatechange=null,e=null}else l&&(v=g.parse(e),m.set(t,"permission",g.bit(["get"])),m.set(t,"response",v),i.resolved()||i.resolve(v),t.fire("afterGet",v,e),e.onload=null,e=null);return t},size:function(){var e=s?{clientHeight:0,clientWidth:0}:t.documentElement!==undefined?t.documentElement:t.body;return{height:e.clientHeight,width:e.clientWidth}}},y={expire:function(e,t,n){return y.get(e)!==undefined&&y.set(e,"","-1s",t,n),e},get:function(e){return D.coerce(y.list()[e])},list:function(){var e={},n,r;return t.cookie!==undefined&&!t.cookie.isEmpty()&&(r=t.cookie.explode(";"),v.each(r,function(t){n=t.explode("="),e[decodeURIComponent(n[0].toString().trim())]=decodeURIComponent(n[1].toString().trim())})),e},set:function(e,n,r,i,s){n=(n||"")+";",r=r||"",i=typeof i=="string"?" domain="+i+";":"",s=s===!0?"; secure":"";var o="",u=null,a=null,f=["d","h","m","s"],l=new RegExp,c=f.length;if(!r.isEmpty()){while(c--){D.compile(l,f[c]);if(l.test(r)){a=f[c],u=parseInt(r);break}}if(isNaN(u))throw Error(T.error.invalidArguments);o=new Date;switch(a){case"d":o.setDate(o.getDate()+u);break;case"h":o.setHours(o.getHours()+u);break;case"m":o.setMinutes(o.getMinutes()+u);break;case"s":o.setSeconds(o.getSeconds()+u)}}return o instanceof Date&&(o=" expires="+o.toUTCString()+";"),t.cookie=e.toString().trim()+"="+n+o+i+" path=/"+s,y.get(e)}},b={methods:{batch:function(e,t,n,r,i){e=e.toString().toLowerCase(),n=n===!0,r=r||1e3;if(!d.set_del.test(e)||n&&d.del.test(e)||typeof t!="object")throw Error(T.error.invalidArguments);var s=this.parentNode,o=this,u=0,a=t.length,f=!1,l=D.genId(!0),c=A.factory(),h,p,m,g,y,b,w;return c.then(function(t){return d.del.test(e)&&o.reindex(),o.loaded=!0,s.fire("afterDataBatch",t),i instanceof O&&i.resolve(t),t},function(e){return s.fire("failedDataBatch",e),i instanceof O&&i.reject(e),e}),h=function(e){c.resolve(e)},p=function(e){c.reject(e)},g=function(e,t){var r=A.factory(),i=D.genId(),s={};typeof s.batch!="function"?s=D.clone(e):D.iterate(e,function(e,t){o.collections.contains(t)||(s[t]=D.clone(e))}),o.key!==null&&s[o.key]!==undefined&&(t=s[o.key],delete s[o.key]),r.then(function(e){return++u===a&&h(o.get()),e},function(e){return f||(f=!0,p(e)),e}),s instanceof Array&&o.uri!==null?o.generate(t,undefined,r):o.set(t,s,n,r)},y=function(e){var t=A.factory();t.then(function(e){return++u===a&&h(e),e},function(e){return f||(f=!0,p(e)),e}),o.del(e,!1,n,t)},s.fire("beforeDataBatch",t),n&&this.clear(n),t.length===0?h(!1):e==="set"?v.each(t.chunk(r),function(e,t){var n=t*r;D.defer(function(){v.each(e,function(e,t){t=(n+t).toString();if(typeof e=="object")g(e,t);else if(e.indexOf("//")===-1){e.charAt(0)!=="/"?e=o.uri+"/"+e:o.uri!==null&&d.root.test(e)&&(w=D.parse(o.uri),e=w.protocol+"//"+w.host+e),t=e.replace(d.not_endpoint,"");if(t.isEmpty())return;e.get(function(e){g(o.source===null?e:D.walk(e,o.source),t)},p,D.merge({withCredentials:o.credentials},o.headers))}else{t=e.replace(d.not_endpoint,"");if(t.isEmpty())return;e.get(function(e){g(o.source===null?e:D.walk(e,o.source),t)},p,D.merge({withCredentials:o.credentials},o.headers))}})})}):v.each(t.sort(v.sort).reverse(),function(e){y(e)}),this},clear:function(e,t){e=e===!0;var n=this.parentNode;return e?(this.collections=[],this.crawled=!1,this.keys={},this.loaded=!1,this.records=[],this.total=0,this.views={}):(n.fire("beforeDataClear"),this.callback=null,this.collections=[],this.crawled=!1,this.credentials=null,this.expires=null,this.headers={Accept:"application/json"},this.ignore=[],this.key=null,this.keys={},this.leafs=[],this.loaded=!1,this.pointer=null,this.records=[],this.recursive=!1,this.retrieve=!1,this.source=null,this.total=0,this.views={},this.uri=null,n.fire("afterDataClear")),t instanceof O&&t.resolve(!0),this},crawl:function(e,t,n,r){var i=!1,s=this,o;if(typeof e!="number"&&typeof e!="string")throw Error(T.error.invalidArguments);return this.crawled=!0,this.loaded=!1,o=this.get(e),o=this.records[this.keys[o.key]],n=n||this.key,typeof t=="string"&&(i=!0,t=t.explode()),D.iterate(o.data,function(e,u){var a=A.factory();a.then(function(e){return this.fire("afterDataRetrieve",e),r instanceof O&&r.resolve(e),e},function(e){return this.fire("failedDataRetrieve",e),r instanceof O&&r.reject(e),e});if(i&&t.contains(u)||!(e instanceof Array)&&typeof e!="string")return;if(e instanceof Array)s.collections.contains(u)||s.collections.push(u),o.data[u]=b.factory({id:o.key+"-"+u},null,{key:n,pointer:s.pointer,source:s.source}),o.data[u].data.headers=D.merge(o.data[u].data.headers,s.headers),i&&v.each(t,function(e){o.data[u].data.ignore.add(e)}),v.each(s.leafs,function(e){o.data[u].data.leafs.add(e)}),!s.leafs.contains(u)&&s.recursive&&s.retrieve&&(o.data[u].data.recursive=!0,o.data[u].data.retrieve=!0),e.length>0&&o.data[u].data.batch("set",e,!0,a);else if(e.charAt(0)==="/"||e.indexOf("//")>-1)s.collections.contains(u)||s.collections.push(u),o.data[u]=b.factory({id:o.key+"-"+u},null,{key:n,pointer:s.pointer,source:s.source}),o.data[u].data.headers=D.merge(o.data[u].data.headers,s.headers),i&&v.each(t,function(e){o.data[u].data.ignore.add(e)}),v.each(s.leafs,function(e){o.data[u].data.leafs.add(e)}),!s.leafs.contains(u)&&s.recursive&&s.retrieve&&(o.data[u].data.recursive=!0,o.data[u].data.retrieve=!0),o.data[u].data.setUri(e,a)}),this.get(e)},del:function(e,t,n,r){if(e===undefined||!d.number_string.test(typeof e))throw Error(T.error.invalidArguments);t=t!==!1,n=n===!0;var i=this.parentNode,s=this,o=A.factory(),u,a,f,l;o.then(function(e){var t=s.get(e.record);return s.records.remove(s.keys[e.key]),delete s.keys[e.key],s.total--,s.views={},e.reindex&&s.reindex(),D.iterate(t.data,function(e,t){if(e===null)return;e.data!==undefined&&typeof e.data.teardown=="function"&&e.data.teardown()}),i.fire("afterDataDelete",t),r instanceof O&&r.resolve(e),e},function(e){return i.fire("failedDataDelete",a),r instanceof O&&r.reject(e),e});if(typeof e=="string"){u=e,e=this.keys[u];if(typeof e=="undefined")throw Error(T.error.invalidArguments)}else{u=this.records[e];if(typeof u=="undefined")throw Error(T.error.invalidArguments);u=u.key}return a={key:u,record:e,reindex:t},!n&&this.callback===null&&this.uri!==null&&(f=this.uri+"/"+u,l=f.allows("delete")),i.fire("beforeDataDelete",a),n||this.callback!==null||this.uri===null?o.resolve(a):d.true_undefined.test(l)?f.del(function(e){o.resolve(a)},function(e){o.reject(a)},D.merge({withCredentials:this.credentials},this.headers)):o.reject(a),this},find:function(e,t,n){if(e===undefined)throw Error(T.error.invalidArguments);var r=[],i=[],s=new RegExp,o=typeof e=="function";return this.total===0?r:(o||(e=typeof e=="string"?e.explode():[e],n===undefined||String(n).isEmpty()?n="gi":n===null&&(n="")),t=typeof t=="string"?t.explode():null,t===null?v.each(this.records,function(t){o?e(t)===!0&&(i.push(t.key),r.add(t)):D.iterate(t.data,function(o,u){if(i.contains(t.key))return!1;if(o===null||typeof o.data=="object")return;v.each(e,function(e){D.compile(s,e,n);if(s.test(String(o).escape()))return i.push(t.key),r.add(t),!1})})}):v.each(this.records,function(u){v.each(t,function(t){if(i.contains(u.key))return!1;if(u.data[t]===undefined||typeof u.data[t].data=="object")return;if(!o)v.each(e,function(e){D.compile(s,e,n);if(s.test(String(u.data[t]).escape()))return i.push(u.key),r.add(u),!1});else if(e(u.data[t])===!0)return i.push(u.key),r.add(u),!1})}),r)},form:function(e,t,n){n=n!==!1;var r=e===null,i=this,s,o,u,a,f,c;r?e=this.get(0):e instanceof Object||(e=this.get(e));if(e===undefined)throw Error(T.error.invalidArguments);if(this.uri!==null&&!this.uri.allows("post"))throw Error(T.error.serverInvalidMethod);return f=e.key,c=e.data,t!==undefined&&(t=D.object(t)),this.uri!==null?(s=this.uri.replace(/.*\//,"").replace(/\?.*/,""),s.isDomain()&&(s=s.replace(/\..*/g,""))):s="record",u=function(e){var t=e.srcElement.parentNode,r=l("#"+t.id+" input"),s=r[0].name.match(/(.*)\[/)[1],o=!0,u={},a;i.parentNode.fire("beforeDataFormSubmit"),n&&(o=t.validate());switch(o){case!1:i.parentNode.fire("failedDataFormSubmit");break;case!0:v.each(r,function(e){if(typeof e.type!="undefined"&&d.input_button.test(e.type))return;D.define(e.name.replace("[",".").replace("]",""),e.value,u)}),a=D.genId(!0),i.parentNode.once("afterDataSet",function(){t.destroy()}),i.set(f,u[s])}i.parentNode.fire("afterDataFormSubmit",f)},a=function(e,t,n){var i,s;D.iterate(e,function(e,o){e instanceof Array?(i=0,v.each(e,function(e){a(e,t,n+"["+o+"]["+i++ +"]")})):e instanceof Object?a(e,t,n+"["+o+"]"):(s=(n+"["+o+"]").replace(/\[|\]/g,""),t.create("label",{"for":s}).html(o.capitalize()),t.create("input",{id:s,name:n+"["+o+"]",type:"text",value:r?"":e}))})},this.parentNode.fire("beforeDataForm"),o=E.create("form",{style:"display:none;"},t),a(c,o,s),o.create("input",{type:"button",value:T.common.submit}).on("click",function(e){u(e)}),o.create("input",{type:"reset",value:T.common.reset}),o.css("display","inherit"),this.parentNode.fire("afterDataForm",o),o},generate:function(e,t,n){var r=A.factory(),i={},s;return i={headers:this.headers,ignore:v.clone(this.ignore),leafs:v.clone(this.leafs),key:this.key,pointer:this.pointer,recursive:this.recursive,retrieve:this.retrieve,source:this.source},r.then(function(e){return n instanceof O&&n.resolve(e),e},function(e){return n instanceof O&&n.reject(e),e}),this.keys[e]!==undefined?(s=this.keys[e],typeof this.records[s].data.teardown=="function"&&this.records[s].data.teardown()):(this.set(e,{},!0),s=this.keys[e],this.collections.add(e)),this.records[s]=b.factory({id:this.parentNode.id+"-"+e},null,i),this.uri!==null&&t===undefined&&!this.leafs.contains(e)&&(t=this.uri+"/"+e),t!==undefined?this.records[s].data.setUri(t,r):r.resolve(this.records[s].data.get()),this.records[s].data},get:function(e,t){var n=this.records,r=this.parentNode,i=typeof e,s=this,o;return i==="undefined"||String(e).length===0?o=n:i==="string"&&e.indexOf(",")>-1?(o=[],v.each(e.explode(),function(e){isNaN(e)||(e=parseInt(e)),o.push(s.get(e))})):i==="string"&&typeof this.keys[e]!="undefined"?o=n[this.keys[e]]:i==="number"&&typeof t=="undefined"?o=n[parseInt(e)]:i==="number"&&typeof t=="number"?o=n.limit(parseInt(e),parseInt(t)):o=undefined,o},record:function(e,t){return b.record.factory.call(this,e,t)},reindex:function(){var e=this.total,t=this.parentNode,n=this.key!==null,r=-1;this.views={};if(e>0)while(++r<e)!n&&this.records[r].key.isNumber()&&(delete this.keys[this.records[r].key],this.records[r].key=r.toString()),this.keys[this.records[r].key]=r;return this},set:function(e,t,n,r){e===null&&(e=undefined),n=n===!0;if((e===undefined||String(e).isEmpty())&&this.uri===null||t===undefined)throw Error(T.error.invalidArguments);if(t instanceof Array)return this.generate(e).batch("set",t,!0,r);if(t instanceof Number||t instanceof String||typeof t!="object")throw Error(T.error.invalidArguments);var i=e===undefined?undefined:this.get(e),s=this.parentNode,o=e===undefined?"post":"put",u=this,a={data:{},key:e,record:undefined},f=this.uri,l=A.factory(),c;return i!==undefined?(a.record=this.records[this.keys[i.key]],D.iterate(a.record.data,function(e,t){!u.collections.contains(t)&&!u.ignore.contains(t)&&(a.data[t]=e)}),D.merge(a.data,t)):a.data=t,l.then(function(e){var t=typeof e.record=="undefined"?D.clone(e):e,n=!0,i=A.factory(),s,o;i.then(function(e){return n&&u.parentNode.fire("afterDataSet",e),r instanceof O&&r.resolve(e),e},function(e){throw u.fire("failedDataSet"),r instanceof O&&r.reject(e),Error(e)}),u.views={};if(typeof t.record=="undefined"){var a=u.total++;typeof t.key=="undefined"&&(typeof t.result=="undefined"&&(u.total--,i.reject(T.error.expectedObject)),u.source!==null&&(t.result=D.walk(t.result,u.source)),u.key===null?t.key=v.cast(t.result).first():(t.key=t.result[u.key],delete t.result[u.key]),typeof t.key!="string"&&(t.key=t.key.toString()),t.data=t.result),u.keys[t.key]=a,u.records[a]=u.record(t.key,{}),s=u.records[a];if(u.pointer===null||typeof t.data[u.pointer]=="undefined")s.data=t.data,u.key!==null&&u.records[a].data.hasOwnProperty(u.key)&&delete u.records[a].data[u.key];else{n=!1,o=t.data[u.pointer];if(typeof o=="undefined"||o===null)delete u.records[a],delete u.keys[t.key],i.reject(T.error.expectedObject);s.data={},o.get(function(e){u.source!==null&&(e=D.walk(e,u.source)),typeof e[u.key]!="undefined"&&delete e[u.key],D.merge(s.data,e),u.retrieve&&(u.crawl(s.key,u.ignore.length>0?u.ignore.join(","):undefined,u.key),u.loaded=!0),i.resolve(s)},function(e){i.reject(e)},u.headers)}}else s=u.records[u.keys[t.record.key]],D.merge(s.data,t.data);return u.retrieve&&u.crawl(s.key,u.ignore.length>0?u.ignore.join(","):undefined,u.key),i.resolve(s),e},function(e){return s.fire("failedDataSet",e),r instanceof O&&r.reject(e),e}),!n&&this.callback===null&&f!==null&&(typeof i!="undefined"&&(f+="/"+i.key),c=f.allows(o)),s.fire("beforeDataSet",{key:e,data:t}),n||this.callback!==null||this.uri===null?l.resolve(a):d.true_undefined.test(c)?f[o](function(e){a.result=e,l.resolve(a)},function(e){l.reject(e)},t,D.merge({withCredentials:this.credentials},this.headers)):l.reject(a),this},setExpires:function(e){if(e!==null&&this.uri===null||e!==null&&(isNaN(e)||e<1e3))throw Error(T.error.invalidArguments);if(this.expires===e)return;this.expires=e;var t=this.parentNode.id+"DataExpire",n=e,r=this;D.clearTimers(t);if(e===null)return;D.repeat(function(){if(r.uri===null)return r.setExpires(null),!1;m.expire(r.uri)||r.uri.fire("beforeExpire, expire, afterExpire")},n,t,!1)},setUri:function(e,t){var n;if(e!==null&&e.isEmpty())throw Error(T.error.invalidArguments);return this.uri===e?n=this.uri:(this.uri!==null&&this.uri.un(),n=this.uri=e,n!==null&&(n.on("expire",function(){this.sync(!0)},"dataSync",this),m.expire(n,!0),this.sync(!0,t))),n},sort:function(e,t,n){if(e===undefined||String(e).isEmpty())throw Error(T.error.invalidArguments);d.sensitivity_types.test(n)||(n="ci"),t=t===!0;var r=e.replace(d.asc,"").replace(","," ").toCamelCase()+n.toUpperCase(),i=e.explode(),s=this.key,o=[],u,a,f;return v.each(i,function(e){if(String(e).isEmpty())throw Error(T.error.invalidArguments)}),!t&&this.views[r]instanceof Array?this.views[r]:this.total===0?[]:(f=function(e,t){var n=e.clone(),r=e.first(),i={},s=[];return n.remove(0),i=u(r,t,d.desc.test(r)),v.each(i.order,function(e){if(i.registry[e].length<2)return;n.length>0&&(i.registry[e]=f(n,i.registry[e]))}),v.each(i.order,function(e){s=s.concat(i.registry[e])}),s},u=function(e,t,r){e=e.replace(d.asc,"");var i=e.replace(d.desc,""),o=s===i,u=[],f={};return v.each(t,function(e){var t=o?e.key:e.data[i],r=t===null?"null":String(t);switch(n){case"ci":r=r.toCamelCase();break;case"cs":r=r.trim();break;case"ms":r=r.trim().slice(0,1).toLowerCase()}f[r]instanceof Array||(f[r]=[],u.push(r)),f[r].push(e)}),u.sort(v.sort),r&&u.reverse(),v.each(u,function(t){if(f[t].length===1)return;f[t]=a(f[t],e,i,r,o)}),{order:u,registry:f}},a=function(e,t,n,r,i){var s=[],o=[];return v.each(e,function(e,t){var r=i?e.key:e.data[n];r=_.trim(r.toString())+":::"+t,s.push(r.replace(d.nil,'""'))}),s.length>1&&(s.sort(v.sort),r&&s.reverse()),v.each(s,function(t){o.push(e[d.sort_needle.exec(t)[1]])}),o},o=f(i,this.records),this.views[r]=o,o)},storage:function(e,t,n){var r=!1,i=this,s=n==="session"&&typeof sessionStorage!="undefined",o,u,a;if(!/number|object|string/.test(typeof e)||!/get|remove|set/.test(t))throw Error(T.error.invalidArguments);r=d.number_string.test(e)||e.hasOwnProperty("key")&&!e.hasOwnProperty("parentNode"),r&&!(e instanceof Object)&&(e=this.get(e)),u=r?e.key:e.parentNode.id;switch(t){case"get":o=s?sessionStorage.getItem(u):localStorage.getItem(u);if(o===null)throw Error(T.error.invalidArguments);o=x.decode(o),r?this.set(u,o,!0):(D.merge(this,o),v.each(i.records,function(e,t){i.records[t]=i.record(e.key,e.data)})),o=r?e:this;break;case"remove":s?sessionStorage.removeItem(u):localStorage.removeItem(u),o=this;break;case"set":a=x.encode(r?e.data:{total:this.total,keys:this.keys,records:this.records}),s?sessionStorage.setItem(u,a):localStorage.setItem(u,a),o=this}return o},sync:function(e,t){if(this.uri===null||this.uri.isEmpty())throw Error(T.error.invalidArguments);e=e===!0;var n=this,r=n.parentNode,i=D.guid(!0),s=A.factory(),o,u;return s.then(function(i){if(typeof i!="object")throw Error(T.error.expectedObject);var s=!1,o=A.factory(),u;return n.source!==null&&(i=D.walk(i,n.source)),i instanceof Array?u=i:D.iterate(i,function(e){!s&&e instanceof Array&&(s=!0,u=e)}),u===undefined&&(u=[i]),o.then(function(i){var s=[];return e&&n.reindex(),r.fire("afterDataSync",i),t instanceof O&&t.resolve(i),s},function(e){return n.clear(!0),r.fire("failedDataSync",e),t instanceof O&&t.reject(e),e}),n.batch("set",u,!0,1e3,o),i},function(e){return r.fire("failedDataSync",e),t instanceof O&&t.reject(e),e}),o=function(e){s.resolve(e)},u=function(e){s.reject(e)},r.fire("beforeDataSync"),this.callback!==null?g.jsonp(this.uri,o,u,{callback:this.callback}):g.request(this.uri,"GET",o,u,null,D.merge({withCredentials:this.credentials},this.headers)),this},teardown:function(){var e=this.uri,t,n;return e!==null&&(m.expire(e,!0),L.remove(e),n=this.parentNode.id+"DataExpire",D.clearTimers(n),t=this.get(),v.each(t,function(t){m.expire(e+"/"+t.key,!0),L.remove(e+"/"+t.key),D.iterate(t.data,function(e,t){if(e===null)return;e.hasOwnProperty("data")&&typeof e.data.teardown=="function"&&(L.remove(e.id),e.data.teardown())})})),this.clear(!0),this.parentNode.fire("afterDataTeardown"),this}},record:{methods:{del:function(e){return this.parentNode.del(this.key,!0,!1,e)},set:function(e,t,n){return this.parentNode.set(this.key,{key:t},!1,n),this}},factory:function(e,t){return D.extend(b.record.methods,{key:e,data:t})}},factory:function(e,t,n){return e=D.object(e),D.genId(e),typeof e.fire=="undefined"&&L.hook(e),e.fire("beforeDataStore"),e.data=D.extend(b.methods),e.data.parentNode=e,e.data.clear(),n instanceof Object&&D.merge(e.data,n),typeof t=="object"&&t!==null&&e.data.batch("set",t),e.fire("afterDataStore"),e}},w={methods:{page:function(e){if(isNaN(e))throw Error(T.error.invalidArguments);return this.pageIndex=e,this.refresh(),this},pages:function(){var e=this.element,t=l("#"+e.id+"-pages-top, #"+e.id+"-pages-bottom"),n=this.pageIndex,r=this.pagination,i=this.pageRange,s=k.round(k.half(i),"down"),o=n-s,u=n+s,a=this,f=w.pages.call(this),c=0,h,p,m;if(!d.top_bottom.test(r))throw Error(T.error.invalidArguments);return v.each(t,function(e){e!==undefined&&e.destroy()}),this.total===0||f===1?this:(o<1&&(h=o.diff(1),o+=h,u+=h),u>f&&(u=f,o=u-i+1,o<1&&(o=1)),v.each(r.explode(),function(r){t=e[r==="bottom"?"after":"before"]("ul",{"class":"list pages "+r,id:e.id+"-pages-"+r}),n>1?t.create("li").create("a",{"class":"first page","data-page":1}).html("&lt;&lt;").on("click",function(){a.page(this.data("page"))},"click"):t.create("li").create("span",{"class":"first page"}).html("&lt;&lt;"),n>1?t.create("li").create("a",{"class":"prev page","data-page":n-1}).html("&lt;").on("click",function(){a.page(this.data("page"))},"click"):t.create("li").create("span",{"class":"prev page"}).html("&lt;");for(r=o;r<=u;r++)r!==n?t.create("li").create("a",{"class":r===n?"current page":"page","data-page":r}).html(r).on("click",function(e){a.page(this.data("page"))},"click"):t.create("li").create("span",{"class":"page"}).html(r);n+1<=f?t.create("li").create("a",{"class":"next page","data-page":n+1}).html("&gt;").on("click",function(){a.page(this.data("page"))},"click"):t.create("li").create("span",{"class":"next page"}).html("&gt;"),n<f?t.create("li").create("a",{"class":"last page","data-page":f}).html("&gt;&gt;").on("click",function(){a.page(this.data("page"))},"click"):t.create("li").create("span",{"class":"last page"}).html("&gt;&gt;"),t.find("a.page").on("click",function(e){window.scrollTo(0,0)})}),this)},refresh:function(e){e=e!==!1;var t=this.element,n=typeof this.template=="object",r=!n&&String(this.template).replace(d.placeholder_bars,"")===this.store.key,i=[],s=[],o=this,u=typeof this.callback=="function",a=new RegExp,f=[],c=[],h,p,m;this.ready||(this.ready=!0,this.store.parentNode.on("afterDataSet",function(e){if(w.garbage(this.store.parentNode,t.id,"afterDataSet","set-"+t.id))return;this.refreshing||this.refresh()},"set-"+t.id,this)),this.element.fire("beforeDataListRefresh"),this.refreshing=!0,n?h=function(e){var t=x.encode(o.template);return t=t.replace("{{"+o.store.key+"}}",e.key),x.iterate(e.data,function(e,n){a.compile("{{"+n+"}}","g"),t=t.replace(a,x.encode(e).replace(d.quotes,""))}),t=x.decode(t.replace(d.placeholders,o.placeholder)),{li:t}}:h=function(e){var t=String(o.template);return t=t.replace("{{"+o.store.key+"}}",e.key),D.iterate(e.data,function(e,n){a.compile("{{"+n+"}}","g"),t=t.replace(a,e)}),{li:t.replace(d.placeholders,o.placeholder)}},i=this.order.isEmpty()?this.store.get():this.store.sort(this.order,!1,this.sensitivity),v.each(i,function(e){o.filter!==null&&o.filter instanceof Object?D.iterate(o.filter,function(t,n){if(f.index(e.key)>-1)return;var r=0,i=new RegExp,u;t=_.explode(t),u=t.length;for(r=0;r<u;r++){i.compile(t[r],"i");if(n===o.store.key&&i.test(e.key)||e.data[n]!==undefined&&i.test(e.data[n])){f.push(e.key),s.push({key:e.key,template:h(e)});return}}}):s.push({key:e.key,template:h(e)})}),this.total=s.length;if(typeof this.pageIndex=="number"&&typeof this.pageSize=="number"){m=w.pages.call(this);if(this.pageIndex>m)return this.page(m);c=w.range.call(this),s=s.limit(c[0],c[1])}return e?(t.clear(),v.each(s,function(e){var n=t.tpl(e.template);n.data("key",e.key),u&&o.callback(n)})):(t.find("> li").addClass("hidden"),v.each(s,function(e){t.find("> li[data-key='"+e.key+"']").removeClass("hidden")})),d.top_bottom.test(this.pagination)&&typeof this.pageIndex=="number"&&typeof this.pageSize=="number"?this.pages():(l("#"+this.element.id+"-pages-top, #"+this.element.id+"-pages-bottom"),p!==undefined&&p.destroy()),this.refreshing=!1,this.element.fire("afterDataListRefresh",t),this},sort:function(e,t){if(typeof e!="string")throw Error(T.error.invalidArguments);return this.element.fire("beforeDataListSort"),this.order=e,this.sensitivity=t||"ci",this.refresh(),this.element.fire("afterDataListSort"),this},teardown:function(){var e=this.element.id;return this.store.parentNode.un("afterDataDelete","delete-"+e,"afterDataRetrieve, afterDataSync","refresh-"+e),this}},factory:function(e,t,n,r){var i=[t],s={},o={},u,a;if(e instanceof Element&&typeof t=="object"&&!!d.string_object.test(typeof n))return u=e.fire("beforeDataList").create("ul",{"class":"list",id:t.parentNode.id+"-datalist"}),o={callback:null,filter:null,pageIndex:1,pageSize:null,pageRange:5,pagination:"bottom",placeholder:"",order:"",ready:!1,refreshing:!1,template:n,total:0,sensitivity:"ci"},s=D.extend(w.methods,o),s.element=u,s.store=i[0],r instanceof Object&&D.merge(s,r),s.store.parentNode.on("afterDataDelete",function(e){if(w.garbage(this.store.parentNode,u.id,"afterDataDelete","delete-"+u.id))return;typeof this.pageIndex=="number"&&typeof this.pageSize=="number"?this.refresh():(this.element.fire("beforeDataListRefresh"),this.element.find("> li[data-key='"+e.key+"']").destroy(),this.element.fire("afterDataListRefresh"))},"delete-"+u.id,s),a=function(){var e=this.store.retrieve?"afterDataRetrieve":"afterDataSync";this.store.parentNode.once(e,function(){if(w.garbage(this.store.parentNode,u.id,e,"refresh-"+u.id))return;!this.refreshing&&(e==="afterDataRetrieve"||this.store.loaded)&&this.refresh(),a.call(this)},"refresh-"+u.id,this),w.now.call(s)&&s.refresh()},w.now.call(s)?a.call(s):s.store.parentNode.once(s.store.parentNode.retrieve?"afterDataRetrieve":"afterDataSync",a,"initialize-"+u.id,s),e.fire("afterDataList",u),s;throw Error(T.error.invalidArguments)},garbage:function(e,t,n,r){var i=!1;return l("#"+t)===undefined&&(e.un(n,r),i=!0),i},now:function(){return this.store.uri===null||this.store.loaded},pages:function(){if(isNaN(this.pageSize))throw Error(T.error.invalidArguments);return k.round(this.total/this.pageSize,"up")},range:function(){var e=this.pageIndex*this.pageSize-this.pageSize,t=this.pageSize;return[e,t]}},E={attr:function(e,t,n){typeof n=="string"&&(n=_.trim(n));var r;e=D.object(e);if(e instanceof Element&&t!=undefined&&!String(t).isEmpty()){D.genId(e,!0);if(d.checked_disabled.test(t)&&n===undefined)return e[t];if(d.checked_disabled.test(t)&&n!==undefined)e[t]=n;else{if(e.nodeName==="SELECT"&&t==="selected"&&n===undefined)return l("#"+e.id+' option[selected="selected"]')[0]||l("#"+e.id+" option")[0];if(e.nodeName==="SELECT"&&t==="selected"&&n!==undefined)r=l("#"+e.id+' option[selected="selected"]')[0],r!==undefined&&(r.selected=!1,r.removeAttribute("selected")),r=l("#"+e.id+' option[value="'+n+'"]')[0],r.selected=!0,r.setAttribute("selected","selected");else{if(n===undefined)return e.getAttribute(t);n===null?e.removeAttribute(t):e.setAttribute(t,n)}}return e}throw Error(T.error.invalidArguments)},clear:function(e){e=D.object(e);if(e instanceof Element)return typeof e.reset=="function"?e.reset():e.value!==undefined?e.update({innerHTML:"",value:""}):e.update({innerHTML:""}),e;throw Error(T.error.invalidArguments)},create:function(e,n,r,i){if(e===undefined||String(e).isEmpty())throw Error(T.error.invalidArguments);var s,u,a;r!==undefined?r=D.object(r):n===undefined||typeof n!="string"&&n.childNodes===undefined?r=t.body:r=D.object(n);if(r===undefined)throw Error(T.error.invalidArguments);return a=!(r instanceof Element),u=n!==undefined&&typeof n!="string"&&n.childNodes===undefined&&n.id!==undefined&&l("#"+n.id)===undefined?n.id:D.genId(undefined,!0),n!==undefined&&n.id!==undefined&&delete n.id,L.fire(o,"beforeCreate",u),a&&r.parentNode!==null&&r.parentNode.fire("beforeCreate",u),s=d.svg.test(e)?t.createElementNS("http://www.w3.org/2000/svg","svg"):t.createElement(e),s.id=u,typeof n=="object"&&n.childNodes===undefined&&E.update(s,n),i===undefined||i==="last"?r.appendChild(s):i==="first"?r.prependChild(s):i==="after"?(i={},i.after=r,r=r.parentNode,r.insertBefore(s,i.after.nextSibling)):i.after!==undefined?r.insertBefore(s,i.after.nextSibling):i==="before"?(i={},i.before=r,r=r.parentNode,r.insertBefore(s,i.before)):i.before!==undefined?r.insertBefore(s,i.before):r.appendChild(s),a?a&&r.parentNode!==null&&r.parentNode.fire("afterCreate",s):r.fire("afterCreate",s),L.fire(o,"afterCreate",s),s},css:function(e,t,n){e=D.object(e),t=t.indexOf("-")>-1?_.toCamelCase(t,!0):t;var r,i;return n!==undefined?(e.style[t]=n,i=e):i=e.style[t],i},data:function(e,t,n){var r;return e=D.object(e),n!==undefined?(typeof e.dataset=="object"?e.dataset[t]=n:E.attr(e,"data-"+t,n),r=e):r=D.coerce(typeof e.dataset=="object"?e.dataset[t]:E.attr(e,"data-"+t)),r},destroy:function(e){e=D.object(e);if(e instanceof Element)return L.fire(o,"beforeDestroy",e),L.remove(e.id),e.parentNode!==null&&e.parentNode.removeChild(e),L.fire(o,"afterDestroy",e.id),undefined;throw Error(T.error.invalidArguments)},disable:function(e){e=D.object(e);if(e instanceof Element)return typeof e.disabled=="boolean"&&!e.disabled&&(e.disabled=!0),e;throw Error(T.error.invalidArguments)},enable:function(e){e=D.object(e);if(e instanceof Element)return typeof e.disabled=="boolean"&&e.disabled&&(e.disabled=!1),e;throw Error(T.error.invalidArguments)},find:function(e,t){var n=[];e=D.object(e);if(e instanceof Element&&typeof t=="string")return D.genId(e,!0),v.each(t.explode(),function(t){n=n.concat(l("#"+e.id+" "+t))}),n;throw Error(T.error.invalidArguments)},has:function(e,t){var n=E.find(e,t);return!isNaN(n.length)&&n.length>0},hasClass:function(e,t){e=D.object(e);if(e instanceof Element)return e.classList.contains(t);throw Error(T.error.invalidArguments)},hide:function(e){e=D.object(e);if(e instanceof Element)return typeof e.hidden=="boolean"?e.hidden=!0:(e["data-display"]=e.style.display,e.style.display="none"),e;throw Error(T.error.invalidArguments)},hidden:function(e){e=D.object(e);if(e instanceof Element)return e.style.display==="none"||typeof e.hidden=="boolean"&&e.hidden;throw Error(T.error.invalidArguments)},is:function(e,t){e=D.object(e);if(e instanceof Element&&typeof t=="string")return/^:/.test(t)?v.contains(E.find(e.parentNode,e.nodeName.toLowerCase()+t),e):(new RegExp(t,"i")).test(e.nodeName);throw Error(T.error.invalidArguments)},klass:function(e,t,n){var r;e=D.object(e);if(e instanceof Element&&!String(t).isEmpty())return n=n!==!1,t=t.explode(" "),n?v.each(t,function(t){e.classList.add(t)}):v.each(t,function(t){if(t==="*")return v.each(e.classList,function(e){this.remove(e)}),!1;e.classList.remove(t)}),e;throw Error(T.error.invalidArguments)},position:function(n){n=D.object(n);if(n instanceof Element){var r,i,s,o;r=i=0,o=n.offsetWidth,s=n.offsetHeight;if(n.offsetParent){i=n.offsetTop,r=n.offsetLeft;while(n=n.offsetParent)r+=n.offsetLeft,i+=n.offsetTop}return{top:i,right:t.documentElement.clientWidth-(r+o),bottom:t.documentElement.clientHeight+e.scrollY-(i+s),left:r}}throw Error(T.error.invalidArguments)},prependChild:function(e,t){e=D.object(e);if(e instanceof Element&&t instanceof Element)return e.childNodes.length===0?e.appendChild(t):e.insertBefore(t,e.childNodes[0]);throw Error(T.error.invalidArguments)},serialize:function(e,t,n){e=D.object(e),t=t===!0,n=n!==!1;var r=[],i={},s;return e instanceof Array?v.each(e,function(e){r.push(D.object(e))}):r=e.nodeName==="FORM"?typeof e.elements!="undefined"?v.cast(e.elements):e.find("button, input, select, textarea"):[e],v.each(r,function(e){e.nodeName==="FORM"?D.merge(i,x.decode(E.serialize(e))):typeof i[e.name]=="undefined"&&(i[e.name]=E.val(e))}),t?(s="",D.iterate(i,function(e,t){n?s+="&"+encodeURIComponent(t)+"="+encodeURIComponent(e):s+="&"+t+"="+e,s=s.replace(/^&/,"?")})):s=x.encode(i),s},show:function(e){e=D.object(e);if(e instanceof Element)return typeof e.hidden=="boolean"?e.hidden=!1:e.style.display=e.getAttribute("data-display")!==null?e.getAttribute("data-display"):"inherit",e;throw Error(T.error.invalidArguments)},size:function(e){e=D.object(e);var t,n,r;if(e instanceof Element)return t=function(e){return isNaN(e)?0:parseInt(e)},n=e.offsetHeight+t(e.style.paddingTop)+t(e.style.paddingBottom)+t(e.style.borderTop)+t(e.style.borderBottom),r=e.offsetWidth+t(e.style.paddingLeft)+t(e.style.paddingRight)+t(e.style.borderLeft)+t(e.style.borderRight),{height:n,width:r};throw Error(T.error.invalidArguments)},text:function(e,t){e=D.object(e);if(e instanceof Element){var n=e.textContent!==undefined?"textContent":"innerText",r={},i=!1;return typeof t!="undefined"&&(i=!0,r[n]=t),i?E.update(e,r):e[n]}throw Error(T.error.invalidArguments)},toggleClass:function(e,t){e=D.object(e);if(e instanceof Element)return e.classList.toggle(t),e;throw Error(T.error.invalidArguments)},update:function(e,t){e=D.object(e),t=t||{};if(e instanceof Element)return D.iterate(t,function(t,n){if(d.element_update.test(n))e[n]=t;else if(n==="class")t.isEmpty()?e.removeClass("*"):e.addClass(t);else if(n.indexOf("data-")===0)E.data(e,n.replace("data-",""),t);else if(n==="id"){var r=L.listeners;r[e.id]!==undefined&&(r[n]=D.clone(r[e.id]),delete r[e.id])}else e.attr(n,t)}),e;throw Error(T.error.invalidArguments)},val:function(e,t){var n=null,r;e=D.object(e);if(e instanceof Element){if(t===undefined){if(d.radio_checkbox.test(e.type)){if(e.name.isEmpty())throw Error(T.error.expectedProperty);r=l("input[name='"+e.name+"']"),v.each(r,function(e){if(n!==null)return;e.checked&&(n=e.value)})}else d.select.test(e.type)?n=e.options[e.selectedIndex].value:n=typeof e.value!="undefined"?e.value:E.text(e);typeof n=="string"&&(n=n.trim())}else t=String(t),e.fire("beforeValue"),d.radio_checkbox.test(e.type)?(r=l("input[name='"+e.name+"']"),v.each(r,function(e){if(e.value===t)return e.checked=!0,n=e,!1})):d.select.test(e.type)?v.each(E.find(e,"> *"),function(e){if(e.value===t)return e.selected=!0,n=e,!1}):e.value!==undefined?e.value=t:E.text(e,t),e.fire("afterValue"),n=e;return n}throw Error(T.error.invalidArguments)}},S={methods:{init:function(){return L.add(this.element,"keyup",this.update,"filter",this),L.add(this.element,"afterValue",this.update,"value",this),this},set:function(e){var t={};if(typeof e!="string"||String(e).isEmpty())throw Error(T.error.invalidArguments);return v.each(e.explode(),function(e){t[e]=""}),this.filters=t,this},teardown:function(){return L.remove(this.element,"keyup","filter"),L.remove(this.element,"afterValue","value"),this},update:function(e){var t=this;return D.clearTimers(this.element.id+"Debounce"),D.defer(function(){var e=t.element.val();e.isEmpty()?t.datalist.filter=null:(D.iterate(t.filters,function(t,n){this[n]="^"+e.escape().replace("\\*",".*")}),t.datalist.filter=t.filters),t.datalist.pageIndex=1,t.datalist.refresh()},this.debounce,this.element.id+"Debounce"),this}},factory:function(e,t,n,r){r=r||250;var i={},s=[t];if(!(e instanceof Element)||t!==undefined&&t.store===undefined||typeof n!="string"||String(n).isEmpty())throw Error(T.error.invalidArguments);return i=D.extend(S.methods,{filters:{}}),i.datalist=s[0],i.debounce=r,i.element=e,i.set(n),i.init()}},x={decode:function(e,t){try{return JSON.parse(e)}catch(n){return t!==!0&&h(n,arguments,this),undefined}},encode:function(e,t){try{return JSON.stringify(e)}catch(n){return t!==!0&&h(n,arguments,this),undefined}}},T={common:{back:"Back",cancel:"Cancel",clear:"Clear",close:"Close",cont:"Continue",create:"Create",del:"Delete",edit:"Edit",find:"Find",gen:"Generate",go:"Go",loading:"Loading",next:"Next",login:"Login",ran:"Random",reset:"Reset",save:"Save",search:"Search",submit:"Submit"},day:{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},error:{databaseNotOpen:"Failed to open the Database, possibly exceeded Domain quota",databaseNotSupported:"Client does not support local database storage",databaseWarnInjection:"Possible SQL injection in database transaction, use the &#63; placeholder",elementNotCreated:"Could not create the Element",elementNotFound:"Could not find the Element",expectedArray:"Expected an Array",expectedArrayObject:"Expected an Array or Object",expectedBoolean:"Expected a Boolean value",expectedNumber:"Expected a Number",expectedProperty:"Expected a property, and it was not set",expectedObject:"Expected an Object",invalidArguments:"One or more arguments is invalid",invalidDate:"Invalid Date",invalidFields:"The following required fields are invalid: ",invalidRoute:"The route could not be found",notAvailable:"Requested method is not available",notSupported:"This feature is not supported by this platform",propertyNotFound:"Could not find the requested property",promisePending:"The promise cannot be resolved while pending result",promiseResolved:"The promise has been resolved: {{outcome}}",serverError:"Server error has occurred",serverForbidden:"Forbidden to access URI",serverInvalidMethod:"Method not allowed",serverUnauthorized:"Authorization required to access URI",upgrade:"Your browser is too old to use abaaso, please upgrade"},month:{0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"}},N={clear:function(t){return t=t||"all",L.remove(e,"message","message",t)},send:function(e,t){try{e.postMessage(t,"*")}catch(n){h(n,arguments,this)}return e},recv:function(t,n){return n=n||"all",L.add(e,"message",t,"message",e,n)}},C={enabled:!1,log:!1,diff:{x:null,y:null},pos:{x:null,y:null},prev:{x:null,y:null},track:function(e){var n=o.mouse,e="mousemove",r="tracking";if(!s)if(typeof e=="object"){var i=t[g.ie&&g.version<9?"documentElement":"body"],u=e.pageX?e.pageX:i.scrollLeft+e.clientX,a=e.pageY?e.pageY:i.scrollTop+e.clientY,f=!1;n.pos.x!==u&&(f=!0),l.mouse.prev.x=n.prev.x=Number(n.pos.x),l.mouse.pos.x=n.pos.x=u,l.mouse.diff.x=n.diff.x=n.pos.x-n.prev.x,n.pos.y!==a&&(f=!0),l.mouse.prev.y=n.prev.y=Number(n.pos.y),l.mouse.pos.y=n.pos.y=a,l.mouse.diff.y=n.diff.y=n.pos.y-n.prev.y,f&&n.log&&D.log(n.pos.x+" ["+n.diff.x+"], "+n.pos.y+" ["+n.diff.y+"]")}else typeof e=="boolean"&&(e?L.add(t,e,o.mouse.track,r):L.remove(t,e,r),l.mouse.enabled=n.enabled=e);return n}},k={diff:function(e,t){if(isNaN(e)||isNaN(t))throw Error(T.error.expectedNumber);return Math.abs(e-t)},even:function(e){return e%2===0},format:function(e,t,n){if(isNaN(e))throw Error(T.error.expectedNumber);e=e.toString(),t=t||",",n=n||3;var r=e.indexOf(".")>-1?"."+e.replace(d.number_format_1,""):"",i=e.replace(d.number_format_2,"").split("").reverse(),s=Math.floor(i.length/n),o=1,u,a;for(a=0;a<s;a++)u=o===1?n:n*o+(o===2?1:o-1),i.splice(u,0,t),o++;return i=i.reverse().join(""),i.charAt(0)===t&&(i=i.substring(1)),i+r},half:function(e,t){return t!==undefined?e/t===.5:e/2},odd:function(e){return e%2!==0},parse:function(e,t){return t===null&&(t=undefined),isNaN(t)?Number(e):parseInt(e,t)},random:function(e){return e=e||100,Math.floor(Math.random()*(e+1))},round:function(e,t){return d.down_up.test(t)||(t="down"),Math[t==="down"?"floor":"ceil"](e)}},L={listeners:{},alisteners:{},elisteners:{},clisteners:{},log:!1,queue:[],silent:!1,ignore:!1,add:function(e,t,n,r,i,s){e=D.object(e),i=i||e,s=s||o.state.current;if(e instanceof Array)return v.each(e,function(e){L.add(e,t,n,r,i,s)});t!==undefined&&(t=t.explode());if(r===undefined||!String(r).isEmpty())r=D.guid(!0);var u=null,a=L.listeners,f=L.alisteners,l=L.elisteners,c=L.clisteners,h=d.observer_globals,p=d.observer_allowed,m=L.id(e),g=!1,y=o.state.current,b,w;if(m===undefined||t===null||t===undefined||typeof n!="function")throw Error(T.error.invalidArguments);return a[m]===undefined&&(a[m]={},f[m]={},c[m]={}),v.each(t,function(t){var o=m+"_"+t;a[m][t]===undefined&&(a[m][t]={},f[m][t]={},c[m][t]=0),a[m][t][s]===undefined&&(a[m][t][s]={},f[m][t][s]=[]),u=h.test(m)||!d.slash_forward.test(m)&&m!=="abaaso"?e:null,u!==null&&u!==undefined&&t.toLowerCase()!=="afterjsonp"&&l[o]===undefined&&(h.test(m)||typeof u.listeners=="function")&&(b=typeof u.addEventListener=="function",w=typeof u.attachEvent=="object"||b,w&&(l[o]=function(n){p.test(n.type)||D.stop(n),L.fire(e,t,n)},u[b?"addEventListener":"attachEvent"]((b?"":"on")+t,l[o],!1))),a[m][t][s][r]={fn:n,scope:i},L.sync(m,t,s),c[m][t]++}),e},discard:function(e){return L.ignore=e,e},fire:function(e,t){e=D.object(e);var n=!1,r=v.cast(arguments).remove(0,1),s,r,u,a,f,c,h;if(L.ignore)return e;if(e instanceof Array)return r=[e[i],t].concat(r),v.each(e,function(e){L.fire.apply(L,r)});s=L.id(e);if(s===undefined||t===undefined)throw Error(T.error.invalidArguments);return L.silent?L.queue.push({obj:e,event:t}):(u=o.state.current,a=l.logging||o.logging,v.each(t.explode(),function(t){a&&D.log(s+" firing "+t),h=L.list(e,t,L.alisteners),h.all!==undefined&&v.each(h.all,function(e){var t=e.fn.apply(e.scope,r);if(t===!1)return n=!0,t}),!n&&u!=="all"&&h[u]!==undefined&&v.each(h[u],function(e){return e.fn.apply(e.scope,r)})})),e},hook:function(e){return e.fire=function(){return L.fire.apply(L,[this].concat(v.cast(arguments)))},e.listeners=function(e){return L.list(this,e)},e.on=function(e,t,n,r,i){return L.add(this,e,t,n,r,i)},e.once=function(e,t,n,r,i){return L.once(this,e,t,n,r,i)},e.un=function(e,t){return L.remove(this,e,t)},e},id:function(n){var r;return n===o?r="abaaso":n===e?r="window":n===!s&&t?r="document":n===!s&&t.body?r="body":(D.genId(n),r=n.id||(typeof n.toString=="function"?n.toString():n)),r},list:function(e,t,n){e=D.object(e);var r=n||L.listeners,i=L.id(e),s;return r[i]===undefined&&t===undefined?s={}:r[i]===undefined||t!==undefined&&!String(t).isEmpty()?r[i]!==undefined&&r[i][t]!==undefined?s=r[i][t]:s={}:s=r[i],s},once:function(e,t,n,r,i,s){var u=r||D.genId();e=D.object(e),i=i||e,s=s||o.state.current;if(e===undefined||t===null||t===undefined||typeof n!="function")throw Error(T.error.invalidArguments);return e instanceof Array?v.each(e,function(e){L.once(e,t,n,r,i,s)}):(L.add(e,t,function(){n.apply(i,arguments),L.remove(e,t,u,s)},u,i,s),e)},pause:function(e){return e===!0?L.silent=e:e===!1&&(L.silent=e,v.each(L.queue,function(e){L.fire(e.obj,e.event)}),L.queue=[]),e},remove:function(e,t,n,r){e=D.object(e),r=r||o.state.current;if(e instanceof Array)return v.each(e,function(e){L.remove(e,t,n,r)});var i=null,s=L.listeners,u=L.alisteners,a=L.elisteners,f=L.clisteners,l=L.id(e),c,h,p;return h=function(t,n){var r=!1;c=typeof e.addEventListener=="function",p=typeof e.attachEvent=="object"||c,t===null?r=!0:typeof n=="number"&&(f[l][t]=f[l][t]-n)===0&&(r=!0),r&&p&&(e[c?"removeEventListener":"detachEvent"]((c?"":"on")+t,a[l+"_"+t],!1),delete a[l+"_"+t])},l===undefined||s[l]===undefined?e:(t===undefined||t===null?(delete s[l],delete u[l],delete f[l],(d.observer_globals.test(l)||typeof l.listeners=="function")&&h(null)):v.each(t.explode(),function(t){var i=!1;if(s[l][t]===undefined)return e;n===undefined?((d.observer_globals.test(l)||typeof l.listeners=="function")&&h(t,v.keys(s[l][t][r]).length),s[l][t][r]={},i=!0):s[l][t][r][n]!==undefined&&(h(t,1),delete s[l][t][r][n],i=!0),i&&L.sync(l,t,r)}),e)},sum:function(e){var t={},n;return e!==undefined?(e=D.object(e),n=L.id(e),t=D.clone(L.clisteners[n])):t=D.clone(L.clisteners),t},sync:function(e,t,n){L.alisteners[e][t][n]=v.cast(L.listeners[e][t][n])}},A={state:{broken:"failed",initial:"unfulfilled",pending:"pending",resolved:"fulfilled"},methods:{reject:function(e){return A.resolve.call(this,A.state.broken,e)},resolve:function(e){return A.resolve.call(this,A.state.resolved,e)},resolved:function(){return this.state===A.state.broken||this.state===A.state.resolved},then:function(e,t){var n=this,r=A.factory(),i;return i=function(i){var s=i?e:t,o,u;try{if(typeof s!="function")throw n.outcome;o=s(n.outcome),!(o instanceof O)&&!i&&r.state===A.state.initial&&r.fulfill.length>0&&(n.state=A.state.resolved)}catch(a){o=a.message||a,n.state=A.state.broken}finally{return o instanceof O?(n.state=A.state.pending,n.outcome=null,o.parentNode=n,o.then(function(e){n.state=A.state.initial,n.resolve(e)},function(e){n.state=A.state.initial,n.reject(e)}),o):(u=o,r.fulfill.length===0&&r.error.length===0?o=n:n.state===A.state.resolved&&r.fulfill.length>0?o=r.resolve(u):n.state===A.state.broken&&r.error.length>0&&(o=r.reject(u)),n.state=o.state,n.outcome=o.outcome,n.outcome)}},typeof e=="function"&&A.vouch.call(this,A.state.resolved,function(){return i(!0)}),typeof t=="function"&&A.vouch.call(this,A.state.broken,function(){return i(!1)}),r.parentNode=n,r}},factory:function(){return new O},resolve:function(e,t){var n=e===A.state.broken?"error":"fulfill",r=this,i=!1,s;if(this.state===A.state.pending)throw Error(T.error.promisePending);if(this.state!==A.state.initial)throw Error(T.error.promiseResolved.replace("{{outcome}}",this.outcome));this.state=e,this.outcome=t,v.each(this[n],function(e){s=e.call(this,t);if(s instanceof O)return i=!0,r.state=A.state.initial,r.outcome=null,!1});if(!i){this.error=[],this.fulfill=[];if(this.parentNode!==null&&this.parentNode.state===A.state.initial){s=this.parentNode[e===A.state.resolved?"resolve":"reject"](this.outcome);if(s instanceof O)return s}return typeof Object.freeze=="function"&&Object.freeze(this),this}return s},vouch:function(e,t){if(String(e).isEmpty())throw Error(T.error.invalidArguments);return this.state===A.state.initial?this[e===A.state.resolved?"fulfill":"error"].push(t):this.state===e&&t(this.outcome),this}};O.prototype=A.methods;var M={current:"",reg:new RegExp,routes:{},method:function(e){return d.route_methods.test(e)?e.toLowerCase():"all"},del:function(e,t,n){n=n||"all",t=M.method(t);var r=e==="error";if(r&&t!=="all"||!r&&M.routes[n][t].hasOwnProperty(e))return o.route.initial===e&&(o.route.initial=null),delete M.routes[n][t][e];throw Error(T.error.invalidArguments)},hash:function(e){var n="";return s||(e===undefined?n=t.location.hash.replace(d.route_bang,""):(n=e.replace(d.route_bang,""),t.location.hash="!/"+n)),n},hostname:function(e){return M.routes.hasOwnProperty(e)||(M.routes[e]={all:{},"delete":{},get:{},post:{},put:{}}),M.routes[e]},init:function(){var e=t.location.hash;e.isEmpty()?M.hash(o.route.initial!==null?o.route.initial:v.cast(M.routes.all.all,!0).remove("error")[0]):M.load(e)},list:function(e,t){t=t||"all";var n;return s?e!==undefined&&M.routes.hasOwnProperty(t)?n=v.cast(M.routes[t][M.method(e)],!0):(n=[],M.routes.hasOwnProperty(t)&&D.iterate(M.routes[t],function(e,t){n[t]=[],D.iterate(e,function(e,r){n[t].push(r)})})):n=v.cast(M.routes.all.all,!0),!s&&t!=="all"&&D.iterate(M.routes.all,function(e,t){n[t]===undefined&&(n[t]=[]),D.iterate(e,function(e,r){n[t].push(r)})}),n},load:function(e,t,n,r){n=n||"all",r=r||"all";var i="",u="",a=!0,f=M.method(n.method||n),l,c;return d.route_nget.test(f)&&(f="get"),e=e.replace(d.route_bang,""),s||(o.route.current=e),l=function(e,t,n){M.routes[e][t][n]!==undefined?(i=n,u=t):t!=="all"&&M.routes[e].all[n]!==undefined?(i=n,u="all"):(D.iterate(M.routes[e][t],function(e,r){return c(r,t,n)}),i.isEmpty()&&t!=="all"&&D.iterate(M.routes[e].all,function(e,t){return c(t,"all",n)}))},c=function(e,t,n){if(D.compile(M.reg,"^"+e+"$","i")&&M.reg.test(n))return i=e,u=t,!1},r!=="all"&&!M.routes.hasOwnProperty(r)&&(r="all"),l(r,f,e),i.isEmpty()&&(r!=="all"&&(r="all",l(r,f,e)),i.isEmpty()&&(i="error",u="all",a=!1)),M.routes[r][u][i](t||i,n),a},reset:function(){M.routes={all:{all:{error:function(){if(!!s)throw Error(T.error.invalidRoute);if(M.hash()==="")return history.go(-1);D.error(T.error.invalidRoute),o.route.initial!==null&&M.hash(o.route.initial)}},"delete":{},get:{},put:{},post:{}}}},server:function(e,t,n){var r,i,c;if(!s)return null;e=e||{},n=n===!0||e.port===443,r=function(e,t){var n=f.parse(e.url),r=e.headers.host.replace(d.header_replace,"");M.load(n.pathname,t,e,r)},i=function(e){h(e,this,arguments),typeof t=="function"&&t(e)};if(!s)throw Error(T.error.notSupported);return l.route.enabled=o.route.enabled=!0,e.host=e.host||undefined,e.port=parseInt(e.port)||8e3,c=n?a.createServer(e,r).on("error",i).listen(e.port):u.createServer(r).on("error",i).listen(e.port,e.host),c},set:function(e,t,n,r){r=s?r||"all":"all",n=s?M.method(n):"all";if(typeof e!="string"||e.isEmpty()||typeof t!="function")throw Error(T.error.invalidArguments);return M.hostname(r)[n][e]=t,!0}},_={capitalize:function(e){return e=_.trim(e),e.charAt(0).toUpperCase()+e.slice(1)},escape:function(e){return e.replace(d.escape,"\\$&")},explode:function(e,t){if(t===undefined||t.toString()==="")t=",";return _.trim(e).split(new RegExp("\\s*"+t+"\\s*"))},hyphenate:function(e,t){var n;return t=t===!0,n=_.trim(e).replace(d.spaces,"-"),t&&(n=n.replace(d.caps,"-$1").toLowerCase()),n},singular:function(e){return d.plural.test(e)?e.slice(0,-1):e},toCamelCase:function(e){var t=_.trim(e).toLowerCase().split(d.space_hyphen),n=[];return v.each(t,function(e,t){e=_.trim(e);if(e.isEmpty())return;n.push(t===0?e:_.capitalize(e))}),n.join("")},trim:function(e){return e.replace(d.whitespace,"")},uncapitalize:function(e){return e=_.trim(e),e.charAt(0).toLowerCase()+e.slice(1)}},D={timer:{},$:function(e,n){if(s||e===undefined)return undefined;var r=[],i=[],o=[];return r=_.explode(_.trim(e)),n=n===!0,v.each(r,function(e){var r,i;d.selector_complex.test(e)?(i=v.last(e.split(" ").filter(function(e){if(!e.isEmpty()&&e!==">")return!0})),d.hash.test(i)&&!d.selector_many.test(i)?r=t.querySelector(e):(r=t.querySelectorAll(e),n||(r=v.cast(r)))):d.hash.test(e)&&!d.selector_many.test(e)?r=t.querySelector(e):(r=t.querySelectorAll(e),n||(r=v.cast(r))),r!==null&&o.push(r)}),v.each(o,function(e){i=i.concat(e)}),d.hash.test(e)&&!d.selector_many.test(e)&&!d.selector_complex.test(e)&&(i=i[0]),i},alias:function(e,t){var n=e,r=t;return D.iterate(r,function(e,t){var i,s;e instanceof RegExp||typeof e!="function"?e instanceof RegExp||e instanceof Array||!(e instanceof Object)?(i=function(){return r[t]},s=function(e){r[t]=e},D.property(n,t,{enumerable:!0,get:i,set:s,value:r[t]})):(n[t]===undefined&&(n[t]={}),D.alias(n[t],r[t])):n[t]=e.bind(n[t])}),e},clearTimers:function(e){if(e===undefined||String(e).isEmpty())throw Error(T.error.invalidArguments);D.timer[e]!==undefined&&(clearTimeout(D.timer[e]),delete D.timer[e]),l.repeating[e]!==undefined&&(clearTimeout(l.repeating[e]),delete l.repeating[e])},clone:function(e){var t;return e instanceof Array?[].concat(e):typeof e=="boolean"?Boolean(e):typeof e=="function"?e:typeof e=="number"?Number(e):typeof e=="string"?String(e):!g.ie&&!s&&e instanceof Document?B.decode(B.encode(e)):e instanceof Object?(t=x.decode(x.encode(e)),t!==undefined&&e.hasOwnProperty("prototype")&&(t.prototype=e.prototype),t):e},coerce:function(e){var t=D.clone(e),n;return isNaN(k.parse(t))?d.string_boolean.test(t)?t=d.string_true.test(t):t==="undefined"?t=undefined:t==="null"?t=null:(n=x.decode(t,!0))&&n!==undefined&&(t=n):t=k.parse(t),t},compile:function(e,t,n){return e.compile(t,n),!0},css:function(e,n){var r,i;return r=l("head")[0].create("style",{type:"text/css",media:n||"print, screen"}),r.styleSheet?r.styleSheet.cssText=e:(i=t.createTextNode(e),r.appendChild(i)),r},debounce:function(t,n,r){if(typeof t!="function")throw Error(T.error.invalidArguments);return n=n||1e3,r=r||e,function(){D.defer(function(){t.apply(r,arguments)},n)}},define:function(e,t,n){e=e.split(".");var r=n,i=e.length;return n===undefined&&(n=this===l?o:this),t===undefined&&(t=null),v.each(e,function(n,s){var o=s+1<i&&!isNaN(parseInt(e[s+1])),u=t;isNaN(parseInt(n))||(n=parseInt(n)),r[n]===undefined?r[n]=o?[]:{}:r[n]instanceof Object&&o?r[n]=v.cast(r[n]):r[n]instanceof Object?void 0:r[n]instanceof Array&&!o?r[n]=r[n].toObject():r[n]={},s+1===i?r[n]=u:r=r[n]}),n},defer:function(e,t,n){var r;return t=t||0,n=n||D.guid(!0),r=function(){clearTimeout(D.timer[n]),delete D.timer[n],e()},D.timer[n]=setTimeout(r,t),n},domId:function(e){return"a"+e.replace(/-/g,"").slice(1)},error:function(e,t,n,r){var i;return r=r===!0,i={arguments:t,message:e.message||e,number:e.number!==undefined?e.number&65535:undefined,scope:n,stack:e.stack||undefined,timestamp:(new Date).toUTCString(),type:e.type||"TypeError"},D.log(i.stack||i.message,r?"warn":"error"),l.error.log.push(i),L.fire(o,"error",i),undefined},extend:function(e,t){var n,r;if(e===undefined)throw Error(T.error.invalidArguments);return t===undefined&&(t={}),typeof Object.create=="function"?n=Object.create(e):(r=function(){},r.prototype=e,n=new r),D.merge(n,t),n},genId:function(e,t){t=t===!0;var n;if(e!==undefined&&(e.id!==undefined&&e.id!==""||e instanceof Array||e instanceof String||typeof e=="string"))return e;if(t){do n=D.domId(D.guid(!0));while(l("#"+n)!==undefined)}else n=D.domId(D.guid(!0));return typeof e=="object"?(e.id=n,e):n},guid:function(e){var t=function(){return((1+Math.random())*65536|0).toString(16).substring(1)},n=[8,9,"a","b"],r;return e=e===!0,r=(t()+t()+"-"+t()+"-4"+t().substr(0,3)+"-"+n[Math.floor(Math.random()*n.length)]+t().substr(0,3)+"-"+t()+t()+t()).toLowerCase(),e&&(r=r.replace(d.hyphen,"")),r},iterate:function(e,t){var n=Object.prototype.hasOwnProperty,r,i;if(typeof t!="function")throw Error(T.error.invalidArguments);for(r in e){if(!n.call(e,r))break;i=t.call(e,e[r],r);if(i===!1)break}return e},loading:function(e){var t=o.loading;e=D.object(e);if(e instanceof Array)return v.each(e,function(e){D.loading(e)});if(t.url===null)throw Error(T.error.elementNotFound);if(e===undefined)throw Error(T.error.invalidArguments);return t.image===undefined&&(t.image=new Image,t.image.src=t.url),e.clear(),e.create("div",{"class":"loading"}).create("img",{alt:T.common.loading,src:t.image.src}),e},log:function(e,t){t=t||"log";var n=!s||typeof e!="object";return console!==undefined&&console[t]((n?"["+(new Date).toLocaleTimeString()+"] ":"")+e),undefined},merge:function(e,t){return D.iterate(t,function(t,n){e[n]=D.clone(t)}),e},module:function(e,t){if(l[e]!==undefined||o[e]!==undefined||!t instanceof Object)throw Error(T.error.invalidArguments);return o[e]=t,typeof t=="function"?l[e]=!g.ie||g.version>8?o[e].bind(l[e]):o[e]:(l[e]={},D.alias(l[e],o[e])),l[e]},object:function(e){return typeof e=="object"?e:e.toString().charAt(0)==="#"?l(e):e},parse:function(e){var r={},i={};return s?r=f.parse(e):(r=t.createElement("a"),r.href=e),i={protocol:r.protocol,hostname:r.hostname,port:String(r.port).isEmpty()?"":parseInt(r.port),pathname:r.pathname,search:r.search,hash:r.hash,host:r.host},g.ie&&(i.protocol===":"&&(i.protocol=n.protocol),i.hostname.isEmpty()&&(i.hostname=n.hostname),i.host.isEmpty()&&(i.host=n.host),i.pathname.charAt(0)!=="/"&&(i.pathname="/"+i.pathname)),i},property:function(e,t,n){var r;if(n instanceof Object)return r=(!g.ie||g.version>8)&&typeof Object.defineProperty=="function",r&&n.value!==undefined&&n.get!==undefined&&delete n.value,r?Object.defineProperty(e,t,n):e[t]=n.value,e;throw Error(T.error.invalidArguments)},proto:function(e,t){var n,r={array:{add:function(e){return v.add(this,e)},addClass:function(e){return v.each(this,function(t){t.addClass(e)})},after:function(e,t){var n=[];return v.each(this,function(r){n.push(r.after(e,t))}),n},append:function(e,t){var n=[];return v.each(this,function(r){n.push(r.append(e,t))}),n},attr:function(e,t){var n=[];return v.each(this,function(r){n.push(r.attr(e,t))}),n},before:function(e,t){var n=[];return v.each(this,function(r){n.push(r.before(e,t))}),n},chunk:function(e){return v.chunk(this,e)},clear:function(){return!s&&this[0]instanceof Element?v.each(this,function(e){e.clear()}):v.clear(this)},clone:function(){return D.clone(this)},collect:function(e){return v.collect(this,e)},compact:function(){return v.compact(this)},contains:function(e){return v.contains(this,e)},create:function(e,t,n){var r=[];return v.each(this,function(i){r.push(i.create(e,t,n))}),r},css:function(e,t){return v.each(this,function(n){n.css(e,t)})},data:function(e,t){var n=[];return v.each(this,function(r){n.push(r.data(e,t))}),n},diff:function(e){return v.diff(this,e)},disable:function(){return v.each(this,function(e){e.disable()})},destroy:function(){return v.each(this,function(e){e.destroy()}),[]},each:function(e){return v.each(this,e)},empty:function(){return v.empty(this)},enable:function(){return v.each(this,function(e){e.enable()})},equal:function(e){return v.equal(this,e)},fill:function(e,t,n){return v.fill(this,e,t,n)},find:function(e){var t=[];return v.each(this,function(n){n.find(e).each(function(e){t.contains(e)||t.push(e)})}),t},fire:function(){var e=arguments;return v.each(this,function(t){L.fire.apply(L,e)})},first:function(){return v.first(this)},flat:function(){return v.flat(this)},genId:function(){return v.each(this,function(e){e.genId()})},get:function(e,t){return v.each(this,function(n){n.get(e,t)}),[]},has:function(e){var t=[];return v.each(this,function(n){t.push(n.has(e))}),t},hasClass:function(e){var t=[];return v.each(this,function(n){t.push(n.hasClass(e))}),t},hide:function(){return v.each(this,function(e){e.hide()})},html:function(e){if(e!==undefined)return v.each(this,function(t){t.html(e)});var t=[];return v.each(this,function(e){t.push(e.html())}),t},index:function(e){return v.index(this,e)},indexed:function(){return v.indexed(this)},intersect:function(e){return v.intersect(this,e)},is:function(e){var t=[];return v.each(this,function(n){t.push(n.is(e))}),t},isAlphaNum:function(){var e=[];return v.each(this,function(t){e.push(t.isAlphaNum())}),e},isBoolean:function(){var e=[];return v.each(this,function(t){e.push(t.isBoolean())}),e},isChecked:function(){var e=[];return v.each(this,function(t){e.push(t.isChecked())}),e},isDate:function(){var e=[];return v.each(this,function(t){e.push(t.isDate())}),e},isDisabled:function(){var e=[];return v.each(this,function(t){e.push(t.isDisabled())}),e},isDomain:function(){var e=[];return v.each(this,function(t){e.push(t.isDomain())}),e},isEmail:function(){var e=[];return v.each(this,function(t){e.push(t.isEmail())}),e},isEmpty:function(){var e=[];return v.each(this,function(t){e.push(t.isEmpty())}),e},isHidden:function(){var e=[];return v.each(this,function(t){e.push(t.isHidden())}),e},isIP:function(){var e=[];return v.each(this,function(t){e.push(t.isIP())}),e},isInt:function(){var e=[];return v.each(this,function(t){e.push(t.isInt())}),e},isNumber:function(){var e=[];return v.each(this,function(t){e.push(t.isNumber())}),e},isPhone:function(){var e=[];return v.each(this,function(t){e.push(t.isPhone())}),e},isUrl:function(){var e=[];return v.each(this,function(t){e.push(t.isUrl())}),e},keep_if:function(e){return v.keep_if(this,e)},keys:function(){return v.keys(this)},last:function(e){return v.last(this,e)},limit:function(e,t){return v.limit(this,e,t)},listeners:function(e){var t=[];return v.each(this,function(n){t=t.concat(n.listeners(e))}),t},loading:function(){return v.each(this,function(e){e.loading()})},max:function(){return v.max(this)},mean:function(){return v.mean(this)},median:function(){return v.median(this)},min:function(){return v.min(this)},mode:function(){return v.mode(this)},on:function(e,t,n,r,i){return v.each(this,function(s){s.on(e,t,n,r||s,i)})},once:function(e,t,n,r,i){return v.each(this,function(s){s.once(e,t,n,r||s,i)})},position:function(){var e=[];return v.each(this,function(t){e.push(t.position())}),e},prepend:function(e,t){var n=[];return v.each(this,function(r){n.push(r.prepend(e,t))}),n},range:function(){return v.range(this)},rassoc:function(e){return v.rassoc(this,e)},reject:function(e){return v.reject(this,e)},remove:function(e,t){return v.remove(this,e,t)},remove_if:function(e){return v.remove_if(this,e)},remove_while:function(e){return v.remove_while(this,e)},removeClass:function(e){return v.each(this,function(t){t.removeClass(e)})},replace:function(e){return v.replace(this,e)},rest:function(e){return v.rest(this,e)},rindex:function(e){return v.rindex(this,e)},rotate:function(e){return v.rotate(this,e)},serialize:function(e,t){return E.serialize(this,e,t)},series:function(e,t,n){return v.series(e,t,n)},show:function(){return v.each(this,function(e){e.show()})},size:function(){var e=[];return v.each(this,function(t){e.push(t.size())}),e},split:function(e){return v.split(this,e)},sum:function(){return v.sum(this)},take:function(e){return v.take(this,e)},text:function(e){return v.each(this,function(t){typeof t!="object"&&(t=D.object(t)),typeof t.text=="function"&&t.text(e)})},tpl:function(e){return v.each(this,function(t){t.tpl(e)})},toggleClass:function(e){return v.each(this,function(t){t.toggleClass(e)})},total:function(){return v.total(this)},toObject:function(){return v.toObject(this)},un:function(e,t,n){return v.each(this,function(r){r.un(e,t,n)})},unique:function(){return v.unique(this)},update:function(e){return v.each(this,function(t){E.update(t,e)})},val:function(e){var t=[],n=null,r=!0;return v.each(this,function(i){n!==null&&(r=n===i.type),n=i.type,typeof i.val=="function"&&t.push(i.val(e))}),r?t[0]:t},validate:function(){var e=[];return v.each(this,function(t){e.push(t.validate())}),e},zip:function(){return v.zip(this,arguments)}},element:{addClass:function(e){return E.klass(this,e,!0)},after:function(e,t){return E.create(e,t,this,"after")},append:function(e,t){return E.create(e,t,this,"last")},attr:function(e,t){return E.attr(this,e,t)},before:function(e,t){return E.create(e,t,this,"before")},clear:function(){return E.clear(this)},create:function(e,t,n){return E.create(e,t,this,n)},css:function(e,t){return E.css(this,e,t)},data:function(e,t){return E.data(this,e,t)},destroy:function(){return E.destroy(this)},disable:function(){return E.disable(this)},enable:function(){return E.enable(this)},find:function(e){return E.find(this,e)},fire:function(){return L.fire.apply(L,[this].concat(v.cast(arguments)))},genId:function(){return D.genId(this)},get:function(e,t,n,r,i){var s=A.factory(),o=this;return s.then(function(e){return E.update(o,{innerHTML:e}),L.fire(o,"afterGet"),typeof t=="function"&&t.call(o,e),e},function(e){return E.update(o,{innerHTML:e||T.error.serverError}),L.fire(o,"failedGet"),typeof n=="function"&&n.call(o,e),e}),L.fire(this,"beforeGet"),e.get(function(e){s.resolve(e)},function(e){s.reject(e)},r,i),this},has:function(e){return E.has(this,e)},hasClass:function(e){return E.hasClass(this,e)},hide:function(){return E.hide(this)},html:function(e){return e===undefined?_.trim(this.innerHTML):this.update({innerHTML:e})},is:function(e){return E.is(this,e)},isAlphaNum:function(){return this.nodeName==="FORM"?!1:P.test({alphanum:this.value!==undefined?this.value:E.text(this)}).pass},isBoolean:function(){return this.nodeName==="FORM"?!1:P.test({"boolean":this.value!==undefined?this.value:E.text(this)}).pass},isChecked:function(){return this.nodeName!=="INPUT"?!1:this.attr("checked")},isDate:function(){return this.nodeName==="FORM"?!1:this.value!==undefined?this.value.isDate():E.text(this).isDate()},isDisabled:function(){return this.nodeName!=="INPUT"?!1:this.attr("disabled")},isDomain:function(){return this.nodeName==="FORM"?!1:this.value!==undefined?this.value.isDomain():E.text(this).isDomain()},isEmail:function(){return this.nodeName==="FORM"?!1:this.value!==undefined?this.value.isEmail():E.text(this).isEmail()},isEmpty:function(){return this.nodeName==="FORM"?!1:this.value!==undefined?this.value.isEmpty():E.text(this).isEmpty()},isHidden:function(e){return E.hidden(this)},isIP:function(){return this.nodeName==="FORM"?!1:this.value!==undefined?this.value.isIP():E.text(this).isIP()},isInt:function(){return this.nodeName==="FORM"?!1:this.value!==undefined?this.value.isInt():E.text(this).isInt()},isNumber:function(){return this.nodeName==="FORM"?!1:this.value!==undefined?this.value.isNumber():E.text(this).isNumber()},isPhone:function(){return this.nodeName==="FORM"?!1:this.value!==undefined?this.value.isPhone():E.text(this).isPhone()},isUrl:function(){return this.nodeName==="FORM"?!1:this.value!==undefined?this.value.isUrl():E.text(this).isUrl()},jsonp:function(e,t,n){var r=this,i=t,s;return s=function(e){var t=r,n=e,s=i,o,u,a;try{s!==undefined?(s=s.replace(d.jsonp_1,"").replace(d.jsonp_2,"[").split("["),s.each(function(e){n=n[isNaN(e)?e:parseInt(e)];if(n===undefined)throw Error(T.error.propertyNotFound)}),a=n):a=e}catch(f){a=T.error.serverError,h(f,arguments,this)}t.text(a)},g.jsonp(e,s,function(){r.text(T.error.serverError)},n),this},listeners:function(e){return L.list(this,e)},loading:function(){return D.loading(this)},on:function(e,t,n,r,i){return L.add(this,e,t,n,r||this,i)},once:function(e,t,n,r,i){return L.once(this,e,t,n,r||this,i)},prepend:function(e,t){return E.create(e,t,this,"first")},prependChild:function(e){return E.prependChild(this,e)},position:function(){return E.position(this)},removeClass:function(e){return E.klass(this,e,!1)},serialize:function(e,t){return E.serialize(this,e,t)},show:function(){return E.show(this)},size:function(){return E.size(this)},text:function(e){return E.text(this,e)},toggleClass:function(e){return E.toggleClass(this,e)},tpl:function(e){return D.tpl(e,this)},un:function(e,t,n){return L.remove(this,e,t,n)},update:function(e){return E.update(this,e)},val:function(e){return E.val(this,e)},validate:function(){return this.nodeName==="FORM"?P.test(this):this.value!==undefined?!this.value.isEmpty():!E.text(this).isEmpty()}},"function":{reflect:function(){return D.reflect(this)},debounce:function(e){return D.debounce(this,e)}},number:{diff:function(e){return k.diff(this,e)},fire:function(){return L.fire.apply(L,[this.toString()].concat(v.cast(arguments)))},format:function(e,t){return k.format(this,e,t)},half:function(e){return k.half(this,e)},isEven:function(){return k.even(this)},isOdd:function(){return k.odd(this)},listeners:function(e){return L.list(this.toString(),e)},on:function(e,t,n,r,i){return L.add(this.toString(),e,t,n,r||this,i),this},once:function(e,t,n,r,i){return L.once(this.toString(),e,t,n,r||this,i),this},random:function(){return k.random(this)},roundDown:function(){return k.round(this,"down")},roundUp:function(){return k.round(this,"up")},un:function(e,t,n){return L.remove(this.toString(),e,t,n),this}},string:{allows:function(e){return g.allows(this,e)},capitalize:function(){return _.capitalize(this)},del:function(e,t,n){return g.request(this,"DELETE",e,t,null,n)},escape:function(){return _.escape(this)},expire:function(e){return m.expire(this,e)},explode:function(e){return _.explode(this,e)},fire:function(){return L.fire.apply(L,[this].concat(v.cast(arguments)))},get:function(e,t,n){return g.request(this,"GET",e,t,null,n)},headers:function(e,t){return g.request(this,"HEAD",e,t)},hyphenate:function(e){return _.hyphenate(this,e)},isAlphaNum:function(){return P.test({alphanum:this}).pass},isBoolean:function(){return P.test({"boolean":this}).pass},isDate:function(){return P.test({date:this}).pass},isDomain:function(){return P.test({domain:this}).pass},isEmail:function(){return P.test({email:this}).pass},isEmpty:function(){return _.trim(this)===""},isIP:function(){return P.test({ip:this}).pass},isInt:function(){return P.test({integer:this}).pass},isNumber:function(){return P.test({number:this}).pass},isPhone:function(){return P.test({phone:this}).pass},isUrl:function(){return P.test({url:this}).pass},jsonp:function(e,t,n){return g.jsonp(this,e,t,n)},listeners:function(e){return L.list(this,e)},post:function(e,t,n,r){return g.request(this,"POST",e,t,n,r)},put:function(e,t,n,r){return g.request(this,"PUT",e,t,n,r)},on:function(e,t,n,r,i){return L.add(this,e,t,n,r,i)},once:function(e,t,n,r,i){return L.add(this,e,t,n,r,i)},options:function(e,t){return g.request(this,"OPTIONS",e,t)},permissions:function(){return g.permissions(this)},singular:function(){return _.singular(this)},toCamelCase:function(){return _.toCamelCase(this)},toNumber:function(e){return k.parse(this,e)},trim:function(){return _.trim(this)},un:function(e,t,n){return L.remove(this,e,t,n)},uncapitalize:function(){return _.uncapitalize(this)}}};return D.iterate(r[t],function(t,n){D.property(e.prototype,n,{value:t,configurable:!0,writable:!0})}),e},queryString:function(e){var t={},r=n.search.isEmpty()?null:n.search.replace("?",""),i;return e=e||".*",r!==null&&(r=r.split("&"),v.each(r,function(e){i=e.split("=");if(i[0].isEmpty())return;i[1]===undefined||i[1].isEmpty()?i[1]="":i[1].isNumber()?i[1]=Number(i[1]):i[1].isBoolean()&&(i[1]=i[1]==="true"),t[i[0]]===undefined?t[i[0]]=i[1]:t[i[0]]instanceof Array?t[i[0]].push(i[1]):(t[i[0]]=[t[i[0]]],t[i[0]].push(i[1]))})),t},reflect:function(e){return e===undefined&&(e=this||l),e=e.toString().match(d.reflect)[1],e!==""?e.explode():[]},repeat:function(e,t,n,r){t=t||10,n=n||D.guid(!0),r=r!==!1;if(r&&e()===!1)return;return D.defer(function(){var r=function(e,t,n){var r=this;e()!==!1?l.repeating[n]=setTimeout(function(){r.call(r,e,t,n)},t):delete l.repeating[n]};r.call(r,e,t,n)},t,n),n},script:function(e,t,n){return E.create("script",{type:"application/javascript",src:e},t||l("head")[0],n)},stylesheet:function(e,t){return E.create("link",{rel:"stylesheet",type:"text/css",href:e,media:t||"print, screen"},l("head")[0])},stop:function(e){return e.cancelBubble!==undefined&&(e.cancelBubble=!0),typeof e.preventDefault=="function"&&e.preventDefault(),typeof e.stopPropagation=="function"&&e.stopPropagation(),e.returnValue=!1,e},tpl:function(e,n){var r;if(typeof e!="object"||!d.object_undefined.test(typeof n)&&(n=n.charAt(0)==="#"?l(n):l(n)[0])===undefined)throw Error(T.error.invalidArguments);return n===undefined&&(n=l("body")[0]),r=t.createDocumentFragment(),e instanceof Array?v.each(e,function(e,t){E.create(v.cast(e,!0)[0],r).html(v.cast(e)[0])}):D.iterate(e,function(e,t){typeof e=="string"?E.create(t,r).html(e):(e instanceof Array||e instanceof Object)&&D.tpl(e,E.create(t,r))}),n.appendChild(r),v.last(n.childNodes)},walk:function(e,t){return v.each(t.replace(d.walk_1,"").replace(d.walk_2,".").split(d.walk_3),function(t){e=e[t]}),e}},P={test:function(e){var t=!1,n=[],r={},i=null,s=[],o=[],u=[],a=[],f,c,h,p,m;return e.nodeName!==undefined&&e.nodeName==="FORM"?(e.id.isEmpty()&&e.genId(),u=l("#"+e.id+" input"),a=l("#"+e.id+" select"),u.length>0&&(o=o.concat(u)),a.length>0&&(o=o.concat(a)),v.each(o,function(e){var r={},i,s,o;i=d[e.nodeName.toLowerCase()]?d[e.nodeName.toLowerCase()]:!e.id.isEmpty()&&d[e.id.toLowerCase()]?d[e.id.toLowerCase()]:"notEmpty",s=e.val(),s===null&&(s=""),r[i]=s,o=P.test(r),o.pass||(n.push({element:e,test:i,value:s}),t=!0)})):D.iterate(e,function(e,r){if(r===undefined||e===undefined){n.push({test:r,value:e}),t=!0;return}i=String(e).charAt(0)==="#"?l(e)!==undefined?l(e).val():"":e;switch(r){case"date":isNaN((new Date(i)).getYear())&&(n.push({test:r,value:i}),t=!0);break;case"domain":d.domain.test(i.replace(d.scheme,""))||(n.push({test:r,value:i}),t=!0);break;case"domainip":if(!d.domain.test(i.replace(d.scheme,""))||!d.ip.test(i))n.push({test:r,value:i}),t=!0;break;default:c=d[r]||r,c.test(i)||(n.push({test:r,value:i}),t=!0)}}),{pass:!t,invalid:n}}},H=function(){var e=0,t=1,n=2,r=3,i=4,s=RegExp(n+"|"+r),o,l,c,h,p;return l={"User-Agent":"abaaso/3.3.23 node.js/"+process.versions.node.replace(/^v/,"")+" ("+_.capitalize(process.platform)+" V8/"+process.versions.v8+")","Content-Type":"text/plain",Accept:"*/*"},p=function(e){return this.readyState!==e&&(this.readyState=e,this.dispatchEvent("readystatechange"),this.readyState===i&&!this._error&&(this.dispatchEvent("load"),this.dispatchEvent("loadend"))),this},c=function(e){var t=this;p.call(this,n),this.status=e.statusCode,this._resheaders=e.headers,this._resheaders["set-cookie"]!==undefined&&this._resheaders["set-cookie"]instanceof Array&&(this._resheaders["set-cookie"]=this._resheaders["set-cookie"].join(";")),e.on("data",function(n){e.setEncoding("utf8"),t._send&&(n&&(t.responseText+=n),p.call(t,r))}),e.on("end",function(){t._send&&(p.call(t,i),t._send=!1)}),e.on("close",function(e){h.call(t,e)})},h=function(e){this.status=503,this.statusText=e,this.responseText=e.stack||e,this._error=!0,this.dispatchEvent("error"),p.call(this,i)},o=function(){this.onabort=null,this.onerror=null,this.onload=null,this.onloadend=null,this.onloadstart=null,this.onreadystatechange=null,this.readyState=e,this.response=null,this.responseText="",this.responseType="",this.responseXML=null,this.status=e,this.statusText="",this._id=D.genId(),this._error=!1,this._headers={},this._listeners={},this._params={},this._request=null,this._resheaders={},this._send=!1},o.prototype.abort=function(){this._request!==null&&(this._request.abort(),this._request=null),this.responseText="",this.responseXML="",this._error=!0,this._headers={};if(this._send===!0||s.test(this.readyState))this._send=!1,p.call(this,i);return this.dispatchEvent("abort"),this.readyState=e,this},o.prototype.addEventListener=function(e,t){return this._listeners.hasOwnProperty(e)||(this._listeners[e]=[]),this._listeners[e].add(t),this},o.prototype.dispatchEvent=function(e){var t=this;return typeof this["on"+e]=="function"&&this["on"+e](),this._listeners.hasOwnProperty(e)&&v.each(this._listeners[e],function(e){typeof e=="function"&&e.call(t)}),this},o.prototype.getAllResponseHeaders=function(){var e="";if(this.readyState<n||this._error)throw Error("INVALID_STATE_ERR: Headers have not been received");return D.iterate(this._resheaders,function(t,n){e+=n+": "+t+"\n"}),e},o.prototype.getResponseHeader=function(e){var t;if(this.readyState<n||this._error)throw Error("INVALID_STATE_ERR: Headers have not been received");return t=this._resheaders[e]||this._resheaders[e.toLowerCase()],t},o.prototype.open=function(e,n,r,i,s){var o=this;if(r!==undefined&&r!==!0)throw Error("Synchronous XMLHttpRequest requests are not supported");return this.abort(),this._error=!1,this._params={method:e,url:n,async:r||!0,user:i||null,password:s||null},D.iterate(l,function(e,t){o._headers[t]=e}),this.readyState=t,this},o.prototype.overrideMimeType=function(e){return this._headers["Content-Type"]=e,this},o.prototype.removeEventListener=function(e,t){if(!this._listeners.hasOwnProperty(e))return;return this._listeners[e].remove(t),this},o.prototype.send=function(e){e=e||null;var n=this,r,i,s,o;if(this.readyState<t)throw Error("INVALID_STATE_ERR: Object is not open");if(this._send)throw Error("INVALID_STATE_ERR: Object is sending");return i=f.parse(this._params.url),i.port=i.port||(i.protocol==="https:"?443:80),this._params.user!==null&&this._params.password!==null&&(i.auth=this._params.user+":"+this._params.password),d.put_post.test(this._params.method)&&(this._headers["Content-Length"]=e!==null?Buffer.byteLength(e):0),this._headers.Host=i.hostname+(d.http_ports.test(i.port)?"":":"+i.port),r={hostname:i.hostname,path:i.path,port:i.port,method:this._params.method,headers:this._headers},i.auth!==undefined&&(r.auth=i.auth),n._send=!0,n.dispatchEvent("readystatechange"),o=i.protocol==="http:"?u:a,s=o.request(r,function(e){c.call(n,e)}).on("error",function(e){h.call(n,e)}),e===null?s.setSocketKeepAlive(!0,1e4):s.write(e,"utf8"),this._request=s,s.end(),n.dispatchEvent("loadstart"),this},o.prototype.setRequestHeader=function(e,n){if(this.readyState!==t)throw Error("INVALID_STATE_ERR: Object is not usable");if(this._send)throw Error("INVALID_STATE_ERR: Object is sending");return this._headers[e]=n,this},o},B={decode:function(e){try{var t;if(typeof e!="string"||e.isEmpty())throw Error(T.error.invalidArguments);return g.ie?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t}catch(n){return h(n,arguments,this),undefined}},encode:function(e,t){try{if(e===undefined)throw Error(T.error.invalidArguments);t=t!==!1;var n=t?"<xml>":"",r=arguments[2]!==!1,i,s;return e!==null&&e.xml!==undefined&&(e=e.xml),e instanceof Document&&(e=(new XMLSerializer).serializeToString(e)),i=function(e,t){var n="<n>v</n>";return d.cdata_value.test(t)&&(n=n.replace("v","<![CDATA[v]]>")),n.replace("n",e).replace("v",t)},d.boolean_number_string.test(typeof e)?n+=i("item",e):typeof e=="object"&&D.iterate(e,function(e,t){n+=B.encode(e,typeof e=="object",!1).replace(d.item_xml,isNaN(t)?t:"item")}),n+=t?"</xml>":"",r&&(n='<?xml version="1.0" encoding="UTF8"?>'+n),n}catch(o){return h(o,arguments,this),undefined}}};return h=D.error,c=function(){var r,i;typeof o.bootstrap=="function"&&delete o.bootstrap,o.client.size=g.size(),g.version(),g.mobile(),g.tablet();if(g.ie&&g.version<8)throw Error(T.error.upgrade);r=function(e){var t=[];L.remove(e),e.childNodes.length>0&&(t=v.cast(e.childNodes)),t.length>0&&t.each(function(e){r(e)})},i=function(e){if(d.complete_loaded.test(t.readyState))return typeof o.init=="function"&&o.init(),!1},Array.prototype.filter===undefined&&(Array.prototype.filter=function(e){if(this===void 0||this===null||typeof e!="function")throw Error(T.error.invalidArguments);var t=null,n=Object(this),r=n.length>>>0,i=[],s=arguments[1],o=null;for(t=0;t<r;t++)t in n&&(o=n[t],e.call(s,o,t,n)&&i.push(o));return i}),Array.prototype.forEach===undefined&&(Array.prototype.forEach=function(e,t){if(this===null||typeof e!="function")throw Error(T.error.invalidArguments);var n,r=0,i=Object(this),s=i.length>>>0;t&&(n=t);while(r<s){var o;r in i&&(o=i[r],e.call(n,o,r,i)),r++}}),Array.prototype.indexOf===undefined&&(Array.prototype.indexOf=function(e,t){for(var n=t||0,r=this.length;n<r;n++)if(this[n]===e)return n;return-1}),Array.prototype.map===undefined&&(Array.prototype.map=function(e,t){var n,r,i;if(this==null)throw new TypeError(" this is null or not defined");var s=Object(this),o=s.length>>>0;if({}.toString.call(e)!="[object Function]")throw new TypeError(e+" is not a function");t&&(n=t),r=new Array(o),i=0;while(i<o){var u,a;i in s&&(u=s[i],a=e.call(n,u,i,s),r[i]=a),i++}return r}),Array.prototype.reduce===undefined&&(Array.prototype.reduce=function(e){if(this===null||this===undefined)throw new TypeError("Object is null or undefined");var t=0,n=this.length>>0,r;if(typeof e!="function")throw new TypeError("First argument is not callable");if(arguments.length<2){if(n===0)throw new TypeError("Array length is 0 and no second argument");r=this[0],t=1}else r=arguments[1];while(t<n)t in this&&(r=e.call(undefined,r,this[t],t,this)),++t;return r}),!s&&t.documentElement.classList===undefined&&function(e){var t,n,r,i,s;if(!("HTMLElement"in e||"Element"in e))return;t=function(e){var t=e.className.isEmpty()?[]:e.className.explode(" "),n=this;t.each(function(e){n.push(e)}),this.updateClassName=function(){e.className=this.join(" ")}},n=function(){return new t(this)},r=t.prototype=[],i=(e.HTMLElement||e.Element).prototype,r.add=function(e){v.contains(this,e)||(this.push(e),this.updateClassName())},r.contains=function(e){return v.contains(this,e)},r.remove=function(e){v.contains(this,e)&&(v.remove(this,e),this.updateClassName())},r.toggle=function(e){v[v.contains(this,e)?"remove":"add"](this,e),this.updateClassName()};if(Object.defineProperty)s={get:n,enumerable:!g.ie||g.version>8?!0:!1,configurable:!0},Object.defineProperty(i,"classList",s);else{if(!Object.prototype.__defineGetter__)throw Error("Could not create classList shim");i.__defineGetter__("classList",n)}}(e),Function.prototype.bind===undefined&&(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice,r=n.call(arguments,1);return function(){return t.apply(e,r.concat(n.call(arguments)))}}),s&&(delete o.cookie,XMLHttpRequest=H()),l=o.$.bind(l),D.alias(l,o),delete l.$,delete l.bootstrap,delete l.callback,delete l.init,delete l.loading,M.reset(),o.route.initial=null,l.loading=o.loading.create.bind(l.loading),l.fire=o.fire,l.on=o.on,l.once=o.once,l.un=o.un,l.listeners=o.listeners,o.state._current=o.state.current="active",l.state._current=l.state.current=o.state.current,s||(typeof e.$=="undefined"||e.$===null?e.$=l:(e.a$=l,o.aliased="a$")),D.proto(Array,"array"),typeof Element!="undefined"&&D.proto(Element,"element"),g.ie&&g.version===8&&D.proto(HTMLDocument,"element"),D.proto(Function,"function"),D.proto(Number,"number"),D.proto(String,"string"),l.error.log=o.error.log=[],l.on(e,"error",function(e){l.fire("error",e)},"error",e,"all"),s||(l.on(e,"hashchange",function(){var e=n.hash.replace(d.route_bang,"");if(l.route.current!==e||o.route.current!==e)o.route.current=e,l.route.current!==o.route.current&&(l.route.current=o.route.current),l.fire("beforeHash, hash, afterHash",n.hash)},"hash",e,"all"),l.on(e,"resize",function(){l.client.size=o.client.size=g.size(),l.fire("resize",o.client.size)},"resize",e,"all"),l.on(e,"load",function(){l.fire("render").un("render").un(this,"load")}),l.on(e,"DOMNodeInserted",function(e){var t=e.target;t.id!==undefined&&t.id.isEmpty()&&(D.genId(t),t.parentNode instanceof Element&&t.parentNode.fire("afterCreate",t),l.fire("afterCreate",t)),typeof Object.observe=="function"&&Object.observe(t,function(e){t.fire("change",e)})},"mutation",e,"all"),l.on(e,"DOMNodeRemoved",function(e){r(e.target)},"mutation",e,"all"),l.on("hash",function(e){(l.route.enabled||o.route.enabled)&&M.load(e)},"route",o.route,"all"));var u,a;u=function(){return this._current},a=function(e){if(e===null||typeof e!="string"||this.current===e||e.isEmpty())throw Error(T.error.invalidArguments);return o.state.previous=o.state._current,o.state._current=e,o.fire(e)},!g.ie||g.version>8?(D.property(o.state,"current",{enumerable:!0,get:u,set:a}),D.property(l.state,"current",{enumerable:!0,get:u,set:a})):(o.state.change=function(e){return a.call(o.state,e),o.state.current=e},l.state.change=function(e){return a.call(o.state,e),o.state.current=e}),l.ready=!0;switch(!0){case s:o.init();break;case typeof e.define=="function":e.define(function(){return o.init()});break;case d.complete_loaded.test(t.readyState):o.init();break;case typeof t.addEventListener=="function":t.addEventListener("DOMContentLoaded",o.init,!1);break;case typeof t.attachEvent=="function":t.attachEvent("onreadystatechange",i);break;default:D.repeat(i)}},{array:v,callback:{},client:{android:g.android,blackberry:g.blackberry,chrome:g.chrome,firefox:g.firefox,ie:g.ie,ios:g.ios,linux:g.linux,mobile:g.mobile,opera:g.opera,osx:g.osx,playbook:g.playbook,safari:g.safari,tablet:g.tablet,size:{height:0,width:0},version:0,webos:g.webos,windows:g.windows,del:function(e,t,n,r,i){return g.request(e,"DELETE",t,n,null,r,i)},get:function(e,t,n,r,i){return g.request(e,"GET",t,n,null,r,i)},headers:function(e,t,n,r){return g.request(e,"HEAD",t,n,null,null,r)},post:function(e,t,n,r,i,s){return g.request(e,"POST",t,n,r,i,s)},put:function(e,t,n,r,i,s){return g.request(e,"PUT",t,n,r,i,s)},jsonp:function(e,t,n,r){return g.jsonp(e,t,n,r)},options:function(e,t,n,r){return g.request(e,"OPTIONS",t,n,null,null,r)},permissions:g.permissions},cookie:y,element:E,json:x,label:T,loading:{create:D.loading,url:null},message:N,mouse:C,number:k,regex:d,repeating:{},route:{enabled:!1,current:M.current,del:M.del,hash:M.hash,init:M.init,list:M.list,load:M.load,reset:M.reset,server:M.server,set:M.set},state:{_current:null,header:null,previous:null},string:_,xml:B,$:D.$,alias:D.alias,aliased:"$",allows:g.allows,append:function(e,t,n){return n instanceof Element&&n.genId(),E.create(e,t,n,"last")},bootstrap:c,clear:E.clear,clone:D.clone,coerce:D.coerce,compile:D.compile,create:E.create,css:D.css,data:b.factory,datalist:w.factory,discard:function(e){return L.discard(e!==!1)},debounce:D.debounce,decode:x.decode,defer:D.defer,define:D.define,del:function(e,t,n,r,i){return g.request(e,"DELETE",t,n,null,r,i)},destroy:E.destroy,encode:x.encode,error:D.error,expire:m.clean,expires:12e4,extend:D.extend,filter:S.factory,fire:function(e,t){var n=typeof e=="object",r=n?e:this!==l?this:o,i=n?t:e,s=[r,i].concat(v.cast(arguments).remove(0,n?1:0));return L.fire.apply(L,s)},genId:D.genId,get:function(e,t,n,r,i){return g.request(e,"GET",t,n,null,r,i)},guid:D.guid,hash:M.hash,headers:function(e,t,n,r){return g.request(e,"HEAD",t,n,null,{},r)},hidden:E.hidden,hook:L.hook,id:"abaaso",init:function(){return delete o.init,l.fire("init, ready").un("init, ready")},iterate:D.iterate,jsonp:function(e,t,n,r){return g.jsonp(e,t,n,r)},listeners:function(e,t){return e=typeof e=="object"?e:this!==l?this:o,L.list(e,t)},listenersTotal:L.sum,log:D.log,logging:L.log,merge:D.merge,module:D.module,object:D.object,on:function(e,t,n,r,i,s){var u=typeof e=="object",a,f,c,h,p,d;return a=u?e:this!==l?this:o,f=u?t:e,c=u?n:t,h=u?r:n,p=u?i:r,d=u?s:i,typeof p=="undefined"&&(p=a),L.add(a,f,c,h,p,d)},once:function(e,t,n,r,i,s){var u=typeof e=="object",a,f,c,h,p,d;return a=u?e:this!==l?this:o,f=u?t:e,c=u?n:t,h=u?r:n,p=u?i:r,d=u?s:i,typeof p=="undefined"&&(p=a),L.once(a,f,c,h,p,d)},options:function(e,t,n,r){return g.request(e,"OPTIONS",t,n,null,null,r)},parse:D.parse,pause:function(e){return L.pause(e!==!1)},permissions:g.permissions,position:E.position,post:function(e,t,n,r,i,s){return g.request(e,"POST",t,n,r,i,s)},prepend:function(e,t,n){return n instanceof Element&&n.genId(),E.create(e,t,n,"first")},promise:A.factory,property:D.property,put:function(e,t,n,r,i,s){return g.request(e,"PUT",t,n,r,i,s)},queryString:D.queryString,random:k.random,ready:!1,reflect:D.reflect,repeat:D.repeat,stylesheet:D.stylesheet,script:D.script,stop:D.stop,store:b.factory,tpl:D.tpl,un:function(e,t,n,r){var i=typeof e=="object",s,u,a,f;return s=i?e:this!==l?this:o,u=i?t:e,a=i?n:t,f=i?r:n,L.remove(s,u,a,f)},update:E.update,validate:P.test,version:"3.3.23",walk:D.walk}}(),typeof o.bootstrap=="function"&&o.bootstrap(),typeof exports!="undefined"?module.exports=o:typeof define=="function"?define("abaaso",function(){return o}):e.abaaso=o})(this);