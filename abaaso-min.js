/**
 * Copyright (c) 2011, Jason Mulligan <jason.mulligan@avoidwork.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *     * Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above copyright
 *       notice, this list of conditions and the following disclaimer in the
 *       documentation and/or other materials provided with the distribution.
 *     * Neither the name of Jason Mulligan nor the
 *       names of its contributors may be used to endorse or promote products
 *       derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL JASON MULLIGAN BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/**
 * abaaso
 *
 * Events: ready          Fires when the DOM is available
 *         render         Fires when the window resources have loaded
 *         resize         Fires when the window resizes; parameter for listeners is abaaso.client.size
 *         afterCreate    Fires after an Element is created; parameter for listeners is the (new) Element
 *         afterDestroy   Fires after an Element is destroyed; parameter for listeners is the (removed) Element.id value
 *         beforeCreate   Fires when an Element is about to be created; parameter for listeners is the (new) Element.id value
 *         beforeDestroy  Fires when an Element is about to be destroyed; parameter for listeners is the (to be removed) Element
 *         error          Fires when an Error is caught; parameter for listeners is the logged Object (abaaso.error.log[n])
 *         hash           Fires when window.location.hash changes; parameter for listeners is the hash value
 *
 * @author Jason Mulligan <jason.mulligan@avoidwork.com>
 * @link http://abaaso.com/
 * @module abaaso
 * @version 1.6.117
 */
var $=$||null,abaaso=abaaso||function(){"use strict";var a={cast:function(a,b){try{if(typeof a!="object")throw Error(j.error.expectedObject);b=b===!0;var c=[],d,e;switch(!0){case!isNaN(a.length):for(d=0,e=a.length;d<e;d++)c.push(a[d]);break;default:for(d in a)c.push(b?d:a[d])}return c}catch(f){return p(f,arguments,this),undefined}},contains:function(a,b){try{if(!a instanceof Array)throw Error(j.error.expectedArray);/,/.test(b)&&(b=b.split(/\s*,\s*/));if(b instanceof Array){var c=[],d=args.length,e=null;for(e=0;e<d;e++)c[e]=obj.index(b[e]);return c}return obj.index(b)}catch(f){return p(f,arguments,this),undefined}},diff:function(a,b){try{if(!a instanceof Array||!b instanceof Array)throw Error(j.error.expectedArray);return a.filter(function(a){return b.indexOf(a)<0})}catch(c){return p(c,arguments,this),undefined}},first:function(a){try{if(!a instanceof Array)throw Error(j.error.expectedArray);return a[0]}catch(b){return p(b,arguments,this),undefined}},index:function(a,b){try{if(!a instanceof Array)throw Error(j.error.expectedArray);var c=a.length;while(c--)if(a[c]===b)return c;return-1}catch(d){return p(d,arguments,this),-1}},indexed:function(a){try{if(!a instanceof Array)throw Error(j.error.expectedArray);var b,c=0,d=[];for(b in a)typeof a[b]!="function"&&(d[c]=a[b]instanceof Array?a[b].indexed():a[b],c++);return d.length=c,d}catch(e){return p(e,arguments,this),undefined}},keys:function(a){try{if(!a instanceof Array)throw Error(j.error.expectedArray);var b=[],c=null;for(c in a)typeof a[c]!="function"&&b.push(c);return b}catch(d){return p(d,arguments,this),undefined}},last:function(a){try{if(!a instanceof Array)throw Error(j.error.expectedArray);return a.length>1?a[a.length-1]:a.first()}catch(b){return p(b,arguments,this),undefined}},remove:function(a,b,c){try{if(!a instanceof Array||isNaN(b))throw Error(j.error.invalidArguments);b=b||0;var d=a.length,e=a.slice((c||b)+1||d);return a.length=b<0?d+b:b,a.push.apply(a,e),a}catch(f){return p(f,arguments,this),undefined}},total:function(a){try{if(!a instanceof Array)throw Error(j.error.expectedArray);var b=0,c;for(c in a)typeof a[c]!="function"&&b++;return b}catch(d){return p(d,arguments,this),-1}}},b={items:{},clean:function(){var a;for(a in b.items)b.expired(a)&&b.expire(a);return},expire:function(a){typeof b.items[a]!="undefined"&&delete b.items[a];return},expired:function(a){var c=abaaso.client,d=b.items[a],e=typeof d!="undefined"?new Date(d.epoch):null,f=typeof d!="undefined"&&typeof d.headers.Expires!="undefined"?new Date(d.headers.Expires):null,g=new Date,h=typeof d!="undefined"&&typeof d.headers.Date!="undefined"?new Date(d.headers.Date):null;return typeof d!="undefined"&&(f!==null&&f<g||h!==null&&h.setMilliseconds(h.getMilliseconds()+c.expire)<g||c.expire>0&&e.setMilliseconds(e.getMilliseconds()+c.expire)<g)},get:function(a,c){try{return c=c===!1?!1:!0,typeof b.items[a]=="undefined"?!1:typeof b.items[a].headers!="undefined"?typeof b.items[a].headers.Pragma!="undefined"&&b.items[a].headers.Pragma==="no-cache"&&c||b.expired(b.items[a])?(b.expire(a),!1):b.items[a]:b.items[a]}catch(d){return p(d,arguments,this),undefined}},set:function(a,c,d){try{return typeof b.items[a]=="undefined"&&(b.items[a]={},b.items[a].permission=0),c==="permission"?b.items[a].permission|=d:c==="!permission"?b.items[a].permission&=~d:b.items[a][c]=d,b.items[a]}catch(e){return p(e,arguments,this),undefined}}},c={android:function(){return/android/i.test(navigator.userAgent)}(),blackberry:function(){return/blackberry/i.test(navigator.userAgent)}(),chrome:function(){return/chrome/i.test(navigator.userAgent)}(),css3:function(){switch(!0){case this.mobile:case this.tablet:case this.chrome&&this.version>5:case this.firefox&&this.version>2:case this.ie&&this.version>8:case this.opera&&this.version>8:case this.safari&&this.version>4:return this.css3=!0,!0;default:return this.css3=!1,!1}},expire:0,firefox:function(){return/firefox/i.test(navigator.userAgent)}(),ie:function(){return/msie/i.test(navigator.userAgent)}(),ios:function(){return/ipad|iphone/i.test(navigator.userAgent)}(),linux:function(){return/linux|bsd|unix/i.test(navigator.userAgent)}(),meego:function(){return/meego/i.test(navigator.userAgent)}(),mobile:function(){return/android|blackberry|ipad|iphone|meego|webos/i.test(navigator.userAgent)}(),playbook:function(){return/playbook/i.test(navigator.userAgent)}(),opera:function(){return/opera/i.test(navigator.userAgent)}(),osx:function(){return/macintosh/i.test(navigator.userAgent)}(),safari:function(){return/safari/i.test(navigator.userAgent.replace(/chrome.*/i,""))}(),tablet:function(){return/android|ipad|playbook|meego|webos/i.test(navigator.userAgent)&&(c.size.x>=1e3||c.size.y>=1e3)},webos:function(){return/webos/i.test(navigator.userAgent)}(),windows:function(){return/windows/i.test(navigator.userAgent)}(),version:function(){var a=0;switch(!0){case this.chrome:a=navigator.userAgent.replace(/(.*chrome\/|safari.*)/gi,"");break;case this.firefox:a=navigator.userAgent.replace(/(.*firefox\/)/gi,"");break;case this.ie:a=navigator.userAgent.replace(/(.*msie|;.*)/gi,"");break;case this.opera:a=navigator.userAgent.replace(/(.*opera\/|\(.*)/gi,"");break;case this.safari:a=navigator.userAgent.replace(/(.*version\/|safari.*)/gi,"");break;default:a=navigator.appVersion}return a=isNaN(parseInt(a))?0:parseInt(a),this.version=a,a},allow:function(a,c){try{if(a.isEmpty()||c.isEmpty())throw Error(j.error.invalidArguments);if(!b.get(a,!1))return undefined;var d;switch(!0){case c.toLowerCase()==="delete":d=(a.permission(c).bit&1)!==0;break;case c.toLowerCase()==="get":d=(a.permission(c).bit&4)!==0;break;case/post|put/i.test(c):d=(a.permission(c).bit&2)!==0;break;default:d=!1}return d}catch(e){return p(e,arguments,this),undefined}},permission:function(a){var c=b.get(a,!1),d=c?c.permission:0,e={allows:[],bit:d,map:{read:4,write:2,"delete":1}};return d&1&&e.allows.push("DELETE"),d&2&&function(){e.allows.push("PUT"),e.allows.push("PUT")}(),d&4&&e.allows.push("GET"),e},request:function(a,d,e,g,k){try{if(/post|put/i.test(d)&&typeof k=="undefined")throw Error(j.error.invalidArguments);if(d.toLowerCase()==="jsonp"){var l=a,n;l.on("afterJSONP",function(a){e(a)});do n=m.genId().slice(0,10);while(typeof abaaso.callback[n]!="undefined");typeof k=="undefined"&&(k="callback"),a=a.replace(k+"=?",k+"=abaaso.callback."+n),abaaso.callback[n]=function(a){delete abaaso.callback[n],l.fire("afterJSONP",a).un("afterJSONP")},f.create("script",{src:a,type:"text/javascript"},$("head")[0])}else{d=d.toLowerCase();var o=new XMLHttpRequest,q=/post|put/i.test(d)?k:null,r=d==="get"&&k instanceof Object?k:null,s=d==="options"?!1:b.get(a,!1),t=d.capitalize(),u=function(){clearTimeout(abaaso.timer[t+"-"+a]),delete abaaso.timer[t+"-"+a],a.un("received"+t).un("timeout"+t)},v=function(){u(),a.fire("failed"+t)};d==="delete"&&a.on("afterDelete",function(){b.expire(a),a.un("afterDelete","expire")},"expire"),a.on("received"+t,u).on("timeout"+t,v).on("after"+t,function(a){typeof e=="function"&&e(a)}).on("failed"+t,function(){typeof g=="function"&&g()}).fire("before"+t).fire("beforeXHR");if(d!=="options"&&a.allow(d)===!1)return a.fire("failed"+t),a;abaaso.timer[t+"-"+a]=setTimeout(function(){a.fire("timeout"+t)},3e4),o.onreadystatechange=function(){c.response(o,a,d)},o.open(d.toUpperCase(),a,!0);if(q!==null)switch(!0){case typeof q.xml!="undefined":q=q.xml;case q instanceof Document:q=$.xml.decode(q);case typeof q=="string"&&/<[^>]+>[^<]*]+>/.test(q):o.setRequestHeader("Content-type","application/xml");break;case q instanceof Object:o.setRequestHeader("Content-type","application/json"),q=h.encode(q);break;default:o.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8")}if(r!==null)for(i in r)o.setRequestHeader(i,r[i]);typeof s=="object"&&typeof s.headers.ETag!="undefined"&&o.setRequestHeader("ETag",s.headers.ETag),o.send(q)}return a}catch(w){return p(w,arguments,this),undefined}},response:function(a,d,e){try{var f=e.toLowerCase().capitalize(),g;g=function(a){try{if(!a instanceof Array)throw Error(j.error.expectedArray);var b=0,c=a.length,d;for(d=0;d<c;d++)switch(a[d].toLowerCase()){case"get":b|=4;break;case"post":case"put":b|=2;break;case"delete":b|=1}return b}catch(e){return p(e,arguments,this),0}};switch(!0){case a.readyState===2:d.fire("received"+f);var i=a.getAllResponseHeaders().split("\n"),k=null,l=i.length,m={},n=null,q,r,s;for(k=0;k<l;k++)if(!i[k].isEmpty()){var r=i[k].toString(),s=r.substr(r.indexOf(":")+1,r.length).replace(/\s/,"");r=r.substr(0,r.indexOf(":")).replace(/\s/,""),m[r]=s,r.toLowerCase()==="allow"&&(n=s)}b.set(d,"headers",m),b.set(d,"permission",g(n!==null?n.split(/\s*,\s*/):[e]));break;case a.readyState===4:switch(a.status){case 200:case 204:case 205:case 301:var t=null,u=abaaso.state,v,w;if(!/delete|options/i.test(e)&&/200|301/.test(a.status)){w=typeof b.get(d,!1).headers=="object"?b.get(d,!1).headers["Content-Type"]:"";switch(!0){case/json/.test(w):v=h.decode(a.responseText);break;case/xml/.test(w):v=o.decode(typeof a.responseXML.xml!="undefined"?a.responseXML.xml:a.responseText);break;default:if(c.ie)switch(!0){case/^\[|\{/.test(a.responseText):v=h.decode(a.responseText);break;case typeof a.responseXML.xml!="undefined":v=o.decode(a.responseXML.xml);break;case/<[^>]+>[^<]*]+>/.test(a.responseText):v=o.decode(a.responseText);break;default:v=a.responseText}else v=a.responseText}if(typeof v=="undefined")throw Error(j.error.serverError);b.set(d,"epoch",new Date),b.set(d,"response",v)}q=b.get(d,!1),e==="options"&&b.expire(d),e!=="options"&&u.header!==null&&(t=q.headers[u.header])&&typeof t!="undefined"&&!(new u.current)!==t&&(typeof u.change=="function"?u.change(t):u.current=t),d.fire("afterXHR");switch(a.status){case 200:d.fire("after"+f,e==="options"?q.headers:q.response);break;case 205:d.fire("reset");break;case 301:d.fire("moved",q.response)}break;case 401:throw Error(j.error.serverUnauthorized);case 403:throw Error(j.error.serverForbidden);case 405:throw b.set(d,"!permission",g(e)),Error(j.error.serverInvalidMethod);default:throw Error(j.error.serverError)}}}catch(x){p(x,arguments,this),d.fire("failed"+f)}return d},size:function(){var a=document.compatMode==="CSS1Compat"&&!c.opera?document.documentElement.clientWidth:document.body.clientWidth,b=document.compatMode==="CSS1Compat"&&!c.opera?document.documentElement.clientHeight:document.body.clientHeight;return{x:a,y:b}}},d={expire:function(a){return typeof this.get(a)!="undefined"&&this.set(a,"","-1s"),a},get:function(a){return this.list()[a]},list:function(){var a=null,b=null,c=null,d=null,e={};if(typeof document.cookie!="undefined"&&!document.cookie.isEmpty()){d=document.cookie.split(";"),b=d.length;for(a=0;a<b;a++)c=d[a].split("="),e[decodeURIComponent(c[0].toString().trim())]=decodeURIComponent(c[1].toString().trim())}return e},set:function(a,b,c){c=c.toString()||"";var d="",e=null,f=null,g=["d","h","m","s"],h=g.length;if(!c.isEmpty()){while(h--)if((new RegExp(g[h])).test(c)){f=g[h],e=parseInt(c);break}if(isNaN(e))throw Error(j.error.invalidArguments);d=new Date;switch(f){case"d":d.setDate(d.getDate()+e);break;case"h":d.setHours(d.getHours()+e);break;case"m":d.setMinutes(d.getMinutes()+e);break;case"s":d.setSeconds(d.getSeconds()+e)}}return d.isEmpty()||(d="; expires="+d.toUTCString()),document.cookie=a.toString().trim()+"="+b+d+"; path=/",this.get(a)}},e={key:null,keys:{},records:[],total:0,_uri:null,batch:function(a,b,c){a=a.toString().toLowerCase()||undefined,c=c===!0;try{if(!/^(set|del)$/.test(a)||typeof b!="object")throw Error(j.error.invalidArguments);var d=this.parentNode,e,f,g;d.fire("beforeDataBatch");if(b instanceof Array)for(e=0,f=b.length;e<f;e++)switch(a){case"del":this.del(b[e],!1,c);break;case"set":g=this.key!==null&&typeof b[e][this.key]!="undefined"?this.key:e,this.set(g,b[e],c)}else for(e in b)switch(a){case"del":this.del(b[e],!1,c);break;case"set":g=this.key!==null&&typeof b[e][this.key]!="undefined"?this.key:e,g!==e?delete b[e][g]:g=g.toString(),this.set(g,b[e],c)}return a==="del"&&this.reindex(),d.fire("afterDataBatch"),this}catch(h){return p(h,arguments,this),undefined}},clear:function(){var a=this.parentNode;return a.fire("beforeDataClear"),this.uri=null,this.key=null,this.keys={},this.records=[],this.total=0,a.fire("afterDataClear"),this},del:function(a,b,c){try{if(typeof a=="undefined"||typeof a!="number"||typeof a!="string")throw Error(j.error.invalidArguments);b=b!==!1,c=c===!0;var d=this.parentNode,e=m.guid(),f;if(typeof a=="string"){f=a,a=this.keys[f];if(typeof f=="undefined")throw Error(j.error.invalidArguments);a=a.index}else{f=this.records[a];if(typeof f=="undefined")throw Error(j.error.invalidArguments);f=f.key}return d.on("syncDataDelete",function(){return d.un("syncDataDelete",e),this.records.remove(a),delete this.keys[f],this.total--,b&&this.reindex(),d.fire("afterDataDelete"),this},e,this),d.fire("beforeDataDelete"),c||this.uri===null?d.fire("syncDataDelete"):$.del(this.uri+"/"+f,function(){d.fire("syncDataDelete")},function(){d.fire("failedDataDelete")}),this}catch(g){return p(g,arguments,this),undefined}},find:function(a,b){try{if(typeof a=="undefined")throw Error(j.error.invalidArguments);var c=[],d=typeof a=="string"?a.split(/\s*,\s*/):a,e=[],f=c.length,g=d.length,h=this.parentNode,i,k,l,m,n,o,q;h.fire("beforeDataFind");if(typeof b=="undefined"||!b instanceof Array)if(typeof b=="string"){c=b.split(/\s*,\s*/);for(q in c)if(typeof this.records.first().data[c[q]]=="undefined")throw Error(j.error.invalidArguments)}else for(q in this.records.first().data)c.push(q);else{for(q in b)if(typeof this.records.first().data[b[q]]=="undefined")throw Error(j.error.invalidArguments);c=b}q=this.records.length;while(q--)for(i=0;i<f;i++)for(k=0;k<g;k++)l=c[i],o=d[k],m=new RegExp(o,"gi"),n=this.records[q].data[l],m.test(n)&&e.push(this.records[q]);return h.fire("afterDataFind"),e}catch(r){return p(r,arguments,this),undefined}},get:function(a){try{var b=[],c=this.parentNode,d,e,f;c.fire("beforeDataGet");if(typeof a=="string")b=typeof this.keys[a]!="undefined"?this.records[this.keys[a].index]:undefined;else if(a instanceof Array){if(!!isNaN(a[0])||!!isNaN(a[1]))throw Error(j.error.invalidArguments);e=a[0]-1,f=a[1]-1;for(d=e;d<f;d++)typeof this.records[d]!="undefined"&&b.push(this.records[d])}else b=this.records[a];return c.fire("afterDataGet"),b}catch(g){return p(g,arguments,this),undefined}},register:function(a,b){try{if(a instanceof Array){var d=isNaN(a.length)?a.total():a.length;while(d--)this.register(a[d],b)}else{var e,f;e=function(){return this._uri},f=function(a){try{if(a!==null&&a.isEmpty())throw Error(j.error.invalidArguments);this._uri=a,a!==null&&this.sync()}catch(b){return p(b,arguments,this),undefined}},a=m.object(a),$.genId(a);switch(!0){case typeof a.fire=="undefined":a.fire=function(){return $.fire.apply(this,arguments)};case typeof a.listeners=="undefined":a.listeners=function(){return $.listeners.apply(this,arguments)};case typeof a.on=="undefined":a.on=function(a,b,c,d,e){return d=d||this,$.on(this,a,b,c,d,e)};case typeof a.un=="undefined":a.un=function(a,b){return $.un(this,a,b)}}a.fire("beforeDataStore"),a.data=m.clone(this),a.data.keys={},a.data.records=[],a.data.total=0,a.data.parentNode=a,delete a.data.register;switch(!0){case(!c.ie||c.version>8)&&typeof Object.defineProperty=="function":Object.defineProperty(a.data,"uri",{get:e,set:f});break;case typeof a.data.__defineGetter__=="function":a.data.__defineGetter__("uri",e),a.data.__defineSetter__("uri",f);break;default:a.data.uri=null,a.data.setUri=function(b){a.data.uri=b,f.call(a.data,b)}}typeof b=="object"&&a.data.batch("set",b),a.fire("afterDataStore")}return a}catch(g){return p(g,arguments,this),undefined}},reindex:function(){var a=this.total,b=this.parentNode,c;b.fire("beforeDataReindex");for(c=0;c<a;c++)this.records[c].key.isNumber()&&(delete this.keys[this.records[c].key],this.keys[c.toString()]={},this.records[c].key=c.toString()),this.keys[this.records[c].key].index=c;return b.fire("afterDataReindex"),this},set:function(b,c,d){try{b=b===null?undefined:b.toString(),d=d===!0;switch(!0){case(typeof b=="undefined"||b.isEmpty())&&this.uri===null:case typeof c=="undefined":case c instanceof Array:case c instanceof Number:case c instanceof String:case typeof c!="object":throw Error(j.error.invalidArguments)}var e=typeof this.keys[b]=="undefined"&&typeof this.records[b]=="undefined"?undefined:this.get(b),f=this.parentNode,g=m.guid(),h,i,e;return f.on("syncDataSet",function(){f.un("syncDataSet",g);if(typeof e=="undefined"){if(typeof b=="undefined"){h=arguments[0];if(typeof h=="undefined")throw f.fire("failedDataSet"),Error(j.error.expectedObject);b=this.key===null?a.cast(h).first():h[this.key],b=b.toString()}typeof c[b]!="undefined"&&(b=c[b]),this.keys[b]={},i=this.records.length,this.keys[b].index=i,this.records[i]={},this.records[i].data=c,this.records[i].key=b,e=this.records[i],this.key!==null&&delete this.records[i].data[this.key],this.total++}else if(typeof c=="object"){for(h in c)e[h]=c[h];this.records[e.index]=e}else this.records[e.index]=c;f.fire("afterDataSet",e)},g,this),f.fire("beforeDataSet"),d||this.uri===null?f.fire("syncDataSet"):$[typeof b=="undefined"?"post":"put"](typeof b=="undefined"?this.uri:this.uri+"/"+b,function(a){f.fire("syncDataSet",a)},function(){f.fire("failedDataSet")},c),this}catch(k){return p(k,arguments,this),undefined}},sync:function(){try{if(this.uri===null||this.uri.isEmpty())throw Error(j.error.invalidArguments);var a=this.parentNode,b=m.guid(),c,d;return this.uri.on("afterGet",function(c){this.uri.un("afterGet",b);try{var d=c;if(typeof d=="undefined")throw Error(j.error.expectedObject);this.batch("set",d,!0),a.fire("afterDataSync")}catch(e){p(e,arguments,this),a.fire("failedDataSync")}},b,this),this.uri.on("failedGet",function(){this.uri.un("afterGet",b),a.fire("failedDataSync")},b,this),a.fire("beforeDataSync"),$.get(this.uri),this}catch(e){return p(e,arguments,this),this}}},f={clear:function(a){try{if(a instanceof Array){var b=isNaN(a.length)?a.total():a.length,c=null;for(c=0;c<b;c++)this.clear(a[c]);return a}a=m.object(a);if(a!==null){a.fire("beforeClear");switch(!0){case typeof a.reset=="function":a.reset();break;case typeof a.value!="undefined":a.update({innerHTML:"",value:""});break;default:a.update({innerHTML:""})}return a.fire("afterClear"),a}throw Error(j.error.elementNotFound)}catch(d){return p(d,arguments,this),undefined}},create:function(a,b,c){try{if(typeof a=="undefined"||String(a).isEmpty())throw Error(j.error.invalidArguments);var d,e;switch(!0){case typeof c!="undefined":c=m.object(c);break;case typeof b!="undefined"&&(typeof b=="string"||typeof b.childNodes!="undefined"):c=m.object(b);break;default:c=document.body}if(typeof c=="undefined")throw Error(j.error.invalidArguments);return e=typeof b!="undefined"&&typeof b!="string"&&typeof b.childNodes=="undefined"&&typeof b.id!="undefined"&&typeof $("#"+b.id)=="undefined"?b.id:m.genId(),typeof b!="undefined"&&typeof b.id!="undefined"&&delete b.id,$.fire("beforeCreate",e),e.fire("beforeCreate"),d=document.createElement(a),d.id=e,typeof b=="object"&&typeof b.childNodes=="undefined"&&d.update(b),c.appendChild(d),d.fire("afterCreate"),$.fire("afterCreate",d),d}catch(f){return p(f,arguments,this),undefined}},css:function(a){var b,c;return b=$.create("style",{type:"text/css"},$("head")[0]),b.styleSheet?b.styleSheet.cssText=a:(c=document.createTextNode(a),b.appendChild(c)),b},destroy:function(a){try{if(a instanceof Array){var b=isNaN(a.length)?a.total():a.length;while(b--)this.destroy(a[b]);return a}a=m.object(a);if(!a instanceof Element)throw Error(j.error.invalidArguments);$.fire("beforeDestroy",a),a.fire("beforeDestroy"),l.remove(a.id),a.parentNode.removeChild(a),a.fire("afterDestroy"),$.fire("afterDestroy",a.id)}catch(c){p(c,arguments,this)}return undefined},disable:function(a){try{if(a instanceof Array){var b=isNaN(a.length)?a.total():a.length;while(b--)this.disable(a[b]);return a}a=m.object(a);if(!a instanceof Element)throw Error(j.error.invalidArguments);return typeof a.disabled=="boolean"&&!a.disabled&&(a.fire("beforeDisable"),a.disabled=!0,a.fire("afterDisable")),a}catch(c){return p(c,arguments,this),undefined}},enable:function(a){try{if(a instanceof Array){var b=isNaN(a.length)?a.total():a.length;while(b--)this.enable(a[b]);return a}a=m.object(a);if(!a instanceof Element)throw Error(j.error.invalidArguments);return typeof a.disabled=="boolean"&&a.disabled&&(a.fire("beforeEnable"),a.disabled=!1,a.fire("afterEnable")),a}catch(c){return p(c,arguments,this),undefined}},hide:function(a){try{if(a instanceof Array){var b=isNaN(a.length)?a.total():a.length,c=null;for(c=0;c<b;c++)this.hide(a[c]);return a}a=m.object(a);if(!a instanceof Element)throw Error(j.error.invalidArguments);a.fire("beforeHide");switch(!0){case typeof a.hidden=="boolean":a.hidden=!0;break;default:a["data-display"]=a.style.display,a.style.display="none"}return a.fire("afterHide"),a}catch(d){return p(d,arguments,this),undefined}},hidden:function(a){try{a=m.object(a);if(!a instanceof Element)throw Error(j.error.invalidArguments);return a.style.display==="none"||typeof a.hidden=="boolean"&&a.hidden}catch(b){return p(b,arguments,this),undefined}},position:function(a){try{a=m.object(a);if(!a instanceof Element)throw Error(j.error.invalidArguments);var b=top=null;if(a.offsetParent){b=a.offsetLeft,top=a.offsetTop;while(a=a.offsetParent)b+=a.offsetLeft,top+=a.offsetTop}return[b,top]}catch(c){return p(c,arguments,this),undefined}},show:function(a){try{if(a instanceof Array){var b=isNaN(a.length)?a.total():a.length,c=null;for(c=0;c<b;c++)this.show(a[c]);return a}a=m.object(a);if(!a instanceof Element)throw Error(j.error.invalidArguments);a.fire("beforeShow");switch(!0){case typeof a.hidden=="boolean":a.hidden=!1;break;default:a.style.display=typeof a["data-display"]!="undefined"&&!a["data-display"].isEmpty()?a["data-display"]:"inherit"}return a.fire("afterShow"),a}catch(d){return p(d,arguments,this),undefined}},size:function(a){try{if(a instanceof Array){var b=isNaN(a.length)?a.total():a.length,c=null,d=[];for(c=0;c<b;c++)d.push(this.size(a[c]));return d}a=m.object(a);if(!a instanceof Element)throw Error(j.error.invalidArguments);var e=function(a){return isNaN(parseInt(a))?0:parseInt(a)},f=a.offsetHeight+e(a.style.paddingTop)+e(a.style.paddingBottom)+e(a.style.borderTop)+e(a.style.borderBottom),g=a.offsetWidth+e(a.style.paddingLeft)+e(a.style.paddingRight)+e(a.style.borderLeft)+e(a.style.borderRight);return{x:f,y:g}}catch(h){return p(h,arguments,this),undefined}},update:function(a,b){try{if(a instanceof Array){var d=isNaN(a.length)?a.total():a.length,e=null;for(e=0;e<d;e++)this.update(a[e],b);return a}a=m.object(a),b=b||{};if(!a instanceof Element)throw Error(j.error.invalidArguments);a.fire("beforeUpdate");var e;for(e in b)switch(e){case"innerHTML":case"type":case"src":a[e]=b[e];break;case"opacity":a.opacity(b[e]);break;case"class":c.ie&&c.version<9?a.className=b[e]:a.setAttribute("class",b[e]);break;case"id":var f=l.listeners;typeof f[a.id]!="undefined"&&(f[b[e]]=$.clone(f[a.id]),delete f[a.id]);default:a.setAttribute(e,b[e])}return a.fire("afterUpdate"),a}catch(g){return p(g,arguments,this),undefined}}},g={even:function(a){return a%2===0},odd:function(a){return a%2!==0}},h={decode:function(a){try{return JSON.parse(a)}catch(b){return p(b,arguments,this),undefined}},encode:function(a){try{return JSON.stringify(a)}catch(b){return p(b,arguments,this),undefined}}},j={common:{back:"Back",cancel:"Cancel",clear:"Clear",close:"Close",cont:"Continue",del:"Delete",edit:"Edit",find:"Find",gen:"Generate",go:"Go",loading:"Loading",next:"Next",login:"Login",ran:"Random",save:"Save",search:"Search",submit:"Submit"},error:{databaseNotOpen:"Failed to open the Database, possibly exceeded Domain quota",databaseNotSupported:"Client does not support local database storage",databaseWarnInjection:"Possible SQL injection in database transaction, use the &#63; placeholder",elementNotCreated:"Could not create the Element",elementNotFound:"Could not find the Element",expectedArray:"Expected an Array",expectedArrayObject:"Expected an Array or Object",expectedBoolean:"Expected a Boolean value",expectedNumber:"Expected a Number",expectedObject:"Expected an Object",invalidArguments:"One or more arguments is invalid",invalidDate:"Invalid Date",invalidFields:"The following required fields are invalid: ",propertyNotFound:"Could not find the requested property",serverError:"Server error has occurred",serverForbidden:"Forbidden to access URI",serverInvalidMethod:"Method not allowed",serverUnauthorized:"Authorization required to access URI"},months:{0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"}},k={enabled:!1,log:!1,pos:{x:null,y:null},track:function(a){var b=abaaso.mouse;switch(!0){case typeof a=="object":var d,e,f=!1;d=a.pageX?a.pageX:(c.ie&&c.version===8?document.documentElement.scrollLeft:document.body.scrollLeft)+a.clientX,e=a.pageY?a.pageY:(c.ie&&c.version===8?document.documentElement.scrollTop:document.body.scrollTop)+a.clientY;switch(!0){case b.pos.x!==d:$.mouse.pos.x=b.pos.x=d,f=!0;case b.pos.y!==e:$.mouse.pos.y=b.pos.y=e,f=!0}f&&b.log&&m.log(b.pos.x+" : "+b.pos.y);break;case typeof a=="boolean":a?l.add(document,"mousemove",abaaso.mouse.track):l.remove(document,"mousemove"),$.mouse.enabled=b.enabled=a}return b}},l={listeners:{},log:!1,add:function(a,b,c,d,e,f){try{a=m.object(a),e=e||abaaso;if(a instanceof Array){var g=isNaN(a.length)?a.total():a.length,h=null;for(h=0;h<g;h++)this.add(a[h],b,c,d,e?a[h]:e,f);return a}if(typeof d=="undefined"||!/\w/.test(d))d=m.guid();var i=null,k=l.listeners,n=this.id(a),o,q;if(typeof n=="undefined"||typeof b=="undefined"||typeof c!="function")throw Error(j.error.invalidArguments);switch(!0){case typeof k[n]=="undefined":k[n]={};case typeof k[n][b]=="undefined":k[n][b]={};case typeof k[n][b].active=="undefined":k[n][b].active={};case typeof k[n][b].standby=="undefined":k[n][b].standby={}}q={fn:c,scope:e};if(typeof f=="undefined"){k[n][b].active[d]=q;switch(!0){case/body|document|window/i.test(n):i=a;break;default:i=!/\//g.test(n)&&n!=="abaaso"?$("#"+n):null}o=function(c){c||(c=window.event),typeof c.cancelBubble!="undefined"&&(c.cancelBubble=!0),typeof c.stopPropagation=="function"&&c.stopPropagation(),typeof i.fire=="function"?i.fire(b):l.fire(a,b,c)},i!==null&&b.toLowerCase()!=="afterjsonp"&&typeof i!="undefined"&&(typeof i.addEventListener=="function"?i.addEventListener(b,o,!1):i.attachEvent("on"+b,o))}else typeof k[n][b].standby[f]=="undefined"&&(k[n][b].standby[f]={}),k[n][b].standby[f][d]=q;return a}catch(r){return p(r,arguments,this),undefined}},id:function(a){var b;switch(!0){case a===abaaso:b="abaaso";break;case a===document:b="document";break;case a===document.body:b="body";break;case a===window:b="window";break;default:b=typeof a.id!="undefined"?a.id:typeof a.toString=="function"?a.toString():a}return b},fire:function(a,b,c){try{a=m.object(a);if(a instanceof Array){var d=isNaN(a.length)?a.total():a.length,e=null;for(e=0;e<d;e++)this.fire(a[e],b,c);return a}var f=this.id(a),g,h,e,i;if(typeof f=="undefined"||String(f).isEmpty()||typeof a=="undefined"||typeof b=="undefined")throw Error(j.error.invalidArguments);abaaso.observer.log&&m.log("["+f+"] "+b),i=this.list(a,b).active;if(typeof i!="undefined")for(e in i)g=typeof i[e].scope=="object"?i[e].scope:/\//g.test(i[e].scope)?i[e].scope:$(i[e].scope),h=i[e].fn,typeof c=="undefined"?h.call(g):h.call(g,c);return $.observer.fired=abaaso.observer.fired++,a}catch(k){return p(k,arguments,this),undefined}},list:function(a,b){try{if(typeof a=="undefined")throw Error(j.error.invalidArguments);a=m.object(a);var c=this.listeners,d=this.id(a);return typeof c[d]!="undefined"?typeof b!="undefined"&&typeof c[d][b]!="undefined"?$.clone(c[d][b]):$.clone(c[d]):{}}catch(e){return p(e,arguments,this),undefined}},remove:function(a,b,c){try{a=m.object(a);if(a instanceof Array){var d=isNaN(a.length)?a.total():a.length,e=null;for(e=0;e<d;e++)this.remove(a[e],b,c);return a}var f=null,g=l.listeners,h=this.id(a),i;switch(!0){case typeof h=="undefined":case typeof b=="undefined":case typeof g[h]=="undefined":case typeof g[h][b]=="undefined":return a}if(typeof c=="undefined"){delete g[h][b];switch(!0){case/body|document|window/i.test(h):f=a;break;default:f=!/\//g.test(h)&&h!=="abaaso"?$("#"+h):null}i=function(c){c||(c=window.event),typeof c.cancelBubble!="undefined"&&(c.cancelBubble=!0),typeof c.stopPropagation=="function"&&c.stopPropagation(),typeof f.fire=="function"?f.fire(b):l.fire(a,b,c)},f!==null&&b.toLowerCase()!=="afterjsonp"&&typeof f!="undefined"&&(typeof f.removeEventListener=="function"?f.removeEventListener(b,i,!1):f.detachEvent("on"+b,i))}else typeof g[h][b].active[c]!="undefined"&&delete g[h][b].active[c];return a}catch(j){return p(j,arguments,this),undefined}},state:function(a){try{var b=this.listeners,c,d;for(c in b)for(d in b[c])b[c][d].standby[$.state.previous]=b[c][d].active,b[c][d].active=typeof b[c][d].standby[a]!="undefined"?b[c][d].standby[a]:{},typeof b[c][d].standby[a]!="undefined"&&delete b[c][d].standby[a];return $.fire(a),abaaso}catch(d){return p(d,arguments,this),undefined}}},m={$:function(b,d){d=d===!0,/,/.test(b)&&(b=b.split(/\s*,\s*/));if(b instanceof Array){var e=[],f=b.length,g;for(g=0;g<f;g++)e.push($(b[g],d));return e}var h;switch(b.charAt(0)){case"#":h=document.querySelector(b);break;default:h=document.querySelectorAll(b),h!==null&&!d&&(h=!c.ie||c.version>8?Array.prototype.slice.call(h):a.cast(h))}return h===null&&(h=undefined),h},alias:function(a,b){try{var c;for(c in b)(function(){var d=c;switch(!0){case typeof b[d]=="function"&&typeof b[d].bind=="function":a[d]=function(){return b[d].apply(this,arguments)};break;case b[d]instanceof Object:typeof a[d]=="undefined"&&(a[d]={}),function(){abaaso.alias(a[d],b[d])}();break;case typeof b[d]=="function"&&typeof b[d].bind=="undefined":case/boolean|number|string/.test(typeof b[d]):case b[d]===null:a[d]=b[d]}})();return a}catch(d){return p(d,arguments,this),undefined}},clone:function(a){try{if(typeof a!="object")throw Error(j.error.expectedObject);var b={},c;typeof a.constructor=="object"&&(b.constructor=a.constructor),typeof a.prototype=="object"&&(b.prototype=a.prototype);for(c in a)b[c]=a[c];return b}catch(d){return p(d,arguments,this),undefined}},define:function(a,b,c){a=a.split("."),c=c||this,c===$&&(c=abaaso);var d=null,e=a.length,f=c;for(d=0;d<e;d++)typeof f[a[d]]=="undefined"?f[a[d]]=d+1<e?{}:typeof b!="undefined"?b:null:function(){d+1>=e&&(f[a[d]]=typeof b!="undefined"?b:null)}(),f=f[a[d]];return c},defer:function(a,b){var c=m.guid(),d=function(){delete abaaso.timer[c],a()};return abaaso.timer[c]=setTimeout(d,b),undefined},domId:function(a){return"a"+a.replace(/-/g,"").slice(1)},error:function(a,b,c){if(typeof a=="undefined")return;var d={arguments:b,message:typeof a.message!="undefined"?a.message:a,number:typeof a.number!="undefined"?a.number&65535:undefined,scope:c,timestamp:(new Date).toUTCString(),type:typeof a.type!="undefined"?a.type:"TypeError"};return typeof console!="undefined"&&console.error(d.message),abaaso.error.log.push(d),abaaso.fire("error",d),undefined},genId:function(a){switch(!0){case a instanceof Array:case a instanceof String:case typeof a=="string":case typeof a!="undefined"&&typeof a.id!="undefined"&&/\w/.test(a.id):return a}var b;do b=m.domId(m.guid());while(typeof $("#"+b)!="undefined");return typeof a=="object"?(a.id=b,a):b},guid:function(){var a=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return(a()+a()+"-"+a()+"-4"+a().substr(0,3)+"-"+a()+"-"+a()+a()+a()).toLowerCase()},loading:function(a){try{if(a instanceof Array){var b=isNaN(a.length)?a.total():a.length,c=null;for(c=0;c<b;c++)this.loading(a[c]);return a}var d=abaaso.loading;if(d.url===null)throw Error(j.error.elementNotFound);a=m.object(a);if(typeof a=="undefined")throw Error(j.error.invalidArguments);return typeof d.image=="undefined"&&(d.image=new Image,d.image.src=d.url),a.clear(),a.create("div",{"class":"loading"}).create("img",{alt:j.common.loading,src:d.image.src}),a}catch(e){return p(e,arguments,this),undefined}},log:function(a){try{console.log(a)}catch(b){p(b,arguments,this)}return undefined},object:function(a){return typeof a=="object"?a:a.toString().charAt(0)==="#"?$(a):a},proto:function(a,c){try{if(typeof a!="function"&&typeof a!="object")throw Error(j.error.invalidArguments);var d,e={array:{contains:function(a){return $.array.contains(this,a)},diff:function(a){return $.array.diff(this,a)},first:function(){return $.array.first(this)},index:function(a){return $.array.index(this,a)},indexed:function(){return $.array.indexed(this)},keys:function(){return $.array.keys(this)},last:function(a){return $.array.last(this)},on:function(a,b,c,d,e){return d=d||!0,$.on(this,a,b,c,d,e)},remove:function(a){return $.array.remove(this,a)},total:function(){return $.array.total(this)}},element:{create:function(a,b){return this.genId(),$.create(a,b,this)},disable:function(){return $.el.disable(this)},enable:function(){return $.el.enable(this)},get:function(a,c){this.fire("beforeGet");var d=b.get(a),e=m.guid();return d?(this.text(d.response),this.fire("afterGet")):(a.on("afterGet",function(b){a.un("afterGet",e),this.text(b).fire("afterGet")},e,this),$.get(a,undefined,undefined,c)),this},hide:function(){return this.genId(),$.el.hide(this)},isAlphaNum:function(){return this.nodeName==="FORM"?!1:$.validate.test({alphanum:typeof this.value!="undefined"?this.value:this.innerText}).pass},isBoolean:function(){return this.nodeName==="FORM"?!1:$.validate.test({"boolean":typeof this.value!="undefined"?this.value:this.innerText}).pass},isDate:function(){return this.nodeName==="FORM"?!1:typeof this.value!="undefined"?this.value.isDate():this.innerText.isDate()},isDomain:function(){return this.nodeName==="FORM"?!1:typeof this.value!="undefined"?this.value.isDomain():this.innerText.isDomain()},isEmail:function(){return this.nodeName==="FORM"?!1:typeof this.value!="undefined"?this.value.isEmail():this.innerText.isEmail()},isEmpty:function(){return this.nodeName==="FORM"?!1:typeof this.value!="undefined"?this.value.isEmpty():this.innerText.isEmpty()},isIP:function(){return this.nodeName==="FORM"?!1:typeof this.value!="undefined"?this.value.isIP():this.innerText.isIP()},isInt:function(){return this.nodeName==="FORM"?!1:typeof this.value!="undefined"?this.value.isInt():this.innerText.isInt()},isNumber:function(){return this.nodeName==="FORM"?!1:typeof this.value!="undefined"?this.value.isNumber():this.innerText.isNumber()},isPhone:function(){return this.nodeName==="FORM"?!1:typeof this.value!="undefined"?this.value.isPhone():this.innerText.isPhone()},isString:function(){return this.nodeName==="FORM"?!1:typeof this.value!="undefined"?this.value.isString():this.innerText.isString()},jsonp:function(a,b,c){var d=this,e=b,f=function(a){var b=d,c=a,f=e,g,h,i;try{if(typeof f!="undefined"){f=f.replace(/]|'|"/g,"").replace(/\./g,"[").split("["),h=f.length;for(g=0;g<h;g++){c=isNaN(f[g])?c[f[g]]:c[parseInt(f[g])];if(typeof c=="undefined")throw Error($.label.error.propertyNotFound)}i=c}else i=a}catch(j){i=$.label.error.serverError,p(j,arguments,this)}b.text(i)};return $.jsonp(a,f,null,c),this},loading:function(){return $.loading.create(this)},on:function(a,b,c,d,e){return d=d||this,this.genId(),$.on(this,a,b,c,d,e)},position:function(){return this.genId(),$.el.position(this)},show:function(){return this.genId(),$.el.show(this)},size:function(){return this.genId(),$.el.size(this)},text:function(a){var b={};return this.genId(),typeof this.value!="undefined"&&(b.value=a),typeof this.innerHTML!="undefined"&&(b.innerHTML=a),this.update(b)},update:function(a){return this.genId(),$.update(this,a)},validate:function(){return this.nodeName==="FORM"?$.validate.test(this).pass:typeof this.value!="undefined"?!this.value.isEmpty():!this.innerText.isEmpty()}},number:{isEven:function(){return $.number.even(this)},isOdd:function(){return $.number.odd(this)},on:function(a,b,c,d,e){return d=d||this,$.on(this,a,b,c,d,e)}},shared:{clear:function(){return this.genId(),this instanceof String?this.constructor=new String(""):$.clear(this),this},destroy:function(){$.destroy(this)},fire:function(a,b){return this.genId(),$.fire.call(this,a,b)},genId:function(){return $.genId(this)},listeners:function(a){return this.genId(),$.listeners(this,a)},un:function(a,b){return this.genId(),$.un(this,a,b)}},string:{allow:function(a){return $.allow(this,a)},capitalize:function(){return this.charAt(0).toUpperCase()+this.slice(1)},isAlphaNum:function(){return $.validate.test({alphanum:this}).pass},isBoolean:function(){return $.validate.test({"boolean":this}).pass},isDate:function(){return $.validate.test({date:this}).pass},isDomain:function(){return $.validate.test({domain:this}).pass},isEmail:function(){return $.validate.test({email:this}).pass},isEmpty:function(){return!$.validate.test({notEmpty:this}).pass},isIP:function(){return $.validate.test({ip:this}).pass},isInt:function(){return $.validate.test({integer:this}).pass},isNumber:function(){return $.validate.test({number:this}).pass},isPhone:function(){return $.validate.test({phone:this}).pass},isString:function(){return $.validate.test({string:this}).pass},on:function(a,b,c,d,e){return d=d||this,$.on(this,a,b,c,d,e)},options:function(a){return $.options(this,a)},permission:function(){return $.permission(this)},trim:function(){return this.replace(/^\s+|\s+$/,"")}}};for(d in e[c])a.prototype[d]=e[c][d];for(d in e.shared)a.prototype[d]=e.shared[d];return a}catch(f){return p(f,arguments,this),undefined}}},n={pattern:{alphanum:/^[a-zA-Z0-9]*$/,"boolean":/^(0|1|true|false)?$/,domain:/^[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#]*[\w\-\@?^=%&amp;\/~\+#])?/,email:/^([0-9a-zA-Z]+([_.-]?[0-9a-zA-Z]+)*@[0-9a-zA-Z]+[0-9,a-z,A-Z,.,-]*(.){1}[a-zA-Z]{2,4})+$/,ip:/^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})$/,integer:/(^-?\d\d*$)/,notEmpty:/\w{1,}/,number:/(^-?\d\d*\.\d*$)|(^-?\d\d*$)|(^-?\.\d\d*$)/,phone:/^\([1-9]\d{2}\)\s?\d{3}\-\d{4}$/,string:/\w/},test:function(a){try{if(typeof a=="undefined"||a===null||!a instanceof Object)throw Error(j.error.expectedObject);var b=!1,c=[],d=null;if(typeof a.nodeName!="undefined"&&a.nodeName==="FORM"){var e,f,g,h,i,k,l={},m,o,q,c=[],r={};a.id.isEmpty()&&a.genId(),h=$("#"+a.id+":has(input,select)"),m=h.length;for(e=0;e<m;e++){g=null,f=n.pattern[h[e].nodeName.toLowerCase()]?n.pattern[h[e].nodeName.toLowerCase()]:!h[e].id.isEmpty()&&n.pattern[h[e].id.toLowerCase()]?n.pattern[h[e].id.toLowerCase()]:"notEmpty";switch(!0){case/radio|checkbox/gi.test(h[e].type):if(h[e].name in r)continue;i=document.getElementsByName(h[e].name),o=i.length;for(k=0;k<o;k++)if(i[k].checked){g=i[k].value,r[h[e].name]=!0;continue}break;case/select/gi.test(h[e].type):g=h[e].options[h[e].selectedIndex].value;break;default:g=typeof h[e].value!="undefined"?h[e].value:h[e].innerText}g===null&&(g=""),l[f]=g}return q=this.test(l),q}for(var e in a){if(typeof e=="undefined"||typeof a[e]=="undefined"){c.push({test:e,value:a[e]}),b=!0;continue}d=a[e].charAt(0)==="#"?typeof $(a[e])!="undefined"?$(a[e]).value?$(a[e]).value:$(a[e]).innerHTML:"":a[e];switch(e){case"date":isNaN((new Date(d)).getYear())&&(c.push({test:e,value:d}),b=!0);break;case"domain":n.pattern.domain.test(d.replace(/.*\/\//,""))||(c.push({test:e,value:d}),b=!0);break;case"domainip":if(!n.pattern.domain.test(d.replace(/.*\/\//,""))||!n.pattern.ip.test(d))c.push({test:e,value:d}),b=!0;break;default:var f=typeof n.pattern[e]!="undefined"?n.pattern[e]:e;f.test(d)||(c.push({test:e,value:d}),b=!0)}}return{pass:!b,invalid:c}}catch(s){return p(s,arguments,this),{pass:!1,invalid:{}}}}},o={decode:function(a){try{if(typeof a!="string"||a.isEmpty())throw Error(j.error.invalidArguments);var b;return c.ie?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml"),b}catch(d){return p(d,arguments,this),undefined}},encode:function(a,b){try{if(typeof a=="undefined")throw Error(j.error.invalidArguments);switch(!0){case a!==null&&typeof a.xml!="undefined":c=a.xml;break;case a instanceof Document:c=(new XMLSerializer).serializeToString(payload);break;default:b=b===!1?!1:!0;var c=b?"<xml>":"",d=arguments[2]===!1?!1:!0,e,f;e=function(a,b){var c="<n>v</n>";return/\&|\<|\>|\"|\'|\t|\r|\n|\@|\$/g.test(b)&&(c=c.replace(/v/,"<![CDATA[v]]>")),c.replace(/n/g,a).replace(/v/,b)};switch(!0){case typeof a=="boolean":case typeof a=="number":case typeof a=="string":c+=e("item",a);break;case typeof a=="object":for(f in a)c+=$.xml.encode(a[f],typeof a[f]=="object",!1).replace(/item|xml/g,isNaN(f)?f:"item")}c+=b?"</xml>":"",d&&(c='<?xml version="1.0" encoding="UTF8"?>'+c)}return c}catch(g){return p(g,arguments,this),undefined}}},p=m.error;return{array:a,callback:{},client:{android:c.android,blackberry:c.blackberry,css3:!1,chrome:c.chrome,expire:c.expire,firefox:c.firefox,ie:c.ie,ios:c.ios,linux:c.linux,meego:c.meego,mobile:c.mobile,opera:c.opera,osx:c.osx,playbook:c.playbook,safari:c.safari,tablet:c.tablet,size:{x:0,y:0},version:0,webos:c.webos,windows:c.windows,del:function(a,b,d){return c.request(a,"DELETE",b,d)},get:function(a,b,d,e){return c.request(a,"GET",b,d,e)},options:function(a,b,d){return c.request(a,"OPTIONS",b,d)},post:function(a,b,d,e){return c.request(a,"POST",b,d,e)},put:function(a,b,d,e){return c.request(a,"PUT",b,d,e)},jsonp:function(a,b,d,e){return c.request(a,"JSONP",b,d,e)},permission:c.permission},cookie:d,data:e,el:f,json:h,label:j,loading:{create:m.loading,url:null},mouse:k,number:g,observer:{log:l.log,add:l.add,fire:l.fire,fired:0,list:l.list,remove:l.remove},state:{_current:null,header:null,previous:null},validate:n,xml:o,$:m.$,alias:m.alias,allow:c.allow,bootstrap:function(){typeof document.getElementsByClassName=="undefined"&&(document.getElementsByClassName=function(a){var b=document.getElementsByTagName("*"),c=b.length,d=null,e=[],f=new RegExp("(^|\\s)"+a+"(\\s|$)");for(d=0;d<c;d++)f.test(b[d].className)&&e.push(b[d]);return e}),typeof Array.prototype.filter=="undefined"&&(Array.prototype.filter=function(a){"use strict";if(this===void 0||this===null||typeof a!="function")throw Error(j.error.invalidArguments);var b=null,c=Object(this),d=c.length>>>0,e=[],f=arguments[1];val=null;for(b=0;b<d;b++)b in c&&(val=c[b],a.call(f,val,b,c)&&e.push(val));return e}),typeof Function.prototype.bind=="undefined"&&(Function.prototype.bind=function(a){"use strict";var b=this,c=Array.prototype.slice,d=c.call(arguments,1);return function(){return b.apply(a,d.concat(c.call(arguments)))}}),$=abaaso.$.bind($),abaaso.alias($,abaaso),delete $.$,delete $.callback,delete $.init,delete $.observer.log,delete $.state.header,delete $.timer;switch(!0){case typeof document.addEventListener=="function":document.addEventListener("DOMContentLoaded",function(){abaaso.init()},!1);break;default:abaaso.timer.init=setInterval(function(){/loaded|complete/.test(document.readyState)&&(clearInterval(abaaso.timer.init),delete abaaso.timer.init,typeof abaaso.init=="function"&&abaaso.init())},10)}},clean:b.clean,clear:f.clear,clone:m.clone,create:f.create,css:f.css,decode:h.decode,defer:m.defer,define:m.define,del:function(a,b,d){return c.request(a,"DELETE",b,d)},destroy:f.destroy,encode:h.encode,error:m.error,fire:function(){var a=typeof arguments[0]=="undefined"?undefined:arguments[0],b=typeof arguments[1]=="undefined"?undefined:arguments[1],c=this===$?abaaso:this;return l.fire.call(l,c,a,b)},genId:m.genId,get:function(a,b,d,e){return c.request(a,"GET",b,d,e)},guid:m.guid,hidden:f.hidden,id:"abaaso",init:function(){delete abaaso.init,delete abaaso.bootstrap,abaaso.error.log=[],$.client.version=abaaso.client.version=c.version(),$.client.css3=abaaso.client.css3=c.css3(),$.client.size=abaaso.client.size=c.size(),$.client.tablet=abaaso.client.tablet=c.tablet(),$.state.current=abaaso.state._current,m.proto(Array,"array"),m.proto(Element,"element"),c.ie&&c.version===8&&m.proto(HTMLDocument,"element"),m.proto(Number,"number"),m.proto(String,"string"),l.add(window,"hashchange",function(){abaaso.fire("hash",location.hash)}),l.add(window,"resize",function(){$.client.size=abaaso.client.size=c.size(),abaaso.fire("resize",abaaso.client.size)}),abaaso.timer.clean=setInterval(function(){abaaso.clean()},12e4);var a,b;a=function(){return this._current},b=function(a){try{if(a===null||typeof a!="string"||this.current===a||a.isEmpty())throw Error(j.error.invalidArguments);return $.state.previous=this.previous=this._current,$.state.current=this._current=a,l.state(a)}catch(b){return p(b,arguments,this),undefined}};switch(!0){case(!c.ie||c.version>8)&&typeof Object.defineProperty=="function":Object.defineProperty(abaaso.state,"current",{get:a,set:b});break;case typeof abaaso.state.__defineGetter__=="function":abaaso.state.__defineGetter__("current",a),abaaso.state.__defineSetter__("current",b);break;default:abaaso.state.current=null,abaaso.state.change=function(a){abaaso.state.current=a,b.call(abaaso.state,a)}}return $.ready=abaaso.ready=!0,$.fire("ready").un("ready"),abaaso.timer.render=setInterval(function(){/loaded|complete/.test(document.readyState)&&(clearInterval(abaaso.timer.render),delete abaaso.timer.render,$.fire("render").un("render"))},10),abaaso},jsonp:function(a,b,d,e){return c.request(a,"JSONP",b,d,e)},listeners:function(){var a=typeof arguments[1]!="undefined",b=a?arguments[0]:this,c=a?arguments[1]:arguments[0];return b===$&&(b=abaaso),l.list.call(l,b,c)},on:function(){var a=typeof arguments[2]=="function",b=a?arguments[0]:abaaso,c=a?arguments[1]:arguments[0],d=a?arguments[2]:arguments[1],e=a?arguments[3]:arguments[2],f=a?arguments[4]:arguments[3],g=a?arguments[5]:arguments[4];return typeof f=="undefined"&&(f=abaaso),l.add.call(l,b,c,d,e,f,g)},options:function(a,b,d){return c.request(a,"OPTIONS",b,d)},permission:c.permission,position:f.position,post:function(a,b,d,e){return c.request(a,"POST",b,d,e)},put:function(a,b,d,e){return c.request(a,"PUT",b,d,e)},ready:!1,store:function(a,b){return e.register.call(e,a,b)},timer:{},un:function(){var a=typeof arguments[0]=="string"?!1:!0,b=a?arguments[0]:this,c=a?arguments[1]:arguments[0],d=a?arguments[2]:arguments[1];return b===$&&(b=abaaso),l.remove.call(l,b,c,d)},update:f.update,version:"1.6.117"}}();typeof abaaso.bootstrap=="function"&&abaaso.bootstrap()