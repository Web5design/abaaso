/**
 * Copyright (c) 2011, Jason Mulligan <jason.mulligan@avoidwork.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *     * Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above copyright
 *       notice, this list of conditions and the following disclaimer in the
 *       documentation and/or other materials provided with the distribution.
 *     * Neither the name of Jason Mulligan nor the
 *       names of its contributors may be used to endorse or promote products
 *       derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL JASON MULLIGAN BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/**
 * abaaso
 *
 * Events: init           Fires when abaaso is ready; register modules on this event
 *         ready          Fires when the DOM is available
 *         render         Fires when the window resources have loaded
 *         resize         Fires when the window resizes; parameter for listeners is abaaso.client.size
 *         afterCreate    Fires after an Element is created; parameter for listeners is the (new) Element
 *         afterDestroy   Fires after an Element is destroyed; parameter for listeners is the (removed) Element.id value
 *         beforeCreate   Fires when an Element is about to be created; parameter for listeners is the (new) Element.id value
 *         beforeDestroy  Fires when an Element is about to be destroyed; parameter for listeners is the (to be removed) Element
 *         error          Fires when an Error is caught; parameter for listeners is the logged Object (abaaso.error.log[n])
 *         hash           Fires when window.location.hash changes; parameter for listeners is the hash value
 *
 * @author Jason Mulligan <jason.mulligan@avoidwork.com>
 * @link http://abaaso.com/
 * @module abaaso
 * @version 1.7.006
 */
(function(t){t.$=null;t.abaaso=function(){var s={cast:function(a,b){if(!f.safari&&typeof a!=="object"||f.safari&&typeof a!=="function")throw Error(i.error.expectedObject);var b=b===true,c=[],d,e;switch(true){case !isNaN(a.length):for(d=0,e=a.length;d<e;d++)c.push(a[d]);break;default:for(d in a)c.push(b?d:a[d])}return c},contains:function(a,b){/,/.test(b)&&(b=b.explode(","));if(b instanceof Array){for(var c=[],d=args.length,e=null,e=0;e<d;e++)c[e]=a.index(b[e]);return c}return a.index(b)},diff:function(a,
b){var c=a.length>b.length?a:b,d=c===a?b:a,e=[];c.each(function(a){d.indexOf(a)===-1&&e.push(a)});return e},first:function(a){return a[0]},index:function(a,b){for(var c=a.length;c--;)if(a[c]===b)return c;return-1},indexed:function(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(!(a[b]instanceof Array)?a[b]:a[b].indexed());return c},intersect:function(a,b){var c=a.length>b.length?a:b,d=c===a?b:a,e=[];c.each(function(a){d.indexOf(a)>-1&&e.push(a)});return e},keys:function(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&
isNaN(b)&&c.push(b);return c},last:function(a){return a.length>1?a[a.length-1]:a.first()},remove:function(a,b,c){if(typeof b==="string"){if(b=a.index(b),b===-1)return a}else b=b||0;var d=a.length,c=a.slice((c||b)+1||d);a.length=b<0?d+b:b;a.push.apply(a,c);return a},total:function(a){return a.indexed().length}},p={items:{},clean:function(){for(var a in p.items)p.expired(a)&&p.expire(a)},expire:function(a){typeof p.items[a]!=="undefined"&&delete p.items[a]},expired:function(a){a=p.items[a];return typeof a!==
"undefined"&&a.expires<new Date},get:function(a,b){if(typeof p.items[a]==="undefined")return false;return b===true&&p.expired(a)?(p.expire(a),false):p.items[a]},set:function(a,b,c){if(typeof p.items[a]==="undefined")p.items[a]={},p.items[a].permission=0;b==="permission"?p.items[a].permission|=c:b==="!permission"?p.items[a].permission&=~c:p.items[a][b]=c;return p.items[a]}},f={android:/android/i.test(navigator.userAgent),blackberry:/blackberry/i.test(navigator.userAgent),chrome:/chrome/i.test(navigator.userAgent),
css3:function(){switch(true){case this.mobile:case this.tablet:case this.chrome&&this.version>5:case this.firefox&&this.version>2:case this.ie&&this.version>8:case this.opera&&this.version>8:case this.safari&&this.version>4:return this.css3=true;default:return this.css3=false}},expire:0,firefox:/firefox/i.test(navigator.userAgent),ie:/msie/i.test(navigator.userAgent),ios:/ipad|iphone/i.test(navigator.userAgent),linux:/linux|bsd|unix/i.test(navigator.userAgent),mobile:/android|blackberry|ipad|iphone|meego|webos/i.test(navigator.userAgent),
playbook:/playbook/i.test(navigator.userAgent),opera:/opera/i.test(navigator.userAgent),osx:/macintosh/i.test(navigator.userAgent),safari:/safari/i.test(navigator.userAgent.replace(/chrome.*/i,"")),tablet:function(){return/android|ipad|playbook|webos/i.test(navigator.userAgent)&&(f.size.x>=1E3||f.size.y>=1E3)},webos:/webos/i.test(navigator.userAgent),windows:/windows/i.test(navigator.userAgent),version:function(){var a=0;switch(true){case this.chrome:a=navigator.userAgent.replace(/(.*chrome\/|safari.*)/gi,
"");break;case this.firefox:a=navigator.userAgent.replace(/(.*firefox\/)/gi,"");break;case this.ie:a=navigator.userAgent.replace(/(.*msie|;.*)/gi,"");break;case this.opera:a=navigator.userAgent.replace(/(.*opera\/|\(.*)/gi,"");break;case this.safari:a=navigator.userAgent.replace(/(.*version\/|safari.*)/gi,"");break;default:a=navigator.appVersion}return this.version=a=!isNaN(parseInt(a))?parseInt(a):0},allows:function(a,b){try{if(a.isEmpty()||b.isEmpty())throw Error(i.error.invalidArguments);if(p.get(a,
false)){var c;switch(true){case b.toLowerCase()==="delete":c=(a.permissions(b).bit&1)!==0;break;case b.toLowerCase()==="get":c=(a.permissions(b).bit&4)!==0;break;case /post|put/i.test(b):c=(a.permissions(b).bit&2)!==0;break;default:c=false}return c}}catch(d){o(d,arguments,this)}},permissions:function(a){var a=p.get(a,false),a=!a?0:a.permission,b={allows:[],bit:a,map:{read:4,write:2,"delete":1}};a&1&&b.allows.push("DELETE");a&2&&(b.allows.push("PUT"),b.allows.push("PUT"));a&4&&b.allows.push("GET");
return b},jsonp:function(a,b,c,d){var e=a,g=h.guid(),k,l;e.on("afterHead",function(){if(typeof d!=="object"||d instanceof Array)d={};d.Accept="application/json";this.un("afterHead",g).un("failedHead",g).get(b,c,d)},g);e.on("failedHead",function(){this.un("afterHead",g).un("failedHead",g).on("afterJSONP",function(a){this.un("afterJSONP",g).un("failedJSONP",g);typeof b==="function"&&b(a)},g);this.on("failedJSONP",function(){this.un("afterJSONP",g).un("failedJSONP",g);typeof c==="function"&&c()},g);
do k=h.genId().slice(0,10);while(typeof abaaso.callback[k]!=="undefined");if(typeof d==="undefined"||String(d).isEmpty())d="callback";a=a.replace(d+"=?",d+"=abaaso.callback."+k);abaaso.callback[k]=function(a){$.destroy(l);clearTimeout(abaaso.timer[k]);delete abaaso.timer[k];delete abaaso.callback[k];e.fire("afterJSONP",a)};l=q.create("script",{src:a,type:"text/javascript"},$("head")[0]);abaaso.timer[k]=setTimeout(function(){e.fire("failedJSONP")},3E4)},g);return e.headers()},request:function(a,b,
c,d,e){try{if(/post|put/i.test(b)&&typeof e==="undefined")throw Error(i.error.invalidArguments);var b=b.toLowerCase(),g=new XMLHttpRequest,k=/post|put/i.test(b)?e:null,l=b==="get"&&e instanceof Object?e:null,v=b==="head"?false:p.get(a,false),j=b.capitalize(),A=function(){clearTimeout(abaaso.timer[j+"-"+a]);delete abaaso.timer[j+"-"+a];a.un("received"+j).un("timeout"+j)},r=h.guid(),m;if(b==="delete")a.on("afterDelete",function(){p.expire(a);a.un("afterDelete",r)},r);a.on("received"+j,A,r).on("timeout"+
j,function(){A();a.fire("failed"+j).un("failed"+j)},r).on("after"+j,function(b){a.un("received"+j,r).un("timeout"+j,r).un("after"+j,r).un("failed"+j,r);typeof c==="function"&&c(b)},r).on("failed"+j,function(){a.un("received"+j,r).un("timeout"+j,r).un("after"+j,r).un("failed"+j,r);typeof d==="function"&&d()},r).fire("before"+j).fire("beforeXHR");if(b!=="head"&&a.allows(b)===false)return a.fire("failed"+j),a;if(b==="get"&&Boolean(v))a.fire("afterGet",v.response);else{abaaso.timer[j+"-"+a]=setTimeout(function(){a.fire("timeout"+
j)},3E4);g.onreadystatechange=function(){f.response(g,a,b)};g.open(b.toUpperCase(),a,true);if(k!==null)switch(true){case typeof k.xml!=="undefined":k=k.xml;case k instanceof Document:k=y.decode(k);case typeof k==="string"&&/<[^>]+>[^<]*]+>/.test(k):g.setRequestHeader("Content-type","application/xml");break;case k instanceof Object:g.setRequestHeader("Content-type","application/json");k=w.encode(k);break;default:g.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8")}if(l!==
null)for(m in l)g.setRequestHeader(m,l[m]);typeof v==="object"&&typeof v.headers.ETag!=="undefined"&&g.setRequestHeader("ETag",v.headers.ETag);g.send(k)}return a}catch(x){o(x,arguments,this)}},response:function(a,b,c){try{var d=c.toLowerCase().capitalize(),e;e=function(a){var b=0,c=a.length,e;for(e=0;e<c;e++)switch(a[e].toLowerCase()){case "get":b|=4;break;case "post":case "put":b|=2;break;case "delete":b|=1}return b};switch(true){case a.readyState===2:b.fire("received"+d);break;case a.readyState===
4:var g=String(a.getAllResponseHeaders()).split("\n"),k=g.length,l={},f=null,j=new Date,h,r,m,x,q,u,n;for(q=0;q<k;q++)g[q].isEmpty()||(u=g[q].toString(),n=u.substr(u.indexOf(":")+1,u.length).replace(/\s/,""),u=u.substr(0,u.indexOf(":")).replace(/\s/,""),l[u]=n,/allow|access-control-allow-methods/i.test(u)&&(f=n));switch(true){case typeof l["Cache-Control"]!=="undefined"&&/no/.test(l["Cache-Control"]):case typeof l.Pragma!=="undefined"&&/no/.test(l.Pragma):break;case typeof l["Cache-Control"]!=="undefined"&&
/\d/.test(l["Cache-Control"]):j=j.setSeconds(j.getSeconds()+parseInt(/\d/.match(b["Cache-Control"])[0]));break;case typeof l.Expires!=="undefined":j=new Date(l.Expires);break;default:j=j.setSeconds(j.getSeconds()+abaaso.client.expire)}h=j;r=l;m=e(f!==null?f.explode(","):[c]);c!=="head"&&(p.set(b,"expires",h),p.set(b,"headers",r),p.set(b,"permission",m));switch(a.status){case 200:case 204:case 205:case 301:e=null;var s=abaaso.state,t,z,B;if(!/delete|head/i.test(c)&&/200|301/.test(a.status)){z=typeof r["Content-Type"]!==
"undefined"?r["Content-Type"]:"";switch(true){case (/json|plain/.test(z)||z.isEmpty())&&Boolean(B=w.decode(/[\{\[].*[\}\]]/.exec(a.responseText))):t=B;break;case /xml/.test(z)&&String(a.responseText).isEmpty()&&a.responseXML!==null:t=y.decode(typeof a.responseXML.xml!=="undefined"?a.responseXML.xml:a.responseXML);break;case /<[^>]+>[^<]*]+>/.test(a.responseText):t=y.decode(a.responseText);break;default:t=a.responseText}if(typeof t==="undefined")throw Error(i.error.serverError);p.set(b,"response",
t);x=t}switch(true){case c==="head":p.expire(b);break;case s.header!==null&&Boolean(e=r[s.header])&&s.current!==e:typeof s.change==="function"?s.change(e):s.current=e}b.fire("afterXHR");switch(a.status){case 200:b.fire("after"+d,c==="head"?r:x);break;case 205:b.fire("reset");break;case 301:b.fire("moved",x)}break;case 401:throw Error(i.error.serverUnauthorized);case 403:throw Error(i.error.serverForbidden);case 405:throw p.set(b,"!permission",e(c)),Error(i.error.serverInvalidMethod);default:throw Error(i.error.serverError);
}}}catch(C){o(C,arguments,this,true),b.fire("failed"+d)}return b},size:function(){return{x:document.compatMode==="CSS1Compat"&&!f.opera?document.documentElement.clientWidth:document.body.clientWidth,y:document.compatMode==="CSS1Compat"&&!f.opera?document.documentElement.clientHeight:document.body.clientHeight}}},t={methods:{batch:function(a,b,c){try{a=a.toString().toLowerCase()||void 0;c=c===true;if(!/^(set|del)$/.test(a)||typeof b!=="object")throw Error(i.error.invalidArguments);var d=this.parentNode,
e,g,k;d.fire("beforeDataBatch");if(b instanceof Array)for(e=0,g=b.length;e<g;e++)switch(a){case "del":this.del(b[e],false,c);break;case "set":k=this.key!==null&&typeof b[e][this.key]!=="undefined"?this.key:e,this.set(k,b[e],c)}else for(e in b)switch(a){case "del":this.del(b[e],false,c);break;case "set":k=this.key!==null&&typeof b[e][this.key]!=="undefined"?this.key:e,k!==e?delete b[e][k]:k=k.toString(),this.set(k,b[e],c)}a==="del"&&this.reindex();d.fire("afterDataBatch");return this}catch(l){o(l,
arguments,this)}},clear:function(){var a=this.parentNode;a.fire("beforeDataClear");this.key=this.uri=null;this.keys={};this.records=[];this.total=0;this.views={};a.fire("afterDataClear");return this},del:function(a,b,c){if(typeof a==="undefined"||typeof a!=="number"&&typeof a!=="string")throw Error(i.error.invalidArguments);var c=c===true,d=this.parentNode,e,g;if(typeof a==="string"){e=a;a=this.keys[e];if(typeof e==="undefined")throw Error(i.error.invalidArguments);a=a.index}else{e=this.records[a];
if(typeof e==="undefined")throw Error(i.error.invalidArguments);e=e.key}g={key:e,record:a,reindex:b!==false};d.fire("beforeDataDelete",g);c||this.uri===null?d.fire("syncDataDelete",g):$.del(this.uri+"/"+e,function(){d.fire("syncDataDelete",g)},function(){d.fire("failedDataDelete",g)});return this},find:function(a,b){try{if(typeof a==="undefined")throw Error(i.error.invalidArguments);var c=[],d=typeof a==="string"?a.explode(","):a,e=[],g,k=d.length,l=this.parentNode,f={},j,h,r,m,p,q,n,s;l.fire("beforeDataFind");
m=this.records.first();switch(true){case typeof b==="string":c=b.explode(",");for(n=c.length;n--;)if(!m.data.hasOwnProperty(c[n]))throw Error(i.error.invalidArguments);break;default:for(n in m.data)c.push(n)}g=c.length;s=this.total;for(n=0;n<s;n++)for(j=0;j<g;j++)for(h=0;h<k;h++)r=c[j],q=d[h],m=RegExp(q,"gi"),p=this.records[n].data[r],!f[this.records[n].key]&&m.test(p)&&(f[this.records[n].key]=n,e.push(this.records[n]));l.fire("afterDataFind",f);return e}catch(t){o(t,arguments,this)}},get:function(a){var b=
[],c=this.parentNode,d;c.fire("beforeDataGet");switch(true){case typeof a==="undefined"||String(a).length===0:b=this.records;break;case typeof a==="string"&&typeof this.keys[a]!=="undefined":b=this.records[this.keys[a].index];break;case typeof a==="number":b=this.records[a];break;case a instanceof Array:if(isNaN(a[0])||isNaN(a[1]))throw Error(i.error.invalidArguments);d=a[0]-1;for(a=a[1]-1;d<a;d++)typeof this.records[d]!=="undefined"&&b.push(this.records[d]);break;default:b=void 0}c.fire("afterDataGet",
b);return b},reindex:function(){var a=this.total,b=this.parentNode,c;b.fire("beforeDataReindex");this.views={};for(c=0;c<a;c++){if(this.records[c].key.isNumber())delete this.keys[this.records[c].key],this.keys[c.toString()]={},this.records[c].key=c.toString();this.keys[this.records[c].key].index=c}b.fire("afterDataReindex");return this},set:function(a,b,c){a=a===null?void 0:a.toString();c=c===true;switch(true){case (typeof a==="undefined"||a.isEmpty())&&this.uri===null:case typeof b==="undefined":case b instanceof
Array:case b instanceof Number:case b instanceof String:case typeof b!=="object":throw Error(i.error.invalidArguments);}var d=typeof this.keys[a]==="undefined"&&typeof this.records[a]==="undefined"?void 0:this.get(a),e=this.parentNode,g={data:b,key:a,record:d};e.fire("beforeDataSet");c||this.uri===null?e.fire("syncDataSet",g):$[typeof a==="undefined"?"post":"put"](typeof a==="undefined"?this.uri:this.uri+"/"+a,function(a){g.result=a;e.fire("syncDataSet",g)},function(){e.fire("failedDataSet")},b);
return this},sort:function(a,b){try{if(typeof a==="undefined"||String(a).isEmpty())throw Error(i.error.invalidArguments);var b=b===true,c=this.parentNode,d=a.toCamelCase().replace(/Asc$/,""),e=[],g=[],k,l,f;if(!b&&this.views[d]instanceof Array)return this.views[d];if(this.total===0)return this.records;k=a.replace(/\s.*$/,"");if(!this.records[0].data.hasOwnProperty(k))throw Error(i.error.invalidArguments);c.fire("beforeDataSort");this.records.each(function(a){l=String(a.data[k]).trim()+":::"+a.key;
e.push(l)});e.sort();/\s+desc/i.test(a)&&e.reverse();k=/:::(.*)$/;e.each(function(a){f=c.data.keys[k.exec(a)[1]].index;g.push(c.data.records[f])});this.views[d]=g;c.fire("afterDataSort",d);return g}catch(j){o(j,arguments,this)}},sync:function(){try{if(this.uri===null||this.uri.isEmpty())throw Error(i.error.invalidArguments);var a=this,b=a.parentNode;h.guid();b.fire("beforeDataSync");this.uri.jsonp(function(c){try{if(typeof c!=="object")throw Error(i.error.expectedObject);var e,g=[];a.source!==null&&
typeof c[a.source]!=="undefined"&&(c=c[a.source]);if(c instanceof Array)g=c;else for(e in c)if(c[e]instanceof Array){g=g.concat(c[e]);break}a.batch("set",g,true);b.fire("afterDataSync",c)}catch(k){o(k,arguments,this),b.fire("failedDataSync")}},function(){b.fire("failedDataSync")},this.callback);return this}catch(c){return o(c,arguments,this),this}}},register:function(a,b){if(a instanceof Array){for(var c=!isNaN(a.length)?a.length:a.total();c--;)this.register(a[c],b);return a}var d,c=function(){return this._uri};
d=function(a){try{if(a!==null&&a.isEmpty())throw Error(i.error.invalidArguments);this._uri=a;a!==null&&this.sync()}catch(b){o(b,arguments,this)}};a=h.object(a);$.genId(a);switch(true){case typeof a.fire==="undefined":a.fire=function(a,b){return $.fire.call(this,a,b)};case typeof a.listeners==="undefined":a.listeners=function(a){return $.listeners.call(this,a)};case typeof a.on==="undefined":a.on=function(a,b,c,d,f){return $.on.call(this,a,b,c,d,f)};case typeof a.un==="undefined":a.un=function(a,b){return $.un.call(this,
a,b)}}a.fire("beforeDataStore");a.data=$.extend(this.methods);a.data.callback=void 0;a.data.key=null;a.data.keys={};a.data.parentNode=a;a.data.records=[];a.data.source=null;a.data.total=0;a.data.views={};a.data._uri=null;a.on("syncDataDelete",function(a){var b=this.get(a.record);this.records.remove(a.record);delete this.keys[a.key];this.total--;this.views={};a.reindex&&this.reindex();this.parentNode.fire("afterDataDelete",b);return this.parentNode},h.guid(),a.data);a.on("syncDataSet",function(a){if(typeof a.record===
"undefined"){var b=this.total;this.total++;if(typeof a.key==="undefined"){if(typeof a.result==="undefined")throw this.fire("failedDataSet"),Error(i.error.expectedObject);a.key=this.key===null?s.cast(a.result).first():a.result[this.key];a.key=a.key.toString()}if(typeof a.data[a.key]!=="undefined")a.key=a.data[a.key];this.keys[a.key]={};this.keys[a.key].index=b;this.records[b]={};this.records[b].data=a.data;this.records[b].key=a.key;this.key!==null&&delete this.records[b].data[this.key];a=this.get(b)}else{if(typeof a.data===
"object"){for(b in a)a.record[b]=a.data[b];this.records[a.record.index]=a.record}else this.records[a.record.index]=a.data;a=this.get(a.record.index)}this.views={};this.parentNode.fire("afterDataSet",a)},h.guid(),a.data);switch(true){case (!f.ie||f.version>8)&&typeof Object.defineProperty==="function":Object.defineProperty(a.data,"uri",{get:c,set:d});break;case typeof a.data.__defineGetter__==="function":a.data.__defineGetter__("uri",c);a.data.__defineSetter__("uri",d);break;default:a.data.uri=null,
a.data.setUri=function(b){a.data.uri=b;d.call(a.data,b)}}typeof b==="object"&&a.data.batch("set",b);a.fire("afterDataStore");return a}},q={klass:function(a,b,c){try{if(a instanceof Array){for(var d=!isNaN(a.length)?a.length:a.total(),e=null,e=0;e<d;e++)this.klass(a[e],b,c);return a}a=h.object(a);c=c!==false;if(a instanceof Element!==true||String(b).isEmpty())throw Error(i.error.invalidArguments);a.fire("beforeClassChange");e=a.className.split(" ");switch(true){case c:e.index(b)<0&&e.push(b);break;
case !c:b==="*"?e=[]:e.remove(b)}e=e.join(" ");f.ie&&f.version<9?a.className=e:a.setAttribute("class",e);a.fire("afterClassChange");return a}catch(g){o(g,arguments,this)}},clear:function(a){try{if(a instanceof Array){for(var b=!isNaN(a.length)?a.length:a.total(),c=null,c=0;c<b;c++)this.clear(a[c]);return a}a=h.object(a);if(a instanceof Element!==true)throw Error(i.error.invalidArguments);a.fire("beforeClear");switch(true){case typeof a.reset==="function":a.reset();break;case typeof a.value!=="undefined":a.update({innerHTML:"",
value:""});break;default:a.update({innerHTML:""})}a.fire("afterClear");return a}catch(d){o(d,arguments,this)}},create:function(a,b,c,d){try{if(typeof a==="undefined"||String(a).isEmpty())throw Error(i.error.invalidArguments);var e,g;switch(true){case typeof c!=="undefined":c=h.object(c);break;case typeof b!=="undefined"&&(typeof b==="string"||typeof b.childNodes!=="undefined"):c=h.object(b);break;default:c=document.body}if(typeof c==="undefined")throw Error(i.error.invalidArguments);g=typeof b!==
"undefined"&&typeof b!=="string"&&typeof b.childNodes==="undefined"&&typeof b.id!=="undefined"&&typeof $("#"+b.id)==="undefined"?b.id:h.genId();typeof b!=="undefined"&&typeof b.id!=="undefined"&&delete b.id;$.fire("beforeCreate",g);g.fire("beforeCreate");e=document.createElement(a);e.id=g;typeof b==="object"&&typeof b.childNodes==="undefined"&&e.update(b);switch(true){case typeof d==="undefined":c.appendChild(e);break;case typeof d.after!=="undefined":c.insertBefore(e,d.after.nextSibling);break;case typeof d.before!==
"undefined":c.insertBefore(e,d.before);break;default:c.appendChild(e)}e.fire("afterCreate");$.fire("afterCreate",e);return e}catch(k){o(k,arguments,this)}},css:function(a){var b;b=$.create("style",{type:"text/css"},$("head")[0]);b.styleSheet?b.styleSheet.cssText=a:(a=document.createTextNode(a),b.appendChild(a));return b},destroy:function(a){try{if(a instanceof Array){for(var b=!isNaN(a.length)?a.length:a.total();b--;)this.destroy(a[b]);return a}a=h.object(a);if(a instanceof Element!==true)throw Error(i.error.invalidArguments);
$.fire("beforeDestroy",a);a.fire("beforeDestroy");n.remove(a.id);a.parentNode.removeChild(a);a.fire("afterDestroy");$.fire("afterDestroy",a.id)}catch(c){o(c,arguments,this)}},disable:function(a){try{if(a instanceof Array){for(var b=!isNaN(a.length)?a.length:a.total();b--;)this.disable(a[b]);return a}a=h.object(a);if(a instanceof Element!==true)throw Error(i.error.invalidArguments);if(typeof a.disabled==="boolean"&&!a.disabled)a.fire("beforeDisable"),a.disabled=true,a.fire("afterDisable");return a}catch(c){o(c,
arguments,this)}},enable:function(a){try{if(a instanceof Array){for(var b=!isNaN(a.length)?a.length:a.total();b--;)this.enable(a[b]);return a}a=h.object(a);if(a instanceof Element!==true)throw Error(i.error.invalidArguments);if(typeof a.disabled==="boolean"&&a.disabled)a.fire("beforeEnable"),a.disabled=false,a.fire("afterEnable");return a}catch(c){o(c,arguments,this)}},hide:function(a){try{if(a instanceof Array){for(var b=!isNaN(a.length)?a.length:a.total(),c=null,c=0;c<b;c++)this.hide(a[c]);return a}a=
h.object(a);if(a instanceof Element!==true)throw Error(i.error.invalidArguments);a.fire("beforeHide");switch(true){case typeof a.hidden==="boolean":a.hidden=true;break;default:a["data-display"]=a.style.display,a.style.display="none"}a.fire("afterHide");return a}catch(d){o(d,arguments,this)}},hidden:function(a){try{a=h.object(a);if(a instanceof Element!==true)throw Error(i.error.invalidArguments);return a.style.display==="none"||typeof a.hidden==="boolean"&&a.hidden}catch(b){o(b,arguments,this)}},
position:function(a){try{a=h.object(a);if(a instanceof Element!==true)throw Error(i.error.invalidArguments);var b=top=null;if(a.offsetParent){b=a.offsetLeft;for(top=a.offsetTop;a=a.offsetParent;)b+=a.offsetLeft,top+=a.offsetTop}return[b,top]}catch(c){o(c,arguments,this)}},show:function(a){try{if(a instanceof Array){for(var b=!isNaN(a.length)?a.length:a.total(),c=null,c=0;c<b;c++)this.show(a[c]);return a}a=h.object(a);if(a instanceof Element!==true)throw Error(i.error.invalidArguments);a.fire("beforeShow");
switch(true){case typeof a.hidden==="boolean":a.hidden=false;break;default:a.style.display=typeof a["data-display"]!=="undefined"&&!a["data-display"].isEmpty()?a["data-display"]:"inherit"}a.fire("afterShow");return a}catch(d){o(d,arguments,this)}},size:function(a){try{if(a instanceof Array){for(var b=!isNaN(a.length)?a.length:a.total(),c=null,d=[],c=0;c<b;c++)d.push(this.size(a[c]));return d}a=h.object(a);if(a instanceof Element!==true)throw Error(i.error.invalidArguments);b=function(a){return!isNaN(parseInt(a))?
parseInt(a):0};c=a.offsetHeight+b(a.style.paddingTop)+b(a.style.paddingBottom)+b(a.style.borderTop)+b(a.style.borderBottom);d=a.offsetWidth+b(a.style.paddingLeft)+b(a.style.paddingRight)+b(a.style.borderLeft)+b(a.style.borderRight);return{x:c,y:d}}catch(e){o(e,arguments,this)}},update:function(a,b){try{if(a instanceof Array){for(var c=!isNaN(a.length)?a.length:a.total(),d=null,d=0;d<c;d++)this.update(a[d],b);return a}a=h.object(a);b=b||{};if(a instanceof Element!==true)throw Error(i.error.invalidArguments);
a.fire("beforeUpdate");for(d in b)switch(d){case "innerHTML":a.innerHTML="";a.appendChild(document.createTextNode(b[d]));break;case "class":!b[d].isEmpty()?a.addClass(b[d]):a.removeClass("*");break;case "type":case "src":a[d]=b[d];break;case "id":var e=n.listeners;typeof e[a.id]!=="undefined"&&(e[b[d]]=$.clone(e[a.id]),delete e[a.id]);default:a.setAttribute(d,b[d])}a.fire("afterUpdate");return a}catch(g){o(g,arguments,this)}}},w={decode:function(a){try{return JSON.parse(a)}catch(b){o(b,arguments,
this)}},encode:function(a){try{return JSON.stringify(a)}catch(b){o(b,arguments,this)}}},i={common:{back:"Back",cancel:"Cancel",clear:"Clear",close:"Close",cont:"Continue",del:"Delete",edit:"Edit",find:"Find",gen:"Generate",go:"Go",loading:"Loading",next:"Next",login:"Login",ran:"Random",save:"Save",search:"Search",submit:"Submit"},error:{databaseNotOpen:"Failed to open the Database, possibly exceeded Domain quota",databaseNotSupported:"Client does not support local database storage",databaseWarnInjection:"Possible SQL injection in database transaction, use the &#63; placeholder",
elementNotCreated:"Could not create the Element",elementNotFound:"Could not find the Element",expectedArray:"Expected an Array",expectedArrayObject:"Expected an Array or Object",expectedBoolean:"Expected a Boolean value",expectedNumber:"Expected a Number",expectedObject:"Expected an Object",invalidArguments:"One or more arguments is invalid",invalidDate:"Invalid Date",invalidFields:"The following required fields are invalid: ",propertyNotFound:"Could not find the requested property",serverError:"Server error has occurred",
serverForbidden:"Forbidden to access URI",serverInvalidMethod:"Method not allowed",serverUnauthorized:"Authorization required to access URI"},months:{0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"}},n={listeners:{},log:false,add:function(a,b,c,d,e,g){try{a=h.object(a);e=e||abaaso;if(a instanceof Array){for(var k=!isNaN(a.length)?a.length:a.total(),l=null,l=0;l<k;l++)this.add(a[l],b,c,d,e?a[l]:e,g);return a}if(typeof d===
"undefined"||!/\w/.test(d))d=h.guid();var f=null,l=n.listeners,j=this.id(a),m,r;if(typeof j==="undefined"||typeof b==="undefined"||typeof c!=="function")throw Error(i.error.invalidArguments);switch(true){case typeof l[j]==="undefined":l[j]={};case typeof l[j][b]==="undefined":l[j][b]={};case typeof l[j][b].active==="undefined":l[j][b].active={};case typeof l[j][b].standby==="undefined":l[j][b].standby={}}r={fn:c,scope:e};if(typeof g==="undefined"){l[j][b].active[d]=r;switch(true){case /body|document|window/i.test(j):f=
a;break;default:f=!/\//g.test(j)&&j!=="abaaso"?$("#"+j):null}m=function(c){if(!c)c=window.event;if(typeof c.cancelBubble!=="undefined")c.cancelBubble=true;typeof c.preventDefault==="function"&&c.preventDefault();typeof c.stopPropagation==="function"&&c.stopPropagation();typeof f.fire==="function"?f.fire(b,c):n.fire(a,b,c)};f!==null&&b.toLowerCase()!=="afterjsonp"&&typeof f!=="undefined"&&(typeof f.addEventListener==="function"?f.addEventListener(b,m,false):f.attachEvent("on"+b,m))}else typeof l[j][b].standby[g]===
"undefined"&&(l[j][b].standby[g]={}),l[j][b].standby[g][d]=r;return a}catch(p){o(p,arguments,this)}},id:function(a){switch(true){case a===abaaso:a="abaaso";break;case a===document:a="document";break;case a===document.body:a="body";break;case a===window:a="window";break;default:a=typeof a.id!=="undefined"?a.id:typeof a.toString==="function"?a.toString():a}return a},fire:function(a,b,c){try{a=h.object(a);if(a instanceof Array){for(var d=!isNaN(a.length)?a.length:a.total(),e=null,e=0;e<d;e++)this.fire(a[e],
b,c);return a}var g=this.id(a),k;if(typeof g==="undefined"||String(g).isEmpty()||typeof a==="undefined"||typeof b==="undefined")throw Error(i.error.invalidArguments);abaaso.observer.log&&h.log("["+g+"] "+b);k=this.list(a,b).active;for(e in k)k[e].fn.call(k[e].scope,c);abaaso.observer.fired++;$.observer.fired=abaaso.observer.fired;return a}catch(f){o(f,arguments,this)}},list:function(a,b){var a=h.object(a),c=this.listeners,d=this.id(a);switch(true){case typeof c[d]==="undefined"&&typeof b==="undefined":c=
{};break;case typeof c[d]!=="undefined"&&(typeof b==="undefined"||String(b).isEmpty()):c=c[d];break;case typeof c[d]!=="undefined"&&typeof c[d][b]!=="undefined":c=c[d][b];break;default:c={active:{},standby:{}}}return c},remove:function(a,b,c){a=h.object(a);if(a instanceof Array){for(var d=!isNaN(a.length)?a.length:a.total(),e=null,e=0;e<d;e++)this.remove(a[e],b,c);return a}var g=null,d=n.listeners,e=this.id(a);switch(true){case typeof e==="undefined":case typeof b==="undefined":case typeof d[e]===
"undefined":case typeof d[e][b]==="undefined":return a}if(typeof c==="undefined"){delete d[e][b];switch(true){case /body|document|window/i.test(e):g=a;break;default:g=!/\//g.test(e)&&e!=="abaaso"?$("#"+e):null}c=function(c){if(!c)c=window.event;if(typeof c.cancelBubble!=="undefined")c.cancelBubble=true;typeof c.preventDefault==="function"&&c.preventDefault();typeof c.stopPropagation==="function"&&c.stopPropagation();typeof g.fire==="function"?g.fire(b):n.fire(a,b,c)};g!==null&&b.toLowerCase()!=="afterjsonp"&&
typeof g!=="undefined"&&(typeof g.removeEventListener==="function"?g.removeEventListener(b,c,false):g.detachEvent("on"+b,c))}else typeof d[e][b].active[c]!=="undefined"&&delete d[e][b].active[c];return a},state:function(a){var b=this.listeners,c,d;for(c in b)for(d in b[c])b[c][d].standby[$.state.previous]=b[c][d].active,b[c][d].active=typeof b[c][d].standby[a]!=="undefined"?b[c][d].standby[a]:{},typeof b[c][d].standby[a]!=="undefined"&&delete b[c][d].standby[a];$.fire(a);return abaaso}},h={$:function(a,
b){b=b===true;/,/.test(a)&&(a=a.explode(","));if(a instanceof Array){var c=[],d=a.length,e;for(e=0;e<d;e++)c.push($(a[e],b));return c}switch(a.charAt(0)){case "#":c=document.querySelector(a);break;default:c=document.querySelectorAll(a),c!==null&&!b&&(c=!f.ie||f.version>8?Array.prototype.slice.call(c):s.cast(c))}c===null&&(c=void 0);return c},alias:function(a,b){for(var c in b)(function(){var d=c;if(b.hasOwnProperty(d))switch(true){case typeof b[d]==="function":a[d]=function(){return b[d].apply(this,
arguments)};break;case !b[d]instanceof Array&&b[d]instanceof Object:typeof a[d]==="undefined"&&(a[d]={});abaaso.alias(a[d],b[d]);break;case /boolean|function|number|object|string/.test(typeof b[d]):case b[d]===null:a[d]=b[d]}})();return a},clone:function(a){try{if(typeof a!=="object")throw Error(i.error.expectedObject);var b={},c;if(typeof a.constructor==="object")b.constructor=a.constructor;if(typeof a.prototype==="object")b.prototype=a.prototype;for(c in a)b[c]=a[c];return b}catch(d){o(d,arguments,
this)}},define:function(a,b,c){a=a.split(".");c=c||this;c===$&&(c=abaaso);for(var d=null,e=a.length,g=c,d=0;d<e;d++)typeof g[a[d]]==="undefined"?g[a[d]]=d+1<e?{}:typeof b!=="undefined"?b:null:d+1>=e&&(g[a[d]]=typeof b!=="undefined"?b:null),g=g[a[d]];return c},defer:function(a,b){var c=h.guid();abaaso.timer[c]=setTimeout(function(){delete abaaso.timer[c];a()},b)},domId:function(a){return"a"+a.replace(/-/g,"").slice(1)},error:function(a,b,c,d){if(typeof a!=="undefined"){d=d===true;a={arguments:b,message:typeof a.message!==
"undefined"?a.message:a,number:typeof a.number!=="undefined"?a.number&65535:void 0,scope:c,timestamp:(new Date).toUTCString(),type:typeof a.type!=="undefined"?a.type:"TypeError"};if(typeof console!=="undefined")console[!d?"error":"warn"](a.message);abaaso.error.log.push(a);abaaso.fire("error",a)}},extend:function(a,b){try{if(typeof a==="undefined")throw Error(i.error.invalidArguments);typeof b==="undefined"&&(b={});var c,d,e=function(){};e.prototype=a;d=new e;for(c in b)b.hasOwnProperty(c)&&(d[c]=
b[c]);return d}catch(g){o(g,arguments,this)}},genId:function(a){switch(true){case a instanceof Array:case a instanceof String:case typeof a==="string":case typeof a!=="undefined"&&typeof a.id!=="undefined"&&/\w/.test(a.id):return a}var b;do b=h.domId(h.guid());while(typeof $("#"+b)!=="undefined");return typeof a==="object"?(a.id=b,a):b},guid:function(){function a(){return((1+Math.random())*65536|0).toString(16).substring(1)}return(a()+a()+"-"+a()+"-4"+a().substr(0,3)+"-"+a()+"-"+a()+a()+a()).toLowerCase()},
loading:function(a){try{if(a instanceof Array){for(var b=!isNaN(a.length)?a.length:a.total(),c=null,c=0;c<b;c++)this.loading(a[c]);return a}c=abaaso.loading;if(c.url===null)throw Error(i.error.elementNotFound);a=h.object(a);if(typeof a==="undefined")throw Error(i.error.invalidArguments);if(typeof c.image==="undefined")c.image=new Image,c.image.src=c.url;a.clear();a.create("div",{"class":"loading"}).create("img",{alt:i.common.loading,src:c.image.src});return a}catch(d){o(d,arguments,this)}},log:function(a){try{console.log(a)}catch(b){o(b,
arguments,this)}},object:function(a){return typeof a==="object"?a:a.toString().charAt(0)==="#"?$(a):a},proto:function(a,b){var c,d={array:{addClass:function(a){for(var b=this.length,c=null,c=0;c<b;c++)this[c].addClass(a);return this},contains:function(a){return s.contains(this,a)},css:function(a,b){for(var c=this.length,d=null,d=0;d<c;d++)this[d].css(a,b);return this},diff:function(a){return s.diff(this,a)},each:function(a){return this.filter(a)},first:function(){return s.first(this)},index:function(a){return s.index(this,
a)},indexed:function(){return s.indexed(this)},intersect:function(a){return s.intersect(this,a)},keys:function(){return s.keys(this)},last:function(){return s.last(this)},on:function(a,b,c,d,f){return $.on.call(this,a,b,c,typeof d!=="undefined"?d:true,f)},remove:function(a){return s.remove(this,a)},removeClass:function(a){for(var b=this.length,c=null,c=0;c<b;c++)this[c].removeClass(a);return this},text:function(a){this.each(function(b){typeof b!=="object"&&(b=h.object(b));typeof b.text==="function"&&
b.text(a)});return this},total:function(){return s.total(this)},update:function(a){return q.update(this,a)}},element:{addClass:function(a){this.genId();return q.klass(this,a,true)},create:function(a,b){this.genId();return q.create(a,b,this)},css:function(a,b){var c;this.genId();if(!f.chrome&&(c=a.indexOf("-"))&&c>-1)a=a.replace("-",""),a=a.slice(0,c)+a.charAt(c).toUpperCase()+a.slice(c+1,a.length);this.style[a]=b;return this},disable:function(){return q.disable(this)},enable:function(){return q.enable(this)},
get:function(a,b){this.fire("beforeGet");var c=p.get(a);h.guid();var d=this;!c?a.get(function(a){d.text(a).fire("afterGet")},null,b):this.text(c.response).fire("afterGet");return this},hide:function(){this.genId();return q.hide(this)},isAlphaNum:function(){return this.nodeName==="FORM"?false:m.test({alphanum:typeof this.value!=="undefined"?this.value:this.innerText}).pass},isBoolean:function(){return this.nodeName==="FORM"?false:m.test({"boolean":typeof this.value!=="undefined"?this.value:this.innerText}).pass},
isDate:function(){return this.nodeName==="FORM"?false:typeof this.value!=="undefined"?this.value.isDate():this.innerText.isDate()},isDomain:function(){return this.nodeName==="FORM"?false:typeof this.value!=="undefined"?this.value.isDomain():this.innerText.isDomain()},isEmail:function(){return this.nodeName==="FORM"?false:typeof this.value!=="undefined"?this.value.isEmail():this.innerText.isEmail()},isEmpty:function(){return this.nodeName==="FORM"?false:typeof this.value!=="undefined"?this.value.isEmpty():
this.innerText.isEmpty()},isIP:function(){return this.nodeName==="FORM"?false:typeof this.value!=="undefined"?this.value.isIP():this.innerText.isIP()},isInt:function(){return this.nodeName==="FORM"?false:typeof this.value!=="undefined"?this.value.isInt():this.innerText.isInt()},isNumber:function(){return this.nodeName==="FORM"?false:typeof this.value!=="undefined"?this.value.isNumber():this.innerText.isNumber()},isPhone:function(){return this.nodeName==="FORM"?false:typeof this.value!=="undefined"?
this.value.isPhone():this.innerText.isPhone()},isString:function(){return this.nodeName==="FORM"?false:typeof this.value!=="undefined"?this.value.isString():this.innerText.isString()},jsonp:function(a,b,c){var d=this;f.jsonp(a,function(a){var c=a,e=b,f,k,h;try{if(typeof e!=="undefined"){e=e.replace(/]|'|"/g,"").replace(/\./g,"[").split("[");k=e.length;for(f=0;f<k;f++)if(c=isNaN(e[f])?c[e[f]]:c[parseInt(e[f])],typeof c==="undefined")throw Error(i.error.propertyNotFound);h=c}else h=a}catch(m){h=i.error.serverError,
o(m,arguments,this)}d.text(h)},function(){d.text(i.error.serverError)},c);return this},loading:function(){return $.loading.create(this)},on:function(a,b,c,d,f){this.genId();return $.on.call(this,a,b,c,d,f)},position:function(){this.genId();return q.position(this)},removeClass:function(a){this.genId();return q.klass(this,a,false)},show:function(){this.genId();return q.show(this)},size:function(){this.genId();return q.size(this)},text:function(a){var b={};this.genId();typeof this.value!=="undefined"?
b.value=a:b.innerHTML=a;return this.update(b)},update:function(a){this.genId();return q.update(this,a)},validate:function(){return this.nodeName==="FORM"?m.test(this).pass:typeof this.value!=="undefined"?!this.value.isEmpty():!this.innerText.isEmpty()}},number:{diff:function(a){return $.number.diff.call(this,a)},isEven:function(){return $.number.even(this)},isOdd:function(){return $.number.odd(this)},on:function(a,b,c,d,f){return $.on.call(this,a,b,c,d,f)}},shared:{clear:function(){this.genId();this instanceof
String?this.constructor=new String(""):q.clear(this);return this},destroy:function(){q.destroy(this)},fire:function(a,b){this.genId();return $.fire.call(this,a,b)},genId:function(){return h.genId(this)},listeners:function(a){this.genId();return $.listeners.call(this,a)},un:function(a,b){this.genId();return $.un.call(this,a,b)}},string:{allows:function(a){return $.allows(this,a)},capitalize:function(){return this.charAt(0).toUpperCase()+this.slice(1)},del:function(a,b){return f.request(this,"DELETE",
a,b)},explode:function(a){return this.split(RegExp("\\s*"+a+"\\s*"))},get:function(a,b,c){return f.request(this,"GET",a,b,c)},isAlphaNum:function(){return m.test({alphanum:this}).pass},isBoolean:function(){return m.test({"boolean":this}).pass},isDate:function(){return m.test({date:this}).pass},isDomain:function(){return m.test({domain:this}).pass},isEmail:function(){return m.test({email:this}).pass},isEmpty:function(){return!m.test({notEmpty:this}).pass},isIP:function(){return m.test({ip:this}).pass},
isInt:function(){return m.test({integer:this}).pass},isNumber:function(){return m.test({number:this}).pass},isPhone:function(){return m.test({phone:this}).pass},isString:function(){return m.test({string:this}).pass},jsonp:function(a,b,c){return f.jsonp(this,a,b,c)},post:function(a,b,c){return f.request(this,"POST",a,b,c)},put:function(a,b,c){return f.request(this,"PUT",a,b,c)},on:function(a,b,c,d,f){return $.on.call(this,a,b,c,d,f)},headers:function(a,b){return f.request(this,"HEAD",a,b)},permissions:function(){return $.permissions(this)},
toCamelCase:function(){var a=this.toLowerCase().split(" "),b="",c,d;for(c=0,d=a.length;c<d;c++)b+=c===0?a[c]:String(a[c]).capitalize();return b},trim:function(){return this.replace(/^\s+|\s+$/g,"")}}};for(c in d[b])a.prototype[c]=d[b][c];for(c in d.shared)a.prototype[c]=d.shared[c];return a},queryString:function(){var a={},b=window.location.search.isEmpty()?null:window.location.search.replace("?",""),c;b!==null&&(b=b.split("&"),b.each(function(b){c=b.split("=");switch(true){case c[1].isNumber():c[1]=
Number(c[1]);break;case c[1].isBoolean():c[1]=c[1]==="true"}switch(true){case typeof a[c[0]]==="undefined":a[c[0]]=c[1];break;case !(a[c[0]]instanceof Array):a[c[0]]=[a[c[0]]];default:a[c[0]].push(c[1])}}));return a},tpl:function(a,b){try{switch(true){case typeof a!=="object":case !/object|undefined/.test(typeof b)&&typeof(b=b.charAt(0)==="#"?$(b):$(b)[0])==="undefined":throw Error(i.error.invalidArguments);}typeof b==="undefined"&&(b=$("body")[0]);var c=document.createDocumentFragment(),d,e;switch(true){case a instanceof
Array:e=a.length;for(d=0;d<e;d++)$.create(s.cast(a[d],true)[0],c).text(s.cast(a[d])[0]);break;default:for(d in a)switch(true){case typeof a[d]==="string":$.create(d,c).text(a[d]);break;case a[d]instanceof Object:$.tpl(a[d],$.create(d,c))}}b.appendChild(c);return b}catch(g){o(g,arguments,this)}}},m={pattern:{alphanum:/^[a-zA-Z0-9]*$/,"boolean":/^(0|1|true|false)?$/,domain:/^[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#]*[\w\-\@?^=%&amp;\/~\+#])?/,email:/^([0-9a-zA-Z]+([_.-]?[0-9a-zA-Z]+)*@[0-9a-zA-Z]+[0-9,a-z,A-Z,.,-]*(.) {1}[a-zA-Z]{2,4})+$/,
ip:/^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.) {3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})$/,integer:/(^-?\d\d*$)/,notEmpty:/\w{1,}/,number:/(^-?\d\d*\.\d*$)|(^-?\d\d*$)|(^-?\.\d\d*$)/,phone:/^\([1-9]\d{2}\)\s?\d{3}\-\d{4}$/,string:/\w/},test:function(a){var b=false,c=[],d=null;if(typeof a.nodeName!=="undefined"&&a.nodeName==="FORM"){var e,g,f,h,b={},i,j,c={};a.id.isEmpty()&&a.genId();d=$("#"+a.id+":has(input,select)");i=d.length;for(e=0;e<i;e++){a=null;g=m.pattern[d[e].nodeName.toLowerCase()]?
m.pattern[d[e].nodeName.toLowerCase()]:!d[e].id.isEmpty()&&m.pattern[d[e].id.toLowerCase()]?m.pattern[d[e].id.toLowerCase()]:"notEmpty";switch(true){case /radio|checkbox/gi.test(d[e].type):if(d[e].name in c)continue;f=$(d[e].name);j=f.length;for(h=0;h<j;h++)if(f[h].checked)a=f[h].value,c[d[e].name]=true;break;case /select/gi.test(d[e].type):a=d[e].options[d[e].selectedIndex].value;break;default:a=typeof d[e].value!=="undefined"?d[e].value:d[e].innerText}a===null&&(a="");b[g]=a}return this.test(b)}else{for(e in a)if(typeof e===
"undefined"||typeof a[e]==="undefined")c.push({test:e,value:a[e]}),b=true;else switch(d=a[e].charAt(0)==="#"?typeof $(a[e])!=="undefined"?$(a[e]).value?$(a[e]).value:$(a[e]).innerHTML:"":a[e],e){case "date":isNaN((new Date(d)).getYear())&&(c.push({test:e,value:d}),b=true);break;case "domain":m.pattern.domain.test(d.replace(/.*\/\//,""))||(c.push({test:e,value:d}),b=true);break;case "domainip":if(!m.pattern.domain.test(d.replace(/.*\/\//,""))||!m.pattern.ip.test(d))c.push({test:e,value:d}),b=true;
break;default:g=typeof m.pattern[e]!=="undefined"?m.pattern[e]:e,g.test(d)||(c.push({test:e,value:d}),b=true)}return{pass:!b,invalid:c}}}},y={decode:function(a){try{if(typeof a!=="string"||a.isEmpty())throw Error(i.error.invalidArguments);var b;f.ie?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml");return b}catch(c){o(c,arguments,this)}},encode:function(a,b){try{if(typeof a==="undefined")throw Error(i.error.invalidArguments);switch(true){case a!==
null&&typeof a.xml!=="undefined":c=a.xml;break;case a instanceof Document:c=(new XMLSerializer).serializeToString(payload);break;default:var c=(b=b!==false)?"<xml>":"",d=arguments[2]===false?false:true,e,f;e=function(a,b){var c="<n>v</n>";/\&|\<|\>|\"|\'|\t|\r|\n|\@|\$/g.test(b)&&(c=c.replace(/v/,"<![CDATA[v]]\>"));return c.replace(/n/g,a).replace(/v/,b)};switch(true){case typeof a==="boolean":case typeof a==="number":case typeof a==="string":c+=e("item",a);break;case typeof a==="object":for(f in a)c+=
$.xml.encode(a[f],typeof a[f]==="object",false).replace(/item|xml/g,!isNaN(f)?"item":f)}c+=b?"</xml>":"";d&&(c='<?xml version="1.0" encoding="UTF8"?>'+c)}return c}catch(h){o(h,arguments,this)}}},o=h.error;return{array:s,callback:{},client:{android:f.android,blackberry:f.blackberry,css3:false,chrome:f.chrome,expire:f.expire,firefox:f.firefox,ie:f.ie,ios:f.ios,linux:f.linux,mobile:f.mobile,opera:f.opera,osx:f.osx,playbook:f.playbook,safari:f.safari,tablet:f.tablet,size:{x:0,y:0},version:0,webos:f.webos,
windows:f.windows,del:function(a,b,c){return f.request(a,"DELETE",b,c)},get:function(a,b,c,d){return f.request(a,"GET",b,c,d)},headers:function(a,b,c){return f.request(a,"HEAD",b,c)},post:function(a,b,c,d){return f.request(a,"POST",b,c,d)},put:function(a,b,c,d){return f.request(a,"PUT",b,c,d)},jsonp:function(a,b,c,d){return f.jsonp(a,b,c,d)},permission:f.permission},cookie:{expire:function(a){typeof this.get(a)!=="undefined"&&this.set(a,"","-1s");return a},get:function(a){return this.list()[a]},list:function(){var a=
null,b=null,c=null,d=null,e={};if(typeof document.cookie!=="undefined"&&!document.cookie.isEmpty()){d=document.cookie.split(";");b=d.length;for(a=0;a<b;a++)c=d[a].split("="),e[decodeURIComponent(c[0].toString().trim())]=decodeURIComponent(c[1].toString().trim())}return e},set:function(a,b,c){var c=c.toString()||"",d="",e=null,f=null,h=["d","h","m","s"],l=h.length;if(!c.isEmpty()){for(;l--;)if(RegExp(h[l]).test(c)){f=h[l];e=parseInt(c);break}if(isNaN(e))throw Error(i.error.invalidArguments);d=new Date;
switch(f){case "d":d.setDate(d.getDate()+e);break;case "h":d.setHours(d.getHours()+e);break;case "m":d.setMinutes(d.getMinutes()+e);break;case "s":d.setSeconds(d.getSeconds()+e)}}d.isEmpty()||(d="; expires="+d.toUTCString());document.cookie=a.toString().trim()+"="+b+d+"; path=/";return this.get(a)}},data:t,el:q,json:w,label:i,loading:{create:h.loading,url:null},message:{clear:function(){return $.un(window,"message")},send:function(a,b){try{return a.postMessage(b,"*"),a}catch(c){o(c,arguments,this)}},
recv:function(a){return $.on(window,"message",a)}},mouse:{enabled:false,log:false,diff:{x:null,y:null},pos:{x:null,y:null},prev:{x:null,y:null},track:function(a){var b=abaaso.mouse;switch(true){case typeof a==="object":var c,d=false;c=a.pageX?a.pageX:(f.ie&&f.version===8?document.documentElement.scrollLeft:document.body.scrollLeft)+a.clientX;a=a.pageY?a.pageY:(f.ie&&f.version===8?document.documentElement.scrollTop:document.body.scrollTop)+a.clientY;switch(true){case b.pos.x!==c:$.mouse.prev.x=b.prev.x=
b.pos.x,$.mouse.pos.x=b.pos.x=c,$.mouse.diff.x=b.diff.x=b.pos.x-b.prev.x;case b.pos.y!==a:$.mouse.prev.y=b.prev.y=b.pos.y,$.mouse.pos.y=b.pos.y=a,$.mouse.diff.y=b.diff.y=b.pos.y-b.prev.y,d=true}d&&b.log&&h.log(b.pos.x+" : "+b.pos.y);break;case typeof a==="boolean":a?n.add(document,"mousemove",abaaso.mouse.track):n.remove(document,"mousemove"),$.mouse.enabled=b.enabled=a}return b}},number:{diff:function(a){try{if(typeof a!=="number"||typeof this!=="number")throw Error(i.error.expectedNumber);return Math.abs(this-
a)}catch(b){o(b,arguments,this)}},even:function(a){return a%2===0},odd:function(a){return a%2!==0}},observer:{log:n.log,add:n.add,fire:n.fire,fired:0,list:n.list,remove:n.remove},state:{_current:null,header:null,previous:null},validate:m,xml:y,$:h.$,alias:h.alias,allows:f.allows,bootstrap:function(){if(typeof Array.prototype.filter==="undefined")Array.prototype.filter=function(a,b){if(this===void 0||this===null||typeof a!=="function")throw Error(i.error.invalidArguments);var c=null,d=Object(this),
e=d.length>>>0,f=[];val=null;for(c=0;c<e;c++)c in d&&(val=d[c],a.call(b,val,c,d)&&f.push(val));return f};if(typeof Function.prototype.bind==="undefined")Function.prototype.bind=function(a){var b=this,c=Array.prototype.slice,d=c.call(arguments,1);return function(){return b.apply(a,d.concat(c.call(arguments)))}};$=abaaso.$.bind($);abaaso.alias($,abaaso);delete $.$;delete $.bootstrap;delete $.init;switch(true){case typeof document.addEventListener==="function":document.addEventListener("DOMContentLoaded",
function(){abaaso.init()},false);break;default:abaaso.timer.init=setInterval(function(){/loaded|complete/.test(document.readyState)&&(clearInterval(abaaso.timer.init),delete abaaso.timer.init,typeof abaaso.init==="function"&&abaaso.init())},10)}},clean:p.clean,clear:q.clear,clone:h.clone,create:q.create,css:q.css,decode:w.decode,defer:h.defer,define:h.define,del:function(a,b,c){return f.request(a,"DELETE",b,c)},destroy:q.destroy,encode:w.encode,error:h.error,extend:h.extend,fire:function(a,b){return n.fire.call(n,
this===$?abaaso:this,typeof a==="undefined"?void 0:a,typeof b==="undefined"?void 0:b)},genId:h.genId,get:function(a,b,c,d){return f.request(a,"GET",b,c,d)},guid:h.guid,headers:function(a,b,c){return f.request(a,"HEAD",b,c)},hidden:q.hidden,id:"abaaso",init:function(){delete abaaso.init;delete abaaso.bootstrap;abaaso.error.log=[];$.client.version=abaaso.client.version=f.version();$.client.css3=abaaso.client.css3=f.css3();$.client.size=abaaso.client.size=f.size();$.client.tablet=abaaso.client.tablet=
f.tablet();$.state.current=abaaso.state._current;h.proto(Array,"array");h.proto(Element,"element");f.ie&&f.version===8&&h.proto(HTMLDocument,"element");h.proto(Number,"number");h.proto(String,"string");$.on(window,"hashchange",function(){$.fire("hash",location.hash)});$.on(window,"resize",function(){$.client.size=abaaso.client.size=f.size();$.fire("resize",$.client.size)});abaaso.timer.clean=setInterval(function(){abaaso.clean()},12E4);var a,b;a=function(){return this._current};b=function(a){try{if(a===
null||typeof a!=="string"||this.current===a||a.isEmpty())throw Error(i.error.invalidArguments);this.previous=this._current;this._current=a;return n.state(a)}catch(b){o(b,arguments,this)}};switch(true){case (!f.ie||f.version>8)&&typeof Object.defineProperty==="function":Object.defineProperty(abaaso.state,"current",{get:a,set:b});break;case typeof abaaso.state.__defineGetter__==="function":abaaso.state.__defineGetter__("current",a);abaaso.state.__defineSetter__("current",b);break;default:abaaso.state.current=
null,abaaso.state.change=function(a){abaaso.state.current=a;b.call(abaaso.state,a)}}$.fire("init").un("init");abaaso.timer.render=setInterval(function(){/loaded|complete/.test(document.readyState)&&(clearInterval(abaaso.timer.render),delete abaaso.timer.render,$.fire("render").un("render"))},10);$.ready=abaaso.ready=true;return $.fire("ready").un("ready")},jsonp:function(a,b,c,d){return f.jsonp(a,b,c,d)},listeners:function(a){var b=this;b===$&&(b=abaaso);return n.list.call(n,b,a)},on:function(a,b,
c,d,e,f){var h=typeof c==="function",i=h?a:this,m=h?e:d;i===$&&(i=abaaso);typeof m==="undefined"&&(m=i);return n.add.call(n,i,h?b:a,h?c:b,h?d:c,m,h?f:e)},permissions:f.permissions,position:q.position,post:function(a,b,c,d){return f.request(a,"POST",b,c,d)},put:function(a,b,c,d){return f.request(a,"PUT",b,c,d)},queryString:h.queryString,ready:false,store:function(a,b){return t.register.call(t,a,b)},timer:{},tpl:h.tpl,un:function(a,b,c){var d=typeof c!=="undefined",e=d?a:this;e===$&&(e=abaaso);return n.remove.call(n,
e,d?b:a,d?c:b)},update:q.update,version:"1.7.006"}}();t.abaaso.bootstrap()})(window);