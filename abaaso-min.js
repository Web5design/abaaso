/**
 * Copyright (c) 2011, Jason Mulligan
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *     * Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above copyright
 *       notice, this list of conditions and the following disclaimer in the
 *       documentation and/or other materials provided with the distribution.
 *     * Neither the name of Jason Mulligan nor the
 *       names of its contributors may be used to endorse or promote products
 *       derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL JASON MULLIGAN BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/**
 * abaaso
 *
 * Events:    ready      Fires when the DOM is available; safe for GUI creation & module registration [abaaso.define()]
 *            render     Fires when the window resources have loaded; safe for CSS skin injection & module setup (visual fx, etc.)
 *            resize     Fires when the window resizes; parameter for listeners is abaaso.client.size
 *            hash       Fires when window.location.hash changes; parameter for listeners is the hash value
 *            error      Fires when an Error is caught; parameter for listeners is the logged Object (abaaso.error.log)
 *
 * @author Jason Mulligan <jason.mulligan@avoidwork.com>
 * @link http://abaaso.com/
 * @namespace
 * @version 1.6.tech
 */
var abaaso=abaaso||function(){var a={cast:function(a){try{if(typeof a!="object")throw new Error(i.error.expectedObject);var b=[],c=a.length,d;for(var d=0;d<c;d++)b.push(a[d]);return b}catch(e){o(e,arguments,this)}},contains:function(a,b){try{if(!a instanceof Array)throw new Error(i.error.expectedArray);/,/.test(b)?b=b.split(/\s*,\s*/):void 0;if(b instanceof Array){var c=[],d=args.length,e=null;for(e=0;e<d;e++)c[e]=a.index(b[e]);return c}return a.index(b)}catch(f){o(f,arguments,this);return undefined}},diff:function(a,b){try{if(!a instanceof Array&&!b instanceof Array)throw new Error(i.error.expectedArray);return a.filter(function(a){return b.indexOf(a)<0})}catch(c){o(c,arguments,this);return undefined}},first:function(a){try{if(!a instanceof Array)throw new Error(i.error.expectedArray);return a[0]}catch(b){o(b,arguments,this);return undefined}},index:function(a,b){try{if(!a instanceof Array)throw new Error(i.error.expectedArray);var c=a.length;while(c--)if(a[c]==b)return c;return-1}catch(d){o(d,arguments,this);return-1}},indexed:function(a){try{if(!a instanceof Array)throw new Error(i.error.expectedArray);var b,c=0,d=[];for(b in a)typeof a[b]!="function"&&(d[c]=a[b]instanceof Array?a[b].indexed():a[b],c++);d.length=c;return d}catch(e){o(e,arguments,this);return undefined}},keys:function(a){try{if(!a instanceof Array)throw new Error(i.error.expectedArray);var b=[],c=null;for(c in a)typeof a[c]!="function"?b.push(c):void 0;return b}catch(d){o(d,arguments,this);return undefined}},last:function(a){try{if(!a instanceof Array)throw new Error(i.error.expectedArray);return a.length>1?a[a.length-1]:a[0]}catch(b){o(b,arguments,this);return undefined}},remove:function(a,b,c){try{if(!a instanceof Array)throw new Error(i.error.expectedArray);var d;b=b||0,a.fire("beforeRemove"),d=a.slice((c||b)+1||a.length),a.length=b<0?a.length+b:b,a.push.apply(obj,d),a.fire("afterRemove");return a}catch(e){o(e,arguments,this);return undefined}},total:function(a){try{if(!a instanceof Array)throw new Error(i.error.expectedArray);var b=0,c;for(c in a)typeof a[c]!="function"?b++:void 0;return b}catch(d){o(d,arguments,this);return-1}}},b={items:[],clean:function(){for(var a in b.items)typeof b.items[a]!="function"&&b.expired(a)===!0?b.expire(a):void 0;return},expire:function(a){b.items[a]!==undefined?delete b.items[a]:void 0;return},expired:function(a){var c=b.items[a]!==undefined&&(b.items[a].headers.Expires!==undefined&&new Date(b.items[a].headers.Expires)<new Date||abaaso.client.expire>0&&b.items[a].headers.Date!==undefined&&(new Date(b.items[a].headers.Date)).setMilliseconds((new Date(b.items[a].headers.Date)).getMilliseconds()+abaaso.client.expire)>new Date||abaaso.client.expire>0&&(new Date(b.items[a].epoch)).setMilliseconds((new Date(b.items[a].epoch)).getMilliseconds()+abaaso.client.expire)>new Date)?!0:!1;return c},get:function(a,c){try{c=c===!1?!1:!0;if(b.items[a]===undefined)return!1;if(b.items[a].headers!==undefined){if(b.items[a].headers.Pragma!==undefined&&b.items[a].headers.Pragma=="no-cache"&&c||b.expired(b.items[a])){b.expire(a);return!1}return b.items[a]}return b.items[a]}catch(d){o(d,arguments,this);return undefined}},set:function(a,c,d){try{b.items[a]===undefined&&(b.items[a]={},b.items[a].permission=0),c=="permission"?b.items[a].permission|=d:c=="!permission"?b.items[a].permission&=~d:b.items[a][c]=d}catch(e){o(e,arguments,this)}}},c={android:function(){return/android/i.test(navigator.userAgent)}(),blackberry:function(){return/blackberry/i.test(navigator.userAgent)}(),chrome:function(){return/chrome/i.test(navigator.userAgent)}(),css3:function(){switch(!0){case this.mobile:case this.tablet:case this.chrome&&this.version>5:case this.firefox&&this.version>2:case this.ie&&this.version>8:case this.opera&&this.version>8:case this.safari&&this.version>4:this.css3=!0;return!0;default:this.css3=!1;return!1}},expire:0,firefox:function(){return/firefox/i.test(navigator.userAgent)}(),ie:function(){return/msie/i.test(navigator.userAgent)}(),ios:function(){return/ipad|iphone/i.test(navigator.userAgent)}(),linux:function(){return/linux|bsd|unix/i.test(navigator.userAgent)}(),meego:function(){return/meego/i.test(navigator.userAgent)}(),mobile:function(){return/android|blackberry|ipad|iphone|meego|webos/i.test(navigator.userAgent)}(),playbook:function(){return/playbook/i.test(navigator.userAgent)}(),opera:function(){return/opera/i.test(navigator.userAgent)}(),osx:function(){return/macintosh/i.test(navigator.userAgent)}(),safari:function(){return/safari/i.test(navigator.userAgent.replace(/chrome.*/i,""))}(),tablet:function(){return/android|ipad|playbook|meego|webos/i.test(navigator.userAgent)&&(c.size.x>=1e3||c.size.y>=1e3)?!0:!1}(),webos:function(){return/webos/i.test(navigator.userAgent)}(),windows:function(){return/windows/i.test(navigator.userAgent)}(),version:function(){var a=0;switch(!0){case this.chrome:a=navigator.userAgent.replace(/(.*chrome\/|safari.*)/gi,"");break;case this.firefox:a=navigator.userAgent.replace(/(.*firefox\/)/gi,"");break;case this.ie:a=navigator.userAgent.replace(/(.*msie|;.*)/gi,"");break;case this.opera:a=navigator.userAgent.replace(/(.*opera\/|\(.*)/gi,"");break;case this.safari:a=navigator.userAgent.replace(/(.*version\/|safari.*)/gi,"");break;default:a=navigator.appVersion}a=isNaN(parseInt(a))?0:parseInt(a),this.version=a;return a},allow:function(a,c){try{if(a.isEmpty()||c.isEmpty())throw new Error(i.error.invalidArguments);var d;if(b.get(a,!1)===!1)return undefined;switch(!0){case/delete/i.test(c):d=(a.permission(c).bit&1)===0?!1:!0;break;case/get/i.test(c):d=(a.permission(c).bit&4)===0?!1:!0;break;case/post|put/i.test(c):d=(a.permission(c).bit&2)===0?!1:!0;break;default:d=!1}return d}catch(e){o(e,arguments,this);return undefined}},permission:function(a){var c=b.get(a,!1),d=c?c.permission:0,e={allows:[],bit:d,map:{read:4,write:2,"delete":1}};d&1?e.allows.push("DELETE"):void 0,d&2?function(){e.allows.push("PUT"),e.allows.push("PUT")}():void 0,d&4?e.allows.push("GET"):void 0;return e},request:function(a,d,e,g,h){if(/post|put/i.test(d)&&h===undefined)throw new Error(i.error.invalidArguments);if(/jsonp/i.test(d)){var j=new String(a),k;j.on("afterJSONP",function(a){e(a)});do k="a"+l.id();while(abaaso.callback[k]!==undefined);h===undefined?h="callback":void 0,a=a.replace(h+"=?",h+"=abaaso.callback."+k),abaaso.callback[k]=function(a){delete abaaso.callback[k],j.fire("afterJSONP",a).un("afterJSONP")},f.create("script",{src:a,type:"text/javascript"},n("head")[0])}else{var m=new XMLHttpRequest,o=/post|put/i.test(d)?h:null,p=b.get(a,!1),q=d.toLowerCase().capitalize(),r=function(){clearTimeout(abaaso.timer[q+"-"+a]),delete abaaso.timer[q+"-"+a],a.un("received"+q).un("timeout"+q)},s=function(){r(),a.fire("failed"+q)};switch(d.toLowerCase()){case"delete":a.on("afterDelete",function(){b.expire(a),a.un("afterDelete","expire")},"expire")}a.on("received"+q,r).on("timeout"+q,s).on("after"+q,function(a){typeof e=="function"?e(a):void 0}).on("failed"+q,function(){typeof g=="function"?g():void 0}).fire("before"+q).fire("beforeXHR");if(a.allow(d)===!1){a.fire("failed"+q);return a}abaaso.timer[q+"-"+a]=setTimeout(function(){a.fire("timeout"+q)},3e4),m.onreadystatechange=function(){c.response(m,a,d)},m.open(d.toUpperCase(),a,!0),o!==null?m.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8"):void 0,p!==!1&&p.headers.ETag!==undefined?m.setRequestHeader("ETag",p.headers.ETag):void 0,m.send(o)}return a},response:function(a,c,d){try{var e=d.toLowerCase().capitalize(),f;f=function(a){try{if(!a instanceof Array)throw Error(i.error.expectedArray);var b=0,c=a.length,d;for(d=0;d<c;d++)switch(a[d].toLowerCase()){case"get":b|=4;break;case"post":case"put":b|=2;break;case"delete":b|=1}return b}catch(e){o(e,arguments,this);return 0}};if(a.readyState==2){c.fire("received"+e);var g=a.getAllResponseHeaders().split("\n"),h=null,j=g.length,l={},m=null,n;for(h=0;h<j;h++)if(!g[h].isEmpty()){var p=g[h].toString(),q=p.substr(p.indexOf(":")+1,p.length).replace(/\s/,"");p=p.substr(0,p.indexOf(":")).replace(/\s/,""),l[p]=q,/accept/i.test(p)?m=q:void 0}b.set(c,"headers",l),b.set(c,"permission",f(m!==null?m.split(/\s*,\s*/):[d]))}else if(a.readyState==4)switch(!0){case a.status==200&&(/options/i.test(d)||!a.responseText.isEmpty()):var r=null,s=abaaso.state;/delete|options/i.test(d)||(b.set(c,"epoch",new Date),b.set(c,"response",a.responseText)),n=b.get(c,!1),/options/i.test(d)?b.expire(c):void 0,c.fire("afterXHR"),c.fire("after"+e,/options/i.test(d)?n.headers:n.response),s.header!==null&&(r=c.headers[s.header])&&r!==undefined&&(s.previous=s.current,s.current=r,s.previous!==null&&s.current!==null?k.replace(abaaso,r,s.previous,s.current,s.current):void 0,abaaso.fire(r));break;case a.status==301:throw new Error(i.error.serverError);case a.status==401:throw new Error(i.error.serverUnauthorized);case a.status==405:b.set(c,"!permission",f(d));throw new Error(i.error.serverInvalidMethod);default:throw new Error(i.error.serverError)}}catch(t){o(t,arguments,this),c.fire("failed"+e)}},size:function(){var a=document.compatMode=="CSS1Compat"&&c.opera===!1?document.documentElement.clientWidth:document.body.clientWidth,b=document.compatMode=="CSS1Compat"&&c.opera===!1?document.documentElement.clientHeight:document.body.clientHeight;return{x:a,y:b}}},d={expire:function(a){this.get(a)!==undefined?this.set(a,"","-1s"):void 0},get:function(a){return this.list()[a]},list:function(){var a=null,b=null,c=null,d=null,e={};if(document.cookie&&document.cookie!=""){d=document.cookie.split(";"),b=d.length;for(a=0;a<b;a++)c=d[a].split("="),e[decodeURIComponent(c[0].toString().trim())]=decodeURIComponent(c[1].toString().trim())}return e},set:function(a,b,c){c=c.toString()||"";var d="",e=null,f=null,g=["d","h","m","s"],h=g.length;if(c!=""){while(h--)if(c.indexOf(g[h])>0){f=g[h],e=parseInt(c.substring(0,c.indexOf(f)));break}if(isNaN(e))throw new Error(i.error.invalidArguments);d=new Date;switch(f){case"d":d.setDate(d.getDate()+e);break;case"h":d.setHours(d.getHours()+e);break;case"m":d.setMinutes(d.getMinutes()+e);break;case"s":d.setSeconds(d.getSeconds()+e)}}d!=""?d="; expires="+d.toUTCString():void 0,document.cookie=a.toString().trim()+"="+b+d+"; path=/";return this.get(a)}},e={keys:[],records:[],uri:null,clear:function(){this.parentNode.id.fire("beforeClear"),this.uri=null,this.keys=[],this.records=[],this.parentNode.id.fire("afterClear");return this},del:function(a,b){try{b=b===!1?!1:!0;var c=this.parentNode.id,d=abaaso.genId(),e;if(a===undefined||typeof a!="string"&&typeof a!="number")throw new Error(i.error.invalidArguments);if(typeof a=="string"){e=a,a=this.keys[e];if(e===undefined)throw new Error(i.error.invalidArguments);a=a.index}else{e=this.records[a];if(e===undefined)throw new Error(i.error.invalidArguments);e=e.key}c.on("syncDelete",function(){c.un("syncDelete",d),delete this.records[a],delete this.keys[e],b===!0?this.reindex():void 0,c.fire("afterDelete")},d,this),c.fire("beforeDelete"),this.uri===null?c.fire("syncDelete"):abaaso.del(this.uri+"/"+e,function(){c.fire("syncDelete")},function(){c.fire("failedDelete")});return this}catch(f){o(f,arguments,this);return undefined}},find:function(a,b){a=a||undefined,b=b||undefined;try{if(a===undefined)throw Error(i.error.invalidArguments);var c,d=[],e=typeof a=="string"?a.split(/\s*,\s*/):a;if(b===undefined||!b instanceof Array)if(typeof b=="string"){d=b.split(/\s*,\s*/);for(c in d)if(this.records[0].data[d[c]]===undefined)throw Error(i.error.invalidArguments)}else for(c in this.records[0].data)d.push(c);else{for(c in b)if(this.records[0].data[b[c]]===undefined)throw Error(i.error.invalidArguments);d=b}var f=[],g=d.length,h=e.length,j,k,l,m,n,p;c=this.records.length,this.parentNode.id.fire("beforeFind");while(c--)for(j=0;j<g;j++)for(k=0;k<h;k++)l=d[j],p=e[k],m=new RegExp(p,"gi"),n=this.records[c].data[l],m.test(n)&&f.push(this.records[c]);this.parentNode.id.fire("afterFind");return f}catch(q){o(q,arguments,this);return undefined}},get:function(a){try{var b=[],c=this.parentNode.id,d,e,f;c.fire("beforeGet");if(typeof a=="string")b=this.keys[a]!==undefined?this.records[this.keys[a].index]:undefined;else if(a instanceof Array){if(isNaN(a[0])||isNaN(a[1]))throw new Error(i.error.invalidArguments);e=a[0]-1,f=a[1]-1;for(d=e;d<f;d++)this.records[d]!==undefined?b.push(this.records[d]):void 0}else b=this.records[a];c.fire("afterGet");return b}catch(g){o(g,arguments,this);return undefined}},register:function(a){try{if(a instanceof Array){var b=isNaN(a.length)?a.total():a.length;while(b--)this.register(a[b])}else a=l.object(a),abaaso.genId(a),a.data=l.clone(this),a.data.parentNode=a,delete a.data.register;return a}catch(c){o(c,arguments,this);return undefined}},reindex:function(){var a=0,b=this.records.length,c,d,e;for(e=0;e<b;e++)this.records[e]!==undefined&&(c=this.records[e].key,d=parseInt(this.keys[c].index),d!=a&&(this.records[a]=this.records[e],this.keys[c].index=a,delete this.records[e]),a++);this.records.length=a;return this},set:function(a,b){try{switch(!0){case a===undefined:case b===undefined:case b instanceof Array:case b instanceof Number:case b instanceof String:case typeof b!="object":throw new Error(i.error.invalidArguments)}var c=this.keys[a]===undefined&&this.records[a]===undefined?undefined:this.get(a),d=this.parentNode.id,e=abaaso.genId(),f,g;d.on("syncSet",function(){d.un("syncSet",e);if(c===undefined)this.keys[a]={},g=this.records.length,this.keys[a].index=g,this.records[g]={},this.records[g].data=b,this.records[g].key=a,c=this.records[g];else if(typeof b=="object"){for(f in b)c[f]=b[f];this.records[c.index]=c}else this.records[c.index]=b;d.fire("afterSet")},e,this),d.fire("beforeSet"),this.uri===null?d.fire("syncSet"):abaaso[c===undefined?"post":"put"](this.uri+"/"+a,function(){d.fire("syncSet")},function(){d.fire("failedSet")},b);return this}catch(h){o(h,arguments,this);return undefined}void 0}},f={clear:function(a){try{if(a instanceof Array){var b=isNaN(a.length)?a.total():a.length,c=null;for(c=0;c<b;c++)this.clear(a[c]);return a}a=l.object(a);if(a!==null){a.fire("beforeClear");switch(!0){case typeof a.reset=="function":a.reset();break;case a.value!==undefined:a.update({innerHTML:"",value:""});break;default:a.update({innerHTML:""})}a.fire("afterClear");return a}throw new Error(i.error.elementNotFound)}catch(d){o(d,arguments,this);return undefined}},create:function(a,b,c){try{if(a===undefined)throw new Error(i.error.invalidArguments);var d,e;c!==undefined?e=typeof c=="object"?c:n(c):b===undefined||typeof b!="string"&&b.childNodes===undefined?e=document.body:(e=b,typeof e=="string"?e=n(e):void 0);if(e===undefined)throw new Error(i.error.invalidArguments);d=document.createElement(a),b!==undefined&&typeof b!="string"&&b.childNodes===undefined&&b.id!==undefined&&n("#"+b.id)===undefined?d.id=b.id:d.genId(),b!==undefined&&b.id!==undefined?delete b.id:void 0,d.fire("beforeCreate"),typeof b=="object"&&b.childNodes===undefined?d.update(b):void 0,e.appendChild(d),d.fire("afterCreate");return d}catch(f){o(f,arguments,this);return undefined}},css:function(a){try{var b,c;b=this.create("style",{type:"text/css"},n("head")[0]),b.styleSheet?b.styleSheet.cssText=a:(c=document.createTextNode(a),b.appendChild(c));return b}catch(d){o(d,arguments,this);return undefined}},destroy:function(a){try{if(a instanceof Array){var b=isNaN(a.length)?a.total():a.length;while(b--)this.destroy(a[b]);return a}a=l.object(a),a!==undefined&&(a.fire("beforeDestroy"),k.remove(a.id),a.parentNode.removeChild(a),a.fire("afterDestroy"));return undefined}catch(c){o(c,arguments,this);return undefined}},disable:function(a){try{if(a instanceof Array){var b=isNaN(a.length)?a.total():a.length;while(b--)this.disable(a[b]);return a}a=l.object(a),a!==undefined&&a.disabled!==undefined&&(a.fire("beforeDisable"),a.disabled=!0,a.fire("afterDisable"));return a}catch(c){o(c,arguments,this);return undefined}},enable:function(a){try{if(a instanceof Array){var b=isNaN(a.length)?a.total():a.length;while(b--)this.enable(a[b]);return a}a=l.object(a),a!==undefined&&a.disabled!==undefined&&(a.fire("beforeEnable"),a.disabled=!1,a.fire("afterEnable"),instances.push(a));return a}catch(c){o(c,arguments,this);return undefined}},eventID:function(a,b){return window.event?window.event.srcElement.id:b.id},hide:function(a){try{if(a instanceof Array){var b=isNaN(a.length)?a.total():a.length,c=null;for(c=0;c<b;c++)this.hide(a[c]);return a}a=l.object(a),a.fire("beforeHide"),a.old===undefined?a.old={}:void 0,a.old.display=a.style.display,a.style.display="none",a.fire("afterHide");return a}catch(d){o(d,arguments,this);return undefined}},position:function(a){a=l.object(a);if(a===undefined)throw new Error(i.error.invalidArguments);var b=null,c=null;if(a.offsetParent){b=a.offsetLeft,c=a.offsetTop;while(a=a.offsetParent)b+=a.offsetLeft,c+=a.offsetTop}return[b,c]},show:function(a){try{if(a instanceof Array){var b=isNaN(a.length)?a.total():a.length,c=null;for(c=0;c<b;c++)this.show(a[c]);return a}a=l.object(a),a.fire("beforeShow"),a.style.display=a.old!==undefined&&a.old.display!==undefined&&a.old.display!=""?a.old.display:"inherit",a.fire("afterShow");return a}catch(d){o(d,arguments,this);return undefined}},size:function(a){a=l.object(a);if(a===undefined)throw new Error(i.error.invalidArguments);var b=function(a){return isNaN(parseInt(a))?0:parseInt(a)},c=a.offsetHeight+b(a.style.paddingTop)+b(a.style.paddingBottom)+b(a.style.borderTop)+b(a.style.borderBottom),d=a.offsetWidth+b(a.style.paddingLeft)+b(a.style.paddingRight)+b(a.style.borderLeft)+b(a.style.borderRight);return{x:c,y:d}},update:function(a,b){try{if(a instanceof Array){var d=isNaN(a.length)?a.total():a.length,e=null;for(e=0;e<d;e++)this.update(a[e],b);return a}a=l.object(a),b=b||{};if(a===undefined)throw new Error(i.error.invalidArguments);a.fire("beforeUpdate");if(a){for(var e in b)switch(e){case"innerHTML":case"type":case"src":a[e]=b[e];break;case"opacity":a.opacity(b[e]);break;case"class":a.setAttribute(c.ie&&c.version<8?"className":"class",b[e]);break;case"id":var f=k.listeners;f[a.id]!==undefined&&(f[b[e]]=[].concat(f[a.id]),delete f[a.id]);default:a.setAttribute(e,b[e])}a.fire("afterUpdate");return a}throw new Error(i.error.elementNotFound)}catch(g){o(g,arguments,this);return undefined}}},g={even:function(a){try{return a%2===0}catch(b){o(b,arguments,this);return undefined}},odd:function(a){try{return a%2!==0}catch(b){o(b,arguments,this);return undefined}}},h={decode:function(a){try{return JSON.parse(a)}catch(b){o(b,arguments,this);return undefined}},encode:function(a){try{return JSON.stringify(a)}catch(b){o(b,arguments,this);return undefined}}},i={common:{back:"Back",cancel:"Cancel",clear:"Clear",close:"Close",cont:"Continue",del:"Delete",edit:"Edit",find:"Find",gen:"Generate",go:"Go",loading:"Loading",next:"Next",login:"Login",ran:"Random",save:"Save",search:"Search",submit:"Submit"},error:{databaseNotOpen:"Failed to open the Database, possibly exceeded Domain quota",databaseNotSupported:"Client does not support local database storage",databaseWarnInjection:"Possible SQL injection in database transaction, use the &#63; placeholder",elementNotCreated:"Could not create the Element",elementNotFound:"Could not find the Element",expectedArray:"Expected an Array",expectedArrayObject:"Expected an Array or Object",expectedBoolean:"Expected a Boolean value",expectedNumber:"Expected a Number",expectedObject:"Expected an Object",invalidArguments:"One or more arguments is invalid",invalidDate:"Invalid Date",invalidFields:"The following required fields are invalid: ",propertyNotFound:"Could not find the requested property",serverError:"A server error has occurred",serverInvalidMethod:"Method not allowed",serverUnauthorized:"Unauthorized to access URI"}},j={enabled:!1,log:!1,pos:{x:null,y:null},track:function(a){var b=abaaso.mouse;if(typeof a=="object"){var d,e,f=!1;d=a.pageX?a.pageX:(c.ie&&c.version==8?document.documentElement.scrollLeft:document.body.scrollLeft)+a.clientX,e=a.pageY?a.pageY:(c.ie&&c.version==8?document.documentElement.scrollTop:document.body.scrollTop)+a.clientY,b.pos.x!=d&&(b.pos.x=d,f=!0),b.pos.y!=e&&(b.pos.y=e,f=!0);if(f===!0&&b.log===!0)try{console.log(b.pos.x+" : "+b.pos.y)}catch(g){abaaso.error(g,arguments,this)}}else typeof a=="boolean"&&(a===!0?document.addEventListener?document.addEventListener("mousemove",abaaso.mouse.track,!1):document.attachEvent("onmousemove",abaaso.mouse.track):document.removeEventListener?document.removeEventListener("mousemove",abaaso.mouse.track,!1):document.detachEvent("onmousemove",abaaso.mouse.track),b.enabled=a);return b}},k={listeners:[],log:!1,add:function(a,b,c,d,e,f){try{if(a instanceof Array){var g=a.length&&!isNaN(a.length)?a.length:a.total(),h=null;for(h=0;h<g;h++)this.add(a[h],b,c,d,e===!1?a[h]:e,f);return a}var j=null,m=k.listeners,p=a.id!==undefined?a.id:a;a=l.object(a),f=f===!0?!0:!1;if(p===undefined||b===undefined||typeof c!="function"||f&&d===undefined)throw new Error(i.error.invalidArguments);m[p]===undefined?m[p]=[]:void 0,m[p][b]===undefined?m[p][b]=[]:void 0,m[p][b].active===undefined?m[p][b].active=[]:void 0;var q={fn:c};e!==undefined&&e!==null?q.scope=e:void 0,f?(m[p][b].standby===undefined?m[p][b].standby=[]:void 0,m[p][b].standby[d]=q):(d!==undefined?m[p][b].active[d]=q:m[p][b].active.push(q),j=p!="abaaso"?n("#"+p):null,j!==null&&b!="afterJSONP"&&j!==undefined?typeof j.addEventListener=="function"?j.addEventListener(b,function(a){a?void 0:a=window.event,a.cancelBubble=!0,typeof a.stopPropagation=="function"?a.stopPropagation():void 0,j.fire(b)},!1):j.attachEvent("on"+b,function(a){a?void 0:a=window.event,a.cancelBubble=!0,typeof a.stopPropagation=="function"?a.stopPropagation():void 0,j.fire(b)}):void 0);return a}catch(r){o(r,arguments,this);return undefined}},fire:function(a,b,c){try{if(a instanceof Array){var d=isNaN(a.length)?a.total():a.length,e=null;for(e=0;e<d;e++)this.fire(a[e],b,c);return a}a=l.object(a);var f=a.id!==undefined?a.id:a.toString(),e;if(f===undefined||f.isEmpty()||a===undefined||b===undefined)throw new Error(i.error.invalidArguments);abaaso.observer.log===!0?l.log(f+" fired "+b):void 0;var g=k.list(a,b).active;if(g!==undefined)for(e in g)if(g[e]!==undefined&&typeof g[e]!="function"&&g[e].fn)if(g[e].scope!==undefined){var h=typeof g[e].scope=="object"?g[e].scope:n("#"+g[e].scope),j=g[e].fn,m=h!==undefined?h:g[e].scope;c===undefined?j.call(m):j.call(m,c)}else c===undefined?g[e].fn():g[e].fn(c);return a}catch(p){o(p,arguments,this);return undefined}},list:function(a,b){try{if(a===undefined)throw new Error(i.error.invalidArguments);a=l.object(a);var c=k.listeners,d=a.id!==undefined?a.id:a.toString();return c[d]!==undefined?b!==undefined&&c[d][b]!==undefined?c[d][b]:c[d]:[]}catch(e){o(e,arguments,this);return undefined}},remove:function(a,b,c){try{if(a instanceof Array){var d=isNaN(a.length)?a.total():a.length,e=null;for(e=0;e<d;e++)this.remove(a[e],b,c);return a}a=l.object(a);var f=null,g=a.id!==undefined?a.id:a.toString(),h=k.listeners;if(g===undefined||b===undefined||h[g]===undefined||h[g][b]===undefined)return a;c===undefined?(delete h[g][b],f=g!="abaaso"?n("#"+g):null,f!==null&&b!="afterJSONP"&&f!==undefined?typeof f.removeEventListener=="function"?f.removeEventListener(b,function(a){a?void 0:a=window.event,a.cancelBubble=!0,typeof a.stopPropagation=="function"?a.stopPropagation():void 0,f.fire(b)},!1):f.detachEvent("on"+b,function(a){a?void 0:a=window.event,a.cancelBubble=!0,typeof a.stopPropagation=="function"?a.stopPropagation():void 0,f.fire(b)}):void 0):h[g][b].active[c]!==undefined&&(delete h[g][b].active[c],h[g][b].standby!==undefined&&h[g][b].standby[c]!==undefined&&delete h[g][b].standby[c]);return a}catch(i){o(i,arguments,this);return undefined}},replace:function(a,b,c,d,e){try{if(a instanceof Array){var f=isNaN(a.length)?a.total():a.length,g=null;for(g=0;g<f;g++)this.replace(a[g],b,c,d,e);return a}a=l.object(a);var h=k.listeners,j=a.id!==undefined?a.id:a.toString();if(j===undefined||b===undefined||c===undefined||d===undefined||h[j]===undefined||h[j][b]===undefined||h[j][b].active===undefined||h[j][b].active[c]===undefined)throw new Error(i.error.invalidArguments);h[j][b].standby===undefined?h[j][b].standby=[]:void 0;if(typeof e=="string"){if(h[j][b].standby[e]===undefined||h[j][b].standby[e].fn===undefined)throw new Error(i.error.invalidArguments);e=h[j][b].standby[e].fn}else if(typeof e!="function")throw new Error(i.error.invalidArguments);h[j][b].standby[d]={fn:h[j][b].active[c].fn},h[j][b].active[c]={fn:e};return a}catch(m){o(m,arguments,this);return undefined}}},l={$:function(a,b){var d,e,f,g,h,i,j,k,l,m,o,p,q,r=window.document,s=[];j=function(a,b){var c,d,e=[];if(a instanceof Array){d=a.length;for(c=0;c<d;c++)c.isEven()===b?e.push(a[c]):void 0}else if(a.childNodes&&a.childNodes.length>0){d=a.childNodes.length;for(c=0;c<d;c++)c.isEven()===b?e.push(a.childNodes[c]):void 0}return e},k=function(a,b){b=b.split(/\s*,\s*/);var c,d,e=b.length,f=[];for(c=0;c<e;c++)d=new RegExp(b[c].replace("*",".*"),"ig"),d.test(a)?f.push(b[c]):void 0;return f.length>0?!0:!1},l=function(a,b){var c,d,e=[];a instanceof Array&&a.length==1?a=a.first():void 0;if(a instanceof Array){d=a.length;for(c=0;c<d;c++)(new RegExp(b)).test(a[c].innerHTML)?e.push(a[c]):void 0;return e.length==1?e[0]:e}return a!==null&&b!==null&&(new RegExp(b)).test(a[c].innerHTML)?a:undefined},m=function(a,b){var c,d,e=[];a instanceof Array&&a.length==1?a=a.first():void 0;if(a instanceof Array){var f,g;d=a.length;for(c=0;c<d;c++){g=a[c].childNodes.length;for(f=0;f<g;f++)a[c].genId(),k(a[c].childNodes[f].nodeName,b)===!0&&e[a[c].id]===undefined?e[a[c].id]=a[c]:void 0}e=e.indexed()}else{d=a.childNodes.length;for(c=0;c<d;c++)k(a.childNodes[c].nodeName,b)===!0?e.push(a.childNodes[c]):void 0}return e},is=function(a,b){var c,d,e=[];a instanceof Array&&a.length==1?a=a.first():void 0;if(a instanceof Array){d=a.length;for(c=0;c<d;c++)a[c].genId(),k(a[c].nodeName,b)===!0&&e[a[c].id]===undefined?e[a[c].id]=a[c]:void 0;e=e.indexed()}else k(a.nodeName,b)===!0?e.push(a):void 0;return e},o=function(a,b){var c,d,e=[];a instanceof Array&&a.length==1?a=a.first():void 0;if(a instanceof Array){var f,g;d=a.length;for(c=0;c<d;c++){g=a[c].childNodes.length;for(f=0;f<g;f++)a[c].genId(),k(a[c].childNodes[f].nodeName,b)===!1?e[a[c].id]===undefined?e[a[c].id]=a[c]:void 0:e[a[c].id]!==undefined?delete e[a[c].id]:void 0}e=e.indexed()}else{d=a.childNodes.length;for(c=0;c<d;c++)k(a.childNodes[c].nodeName,b)===!1?e.push(a.childNodes[c]):void 0}return e},b=b===!0?!0:!1,/,/.test(a)?a=a.split(/\s*,\s*/):void 0;if(a instanceof Array){g=a.length,a[0].charAt(0)==":"?q="":void 0;for(f=0;f<g;f++)s.push(n(a[f],b));return s}/:/.test(a)?(q=/:.*/gi.exec(a)!==null?/:.*/gi.exec(a)[0].slice(1):"",a=/.*:/.exec(a)!==null?/.*:/.exec(a)[0].slice(0,-1).isEmpty()?":":/.*:/.exec(a)[0].slice(0,-1):":"):q="",a.charAt(0)!=":"?a=new String(a):void 0,d=q.isEmpty()?[]:q.split(/:/);switch(a.charAt(0)){case".":e=r.getElementsByClassName(a.slice(1)),e!==null&&b===!1?e=!c.ie||c.version>8?Array.prototype.slice.call(e):abaaso.array.cast(e):void 0;break;case"#":e=r.getElementById(a.substring(1));break;case":":e=r.body.getElementsByTagName("*"),e!==null&&b===!1?e=!c.ie||c.version>8?Array.prototype.slice.call(e):abaaso.array.cast(e):void 0;break;default:e=r.getElementsByTagName(a),e!==null&&b===!1?e=!c.ie||c.version>8?Array.prototype.slice.call(e):abaaso.array.cast(e):void 0}if(e!==null&&d.length&&d.length>0){g=d.length;for(f=0;f<g;f++){if(e===undefined){e=[];break}switch(d[f].toString().replace(/\(.*\)/,"")){case"contains":e=l(e,d[f].toString().replace(/.*\(|'|"|\)/g,""));break;case"even":e=j(e,!0);break;case"first":e=e.first();break;case"has":e=m(e,d[f].toString().replace(/.*\(|'|"|\)/g,""));break;case"is":e=is(e,d[f].toString().replace(/.*\(|'|"|\)/g,""));break;case"last":e=e.last();break;case"not":e=o(e,d[f].toString().replace(/.*\(|'|"|\)/g,""));break;case"odd":e=j(e,!1);break;default:h=e.length?e.length:0,s=[];for(p=0;p<h;p++)i=e[p].className.split(" "),i.index(d[f])>-1?s.push(e[p]):void 0;e=s}e instanceof Array&&(e.length===0?e=f+1==g?[]:undefined:void 0)}}e===null&&(e=undefined);return e},clone:function(a){try{if(typeof a!="object")throw Error(i.error.expectedObject);var b={},c;typeof a.prototype=="object"?b.prototype=a.prototype:void 0;for(c in a)b[c]=a[c];return b}catch(d){o(d,arguments,this);return undefined}},define:function(a,b,c){a=a.split("."),c=c||this;var d=null,e=a.length,f=c;for(d=0;d<e;d++)f[a[d]]===undefined?f[a[d]]=d+1<e?{}:b!==undefined?b:null:d+1>=e?f[a[d]]=b!==undefined?b:null:void 0,f=f[a[d]];return c},defer:function(a,b){var c=l.genId(),d=function(){delete abaaso.timer[c],a()};abaaso.timer[c]=setTimeout(d,b)},error:function(a,b,c){var d={arguments:b,message:a.message,number:a.number!==undefined?a.number&65535:undefined,scope:c,timestamp:(new Date).toUTCString(),type:a.type!==undefined?a.type:"TypeError"};typeof console!="undefined"?console.error(d.message):void 0,o.log===undefined?o.log=[]:void 0,o.log.push(d),abaaso.fire("error",d)},domId:function(a){try{return a.toString().replace(/(\&|,|(\s)|\/)/gi,"").toLowerCase()}catch(b){o(b,arguments,this);return undefined}},genId:function(a){try{if(typeof a!="undefined"&&(a instanceof Array||a instanceof String||typeof a.id!="undefined"&&a.id!=""))return a;var b;do b="a"+l.id();while(n("#"+b)!==undefined);if(typeof a=="object"){a.id=b;return a}return b}catch(c){o(c,arguments,this);return undefined}},id:function(){return Math.floor(Math.random()*1e9)},loading:function(a){try{if(a instanceof Array){var b=isNaN(a.length)?a.total():a.length,c=null;for(c=0;c<b;c++)this.loading(a[c]);return arg}if(abaaso.loading.url===null)throw new Error(i.error.elementNotFound);a=typeof a=="object"?a:n(a);if(a===undefined)throw new Error(i.error.invalidArguments);abaaso.loading.image===undefined&&(abaaso.loading.image=new Image,abaaso.loading.image.src=abaaso.loading.url),a.genId(),a.clear(),n("#"+a.id).create("div",{id:a.id+"_loading","class":"loading"}),n("#"+a.id+"_loading").create("img",{alt:i.common.loading,src:abaaso.loading.image.src});return a}catch(d){o(d,arguments,this);return undefined}},log:function(a){try{console.log(a)}catch(b){o(b,arguments,this)}},object:function(a){return typeof a=="object"?a:a.charAt(0)=="#"?n(a):a},proto:function(a,c){try{if(typeof a!="object")throw new Error(i.error.invalidArguments);var d=function(a,b){var c=b.length;while(c--)a[b[c].name]=b[c].fn},e={array:[{name:"contains",fn:function(a){return abaaso.array.contains(this,a)}},{name:"diff",fn:function(a){return abaaso.array.diff(this,a)}},{name:"first",fn:function(){return abaaso.array.first(this)}},{name:"index",fn:function(a){return abaaso.array.index(this,a)}},{name:"indexed",fn:function(){return abaaso.array.indexed(this)}},{name:"keys",fn:function(){return abaaso.array.keys(this)}},{name:"last",fn:function(a){return abaaso.array.last(this)}},{name:"on",fn:function(a,b,c,d,e){d=d||!1;return abaaso.on(this,a,b,c,d,e)}},{name:"remove",fn:function(a){return abaaso.array.remove(this,a)}},{name:"total",fn:function(){return abaaso.array.total(this)}}],element:[{name:"create",fn:function(a,b){this.genId();return abaaso.create(a,b,this)}},{name:"disable",fn:function(){return abaaso.el.disable(this)}},{name:"enable",fn:function(){return abaaso.el.enable(this)}},{name:"get",fn:function(a){this.fire("beforeGet");var c=b.get(a);c?(this.value!==undefined?this.update({value:c.response}):this.update({innerHTML:c.response}),this.fire("afterGet")):(a.on("afterGet",function(){a.un("afterGet","get");var c=b.get(a,!1).response;this.value!==undefined?this.update({value:c}):this.update({innerHTML:c}),this.fire("afterGet")},"get",this),abaaso.get(a));return this}},{name:"hide",fn:function(){this.genId();return abaaso.el.hide(this)}},{name:"isAlphaNum",fn:function(){return/form/gi.test(this.nodeName)?!1:abaaso.validate.test({alphanum:typeof this.value!="undefined"?this.value:this.innerText}).pass}},{name:"isBoolean",fn:function(){return/form/gi.test(this.nodeName)?!1:abaaso.validate.test({"boolean":typeof this.value!="undefined"?this.value:this.innerText}).pass}},{name:"isDate",fn:function(){return/form/gi.test(this.nodeName)?!1:typeof this.value!="undefined"?this.value.isDate():this.innerText.isDate()}},{name:"isDomain",fn:function(){return/form/gi.test(this.nodeName)?!1:typeof this.value!="undefined"?this.value.isDomain():this.innerText.isDomain()}},{name:"isEmail",fn:function(){return/form/gi.test(this.nodeName)?!1:typeof this.value!="undefined"?this.value.isEmail():this.innerText.isEmail()}},{name:"isEmpty",fn:function(){return/form/gi.test(this.nodeName)?!1:typeof this.value!="undefined"?this.value.isEmpty():this.innerText.isEmpty()}},{name:"isIP",fn:function(){return/form/gi.test(this.nodeName)?!1:typeof this.value!="undefined"?this.value.isIP():this.innerText.isIP()}},{name:"isInt",fn:function(){return/form/gi.test(this.nodeName)?!1:typeof this.value!="undefined"?this.value.isInt():this.innerText.isInt()}},{name:"isNumber",fn:function(){return/form/gi.test(this.nodeName)?!1:typeof this.value!="undefined"?this.value.isNumber():this.innerText.isNumber()}},{name:"isPhone",fn:function(){return/form/gi.test(this.nodeName)?!1:typeof this.value!="undefined"?this.value.isPhone():this.innerText.isPhone()}},{name:"isString",fn:function(){return/form/gi.test(this.nodeName)?!1:typeof this.value!="undefined"?this.value.isString():this.innerText.isString()}},{name:"jsonp",fn:function(a,b,c){var d=this,e=b,f=function(a){var b=d,c=a,f=e,g,h,i;try{if(f!==undefined){f=f.replace(/]|'|"/g,"").replace(/\./g,"[").split("["),h=f.length;for(g=0;g<h;g++){c=isNaN(f[g])?c[f[g]]:c[parseInt(f[g])];if(c===undefined)throw new Error(abaaso.label.error.propertyNotFound)}i=c}else i=a}catch(j){i=abaaso.label.error.serverError,abaaso.error(j,arguments,this)}b.text(i)};abaaso.jsonp(a,f,null,c);return this}},{name:"loading",fn:function(){return abaaso.loading.create(this)}},{name:"on",fn:function(a,b,c,d,e){d=d||this,this.id===undefined||this.id.isEmpty()?this.genId():void 0;return abaaso.on(this,a,b,c,d,e)}},{name:"position",fn:function(){this.genId();return abaaso.el.position(this)}},{name:"show",fn:function(){this.genId();return abaaso.el.show(this)}},{name:"size",fn:function(){this.genId();return abaaso.el.size(this)}},{name:"text",fn:function(a){this.genId();return abaaso.update(this,{innerHTML:a})}},{name:"update",fn:function(a){this.genId();return abaaso.update(this,a)}},{name:"validate",fn:function(){return/form/gi.test(this.nodeName)?abaaso.validate.test(this).pass:typeof this.value!="undefined"?!this.value.isEmpty():!this.innerText.isEmpty()}}],number:[{name:"isEven",fn:function(){return abaaso.number.even(this)}},{name:"isOdd",fn:function(){return abaaso.number.odd(this)}},{name:"on",fn:function(a,b,c,d,e){d=d||this;return abaaso.on(this,a,b,c,d,e)}}],shared:[{name:"clear",fn:function(){typeof this=="object"&&(this.id===undefined||this.id.isEmpty())?this.genId():void 0,this instanceof String?this.constructor=new String(""):abaaso.clear(this);return this}},{name:"destroy",fn:function(){abaaso.destroy(this)}},{name:"domId",fn:function(){if(!this instanceof String){this.genId();return abaaso.domId(this.id)}return abaaso.domId(this)}},{name:"fire",fn:function(a,b){!this instanceof String&&(this.id===undefined||this.id.isEmpty())?this.genId():void 0;return abaaso.fire.call(this,a,b)}},{name:"genId",fn:function(){return abaaso.genId(this)}},{name:"listeners",fn:function(a){!this instanceof String&&(this.id===undefined||this.id.isEmpty())?this.genId():void 0;return abaaso.listeners(this,a)}},{name:"un",fn:function(a,b){!this instanceof String&&(this.id===undefined||this.id.isEmpty())?this.genId():void 0;return abaaso.un(this,a,b)}}],string:[{name:"allow",fn:function(a){return abaaso.allow(this,a)}},{name:"capitalize",fn:function(){return this.charAt(0).toUpperCase()+this.slice(1)}},{name:"isAlphaNum",fn:function(){return abaaso.validate.test({alphanum:this}).pass}},{name:"isBoolean",fn:function(){return abaaso.validate.test({"boolean":this}).pass}},{name:"isDate",fn:function(){return abaaso.validate.test({date:this}).pass}},{name:"isDomain",fn:function(){return abaaso.validate.test({domain:this}).pass}},{name:"isEmail",fn:function(){return abaaso.validate.test({email:this}).pass}},{name:"isEmpty",fn:function(){return!abaaso.validate.test({notEmpty:this}).pass}},{name:"isIP",fn:function(){return abaaso.validate.test({ip:this}).pass}},{name:"isInt",fn:function(){return abaaso.validate.test({integer:this}).pass}},{name:"isNumber",fn:function(){return abaaso.validate.test({number:this}).pass}},{name:"isPhone",fn:function(){return abaaso.validate.test({phone:this}).pass}},{name:"isString",fn:function(){return abaaso.validate.test({string:this}).pass}},{name:"on",fn:function(a,b,c,d,e){d=d||this;return abaaso.on(this,a,b,c,d,e)}},{name:"permission",fn:function(){return abaaso.permission(this)}},{name:"trim",fn:function(){return this.replace(/^\s+|\s+$/,"")}}]};d(a,e[c]),d(a,e.shared)}catch(f){o(f,arguments,this)}}},m={pattern:{alphanum:/^[a-zA-Z0-9]*$/,"boolean":/^(0|1|true|false)?$/,domain:/^[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#]*[\w\-\@?^=%&amp;\/~\+#])?/,email:/^([0-9a-zA-Z]+([_.-]?[0-9a-zA-Z]+)*@[0-9a-zA-Z]+[0-9,a-z,A-Z,.,-]*(.){1}[a-zA-Z]{2,4})+$/,ip:/^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})$/,integer:/(^-?\d\d*$)/,notEmpty:/\w{1,}/,number:/(^-?\d\d*\.\d*$)|(^-?\d\d*$)|(^-?\.\d\d*$)/,phone:/^\([1-9]\d{2}\)\s?\d{3}\-\d{4}$/,string:/\w/},test:function(a){try{var b=!1,c=[],d=null;if(typeof a.nodeName!="undefined"&&/form/gi.test(a.nodeName)){var e,f,g,h,i,j,k={},l,m,p,c=[],q={};a.id.isEmpty()?a.genId():void 0,h=n("#"+a.id+":has(input,select)"),l=h.length;for(e=0;e<l;e++){g=null,f=this.pattern[h[e].nodeName.toLowerCase()]?this.pattern[h[e].nodeName.toLowerCase()]:h[e].id.isEmpty()===!1&&this.pattern[h[e].id.toLowerCase()]?this.pattern[h[e].id.toLowerCase()]:"notEmpty";if(/(radio|checkbox)/gi.test(h[e].type)){if(h[e].name in q)continue;i=document.getElementsByName(h[e].name),m=i.length;for(j=0;j<m;j++)if(i[j].checked){g=i[j].value,q[h[e].name]=!0;continue}}else/select/gi.test(h[e].type)?g=h[e].options[h[e].selectedIndex].value:g=typeof h[e].value!="undefined"?h[e].value:h[e].innerText;g===null?g="":void 0,k[f]=g}p=this.test(k);return p}for(var e in a){if(e===undefined||a[e]===undefined){c.push({test:e,value:a[e]}),b=!0;continue}d=new String(a[e].charAt(0)=="#"?n(a[e])!==undefined?n(a[e]).value?n(a[e]).value:n(a[e]).innerHTML:"":a[e]);switch(e){case"date":isNaN((new Date(d)).getYear())&&(c.push({test:e,value:d}),b=!0);break;case"domainip":if(!this.pattern.domain.test(d)||!this.pattern.ip.test(d))c.push({test:e,value:d}),b=!0;break;default:var f=this.pattern[e]!==undefined?this.pattern[e]:e;f.test(d)||(c.push({test:e,value:d}),b=!0)}}return{pass:!b,invalid:c}}catch(r){o(r,arguments,this);return{pass:!1,invalid:{}}}}},n=l.$,o=l.error;return{array:a,callback:[],client:{android:c.android,blackberry:c.blackberry,css3:null,chrome:c.chrome,expire:c.expire,firefox:c.firefox,ie:c.ie,ios:c.ios,linux:c.linux,meego:c.meego,mobile:c.mobile,opera:c.opera,osx:c.osx,playbook:c.playbook,safari:c.safari,tablet:c.tablet,size:{x:0,y:0},version:null,webos:c.webos,windows:c.windows,del:function(a,b,d){c.request(a,"DELETE",b,d)},get:function(a,b,d){c.request(a,"GET",b,d)},options:function(a,b,d){c.request(a,"OPTIONS",b,d)},post:function(a,b,d,e){c.request(a,"POST",b,d,e)},put:function(a,b,d,e){c.request(a,"PUT",b,d,e)},jsonp:function(a,b,d,e){c.request(a,"JSONP",b,d,e)},permission:c.permission},cookie:d,data:e,el:f,json:h,label:i,loading:{create:l.loading,url:null},mouse:j,number:g,observer:{log:k.log,add:k.add,fire:k.fire,list:k.list,remove:k.remove},state:{current:null,header:null,previous:null},validate:m,$:l.$,allow:c.allow,clean:b.clean,clear:f.clear,clone:l.clone,create:f.create,css:f.css,decode:h.decode,defer:l.defer,define:l.define,del:function(a,b,d){c.request(a,"DELETE",b,d)},destroy:f.destroy,domId:l.domId,encode:h.encode,error:l.error,fire:function(){var a=arguments[0]===undefined?undefined:arguments[0],b=arguments[1]===undefined?undefined:arguments[1];return abaaso.observer.fire(this,a,b)},genId:l.genId,get:function(a,b,d){c.request(a,"GET",b,d)},id:"abaaso",init:function(){try{abaaso.constructor=abaaso,abaaso.ready=!0,delete abaaso.init,abaaso.client.version=c.version(),abaaso.client.css3=c.css3(),abaaso.client.size=c.size(),l.proto(Array.prototype,"array"),l.proto(Element.prototype,"element"),c.ie&&c.version==8?l.proto(HTMLDocument.prototype,"element"):void 0,l.proto(Number.prototype,"number"),l.proto(String.prototype,"string"),window.onhashchange=function(){abaaso.fire("hash",location.hash)},window.onresize=function(){abaaso.client.size=c.size(),abaaso.fire("resize",abaaso.client.size)},abaaso.timer.clean=setInterval(function(){abaaso.clean()},12e4),typeof document.getElementsByClassName!="function"&&(document.getElementsByClassName=function(a){var b=document.getElementsByTagName("*"),c=b.length,d=null,e=[],f=new RegExp("(^|\\s)"+a+"(\\s|$)");for(d=0;d<c;d++)f.test(b[d].className)?e.push(b[d]):void 0;return e}),typeof Array.prototype.filter!="function"&&(Array.prototype.filter=function(a){"use strict";if(this===void 0||this===null||typeof a!="function")throw new Error(i.error.invalidArguments);var b=null,c=Object(this),d=c.length>>>0,e=[],f=arguments[1];val=null;for(b=0;b<d;b++)b in c&&(val=c[b],a.call(f,val,b,c)?e.push(val):void 0);return e});if(!c.ie||c.version>8)abaaso.timer.render=setInterval(function(){/loaded|complete/.test(document.readyState)&&(clearInterval(abaaso.timer.render),delete abaaso.timer.render,abaaso.fire("render").un("render"))},10);abaaso.fire("ready").un("ready");return abaaso}catch(a){o(a,arguments,this);return undefined}},jsonp:function(a,b,d,e){c.request(a,"JSONP",b,d,e)},listeners:function(){var a=arguments[1]!==undefined?!0:!1,b=a?arguments[0]:abaaso,c=a?arguments[1]:arguments[0];return abaaso.observer.list(b,c)},on:function(){var a=typeof arguments[2]=="function"?!0:!1,b=a?arguments[0]:abaaso,c=a?arguments[1]:arguments[0],d=a?arguments[2]:arguments[1],e=a?arguments[3]:arguments[2],f=a?arguments[4]:arguments[3],g=a?arguments[5]:arguments[4];return abaaso.observer.add(b,c,d,e,f,g)},options:function(a,b,d){c.request(a,"OPTIONS",b,d)},permission:c.permission,position:f.position,post:function(a,b,d,e){c.request(a,"POST",b,d,e)},put:function(a,b,d,e){c.request(a,"PUT",b,d,e)},ready:!1,store:function(a){return e.register.call(e,a)},timer:{},un:function(){var a=typeof arguments[0]=="string"?!1:!0,b=a?arguments[0]:abaaso,c=a?arguments[1]:arguments[0],d=a?arguments[2]:arguments[1];return abaaso.observer.remove(b,c,d)},update:f.update,version:"1.6.tech"}}();if(typeof abaaso.init=="function"){var $=function(a,b){return abaaso.$(a,b)};switch(!0){case abaaso.client.chrome:case abaaso.client.firefox:case abaaso.client.opera:case abaaso.client.safari:case abaaso.client.ie&&abaaso.client.version>8:document.addEventListener("DOMContentLoaded",function(){abaaso.init()},!1);break;default:abaaso.timer.init=setInterval(function(){/loaded|complete/.test(document.readyState)&&(clearInterval(abaaso.timer.init),delete abaaso.timer.init,abaaso.init(),abaaso.fire("render").un("render"))},10)}}